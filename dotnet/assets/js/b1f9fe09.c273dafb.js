"use strict";(self.webpackChunkplaywright_dev=self.webpackChunkplaywright_dev||[]).push([[7245],{436:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>o,contentTitle:()=>a,default:()=>d,frontMatter:()=>r,metadata:()=>c,toc:()=>l});var s=t(4848),i=t(8453);t(4235),t(8328),t(3078);const r={id:"class-tracing",title:"Tracing"},a=void 0,c={id:"api/class-tracing",title:"Tracing",description:"API for collecting and saving Playwright Traces. Playwright Traces can be opened in Trace Viewer after Playwright script runs.",source:"@site/versioned_docs/version-stable/api/class-tracing.mdx",sourceDirName:"api",slug:"/api/class-tracing",permalink:"/dotnet/docs/api/class-tracing",draft:!1,unlisted:!1,tags:[],version:"stable",frontMatter:{id:"class-tracing",title:"Tracing"},sidebar:"api",previous:{title:"Touchscreen",permalink:"/dotnet/docs/api/class-touchscreen"},next:{title:"Video",permalink:"/dotnet/docs/api/class-video"}},o={},l=[{value:"Methods",id:"methods",level:2},{value:"StartAsync",id:"tracing-start",level:3},{value:"StartChunkAsync",id:"tracing-start-chunk",level:3},{value:"StopAsync",id:"tracing-stop",level:3},{value:"StopChunkAsync",id:"tracing-stop-chunk",level:3}];function h(n){const e={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(e.p,{children:["API for collecting and saving Playwright Traces. Playwright Traces can be opened in ",(0,s.jsx)(e.a,{href:"/dotnet/docs/trace-viewer",children:"Trace Viewer"})," after Playwright script runs."]}),"\n",(0,s.jsx)(e.p,{children:"Start recording a trace before performing actions. At the end, stop tracing and save it to a file."}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-csharp",children:'using var playwright = await Playwright.CreateAsync();\nvar browser = await playwright.Chromium.LaunchAsync();\nawait using var context = await browser.NewContextAsync();\nawait context.Tracing.StartAsync(new()\n{\n  Screenshots = true,\n  Snapshots = true\n});\nvar page = await context.NewPageAsync();\nawait page.GotoAsync("https://playwright.dev");\nawait context.Tracing.StopAsync(new()\n{\n  Path = "trace.zip"\n});\n'})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"methods",children:"Methods"}),"\n",(0,s.jsx)(e.h3,{id:"tracing-start",children:"StartAsync"}),"\n",(0,s.jsx)("font",{size:"2",style:{position:"relative",top:"-20px"},children:"Added in: v1.12"}),"\n",(0,s.jsx)("x-search",{children:"tracing.StartAsync"}),"\n",(0,s.jsx)(e.p,{children:"Start tracing."}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Usage"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-csharp",children:'using var playwright = await Playwright.CreateAsync();\nvar browser = await playwright.Chromium.LaunchAsync();\nawait using var context = await browser.NewContextAsync();\nawait context.Tracing.StartAsync(new()\n{\n  Screenshots = true,\n  Snapshots = true\n});\nvar page = await context.NewPageAsync();\nawait page.GotoAsync("https://playwright.dev");\nawait context.Tracing.StopAsync(new()\n{\n  Path = "trace.zip"\n});\n'})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Arguments"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"options"})," ",(0,s.jsx)(e.code,{children:"TracingStartOptions?"})," ",(0,s.jsx)(e.em,{children:"(optional)"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.code,{children:"Name"})," ",(0,s.jsx)(e.a,{href:"https://docs.microsoft.com/en-us/dotnet/api/system.string",title:"string",children:"string"}),"? ",(0,s.jsx)(e.em,{children:"(optional)"}),(0,s.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"tracing-start-option-name"}),(0,s.jsx)("a",{href:"#tracing-start-option-name",class:"list-anchor",children:"#"})]}),"\n",(0,s.jsxs)(e.p,{children:["If specified, intermediate trace files are going to be saved into the files with the given name prefix inside the ",(0,s.jsx)(e.code,{children:"tracesDir"})," folder specified in ",(0,s.jsx)(e.a,{href:"/dotnet/docs/api/class-browsertype#browser-type-launch",children:"BrowserType.LaunchAsync()"}),". To specify the final trace zip file name, you need to pass ",(0,s.jsx)(e.code,{children:"path"})," option to ",(0,s.jsx)(e.a,{href:"/dotnet/docs/api/class-tracing#tracing-stop",children:"Tracing.StopAsync()"})," instead."]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.code,{children:"Screenshots"})," ",(0,s.jsx)(e.a,{href:"https://docs.microsoft.com/en-us/dotnet/api/system.boolean",title:"bool",children:"bool"}),"? ",(0,s.jsx)(e.em,{children:"(optional)"}),(0,s.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"tracing-start-option-screenshots"}),(0,s.jsx)("a",{href:"#tracing-start-option-screenshots",class:"list-anchor",children:"#"})]}),"\n",(0,s.jsx)(e.p,{children:"Whether to capture screenshots during tracing. Screenshots are used to build a timeline preview."}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.code,{children:"Snapshots"})," ",(0,s.jsx)(e.a,{href:"https://docs.microsoft.com/en-us/dotnet/api/system.boolean",title:"bool",children:"bool"}),"? ",(0,s.jsx)(e.em,{children:"(optional)"}),(0,s.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"tracing-start-option-snapshots"}),(0,s.jsx)("a",{href:"#tracing-start-option-snapshots",class:"list-anchor",children:"#"})]}),"\n",(0,s.jsx)(e.p,{children:"If this option is true tracing will"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"capture DOM snapshot on every action"}),"\n",(0,s.jsx)(e.li,{children:"record network activity"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.code,{children:"Sources"})," ",(0,s.jsx)(e.a,{href:"https://docs.microsoft.com/en-us/dotnet/api/system.boolean",title:"bool",children:"bool"}),"? ",(0,s.jsx)(e.em,{children:"(optional)"})," ",(0,s.jsx)("font",{size:"2",children:"Added in: v1.17"}),(0,s.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"tracing-start-option-sources"}),(0,s.jsx)("a",{href:"#tracing-start-option-sources",class:"list-anchor",children:"#"})]}),"\n",(0,s.jsx)(e.p,{children:"Whether to include source files for trace actions."}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.code,{children:"Title"})," ",(0,s.jsx)(e.a,{href:"https://docs.microsoft.com/en-us/dotnet/api/system.string",title:"string",children:"string"}),"? ",(0,s.jsx)(e.em,{children:"(optional)"})," ",(0,s.jsx)("font",{size:"2",children:"Added in: v1.17"}),(0,s.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"tracing-start-option-title"}),(0,s.jsx)("a",{href:"#tracing-start-option-title",class:"list-anchor",children:"#"})]}),"\n",(0,s.jsx)(e.p,{children:"Trace name to be shown in the Trace Viewer."}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Returns"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.a,{href:"https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/builtin-types/void",title:"void",children:"void"}),(0,s.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"tracing-start-return"}),(0,s.jsx)("a",{href:"#tracing-start-return",class:"list-anchor",children:"#"})]}),"\n"]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h3,{id:"tracing-start-chunk",children:"StartChunkAsync"}),"\n",(0,s.jsx)("font",{size:"2",style:{position:"relative",top:"-20px"},children:"Added in: v1.15"}),"\n",(0,s.jsx)("x-search",{children:"tracing.StartChunkAsync"}),"\n",(0,s.jsxs)(e.p,{children:["Start a new trace chunk. If you'd like to record multiple traces on the same ",(0,s.jsx)(e.a,{href:"/dotnet/docs/api/class-browsercontext",title:"BrowserContext",children:"BrowserContext"}),", use ",(0,s.jsx)(e.a,{href:"/dotnet/docs/api/class-tracing#tracing-start",children:"Tracing.StartAsync()"})," once, and then create multiple trace chunks with ",(0,s.jsx)(e.a,{href:"/dotnet/docs/api/class-tracing#tracing-start-chunk",children:"Tracing.StartChunkAsync()"})," and ",(0,s.jsx)(e.a,{href:"/dotnet/docs/api/class-tracing#tracing-stop-chunk",children:"Tracing.StopChunkAsync()"}),"."]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Usage"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-csharp",children:'using var playwright = await Playwright.CreateAsync();\nvar browser = await playwright.Chromium.LaunchAsync();\nawait using var context = await browser.NewContextAsync();\nawait context.Tracing.StartAsync(new()\n{\n  Screenshots = true,\n  Snapshots = true\n});\nvar page = await context.NewPageAsync();\nawait page.GotoAsync("https://playwright.dev");\n\nawait context.Tracing.StartChunkAsync();\nawait page.GetByText("Get Started").ClickAsync();\n// Everything between StartChunkAsync and StopChunkAsync will be recorded in the trace.\nawait context.Tracing.StopChunkAsync(new()\n{\n  Path = "trace1.zip"\n});\n\nawait context.Tracing.StartChunkAsync();\nawait page.GotoAsync("http://example.com");\n// Save a second trace file with different actions.\nawait context.Tracing.StopChunkAsync(new()\n{\n  Path = "trace2.zip"\n});\n'})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Arguments"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"options"})," ",(0,s.jsx)(e.code,{children:"TracingStartChunkOptions?"})," ",(0,s.jsx)(e.em,{children:"(optional)"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.code,{children:"Name"})," ",(0,s.jsx)(e.a,{href:"https://docs.microsoft.com/en-us/dotnet/api/system.string",title:"string",children:"string"}),"? ",(0,s.jsx)(e.em,{children:"(optional)"})," ",(0,s.jsx)("font",{size:"2",children:"Added in: v1.32"}),(0,s.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"tracing-start-chunk-option-name"}),(0,s.jsx)("a",{href:"#tracing-start-chunk-option-name",class:"list-anchor",children:"#"})]}),"\n",(0,s.jsxs)(e.p,{children:["If specified, intermediate trace files are going to be saved into the files with the given name prefix inside the ",(0,s.jsx)(e.code,{children:"tracesDir"})," folder specified in ",(0,s.jsx)(e.a,{href:"/dotnet/docs/api/class-browsertype#browser-type-launch",children:"BrowserType.LaunchAsync()"}),". To specify the final trace zip file name, you need to pass ",(0,s.jsx)(e.code,{children:"path"})," option to ",(0,s.jsx)(e.a,{href:"/dotnet/docs/api/class-tracing#tracing-stop-chunk",children:"Tracing.StopChunkAsync()"})," instead."]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.code,{children:"Title"})," ",(0,s.jsx)(e.a,{href:"https://docs.microsoft.com/en-us/dotnet/api/system.string",title:"string",children:"string"}),"? ",(0,s.jsx)(e.em,{children:"(optional)"})," ",(0,s.jsx)("font",{size:"2",children:"Added in: v1.17"}),(0,s.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"tracing-start-chunk-option-title"}),(0,s.jsx)("a",{href:"#tracing-start-chunk-option-title",class:"list-anchor",children:"#"})]}),"\n",(0,s.jsx)(e.p,{children:"Trace name to be shown in the Trace Viewer."}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Returns"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.a,{href:"https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/builtin-types/void",title:"void",children:"void"}),(0,s.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"tracing-start-chunk-return"}),(0,s.jsx)("a",{href:"#tracing-start-chunk-return",class:"list-anchor",children:"#"})]}),"\n"]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h3,{id:"tracing-stop",children:"StopAsync"}),"\n",(0,s.jsx)("font",{size:"2",style:{position:"relative",top:"-20px"},children:"Added in: v1.12"}),"\n",(0,s.jsx)("x-search",{children:"tracing.StopAsync"}),"\n",(0,s.jsx)(e.p,{children:"Stop tracing."}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Usage"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-csharp",children:"await Tracing.StopAsync(options);\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Arguments"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"options"})," ",(0,s.jsx)(e.code,{children:"TracingStopOptions?"})," ",(0,s.jsx)(e.em,{children:"(optional)"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.code,{children:"Path"})," ",(0,s.jsx)(e.a,{href:"https://docs.microsoft.com/en-us/dotnet/api/system.string",title:"string",children:"string"}),"? ",(0,s.jsx)(e.em,{children:"(optional)"}),(0,s.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"tracing-stop-option-path"}),(0,s.jsx)("a",{href:"#tracing-stop-option-path",class:"list-anchor",children:"#"})]}),"\n",(0,s.jsx)(e.p,{children:"Export trace into the file with the given path."}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Returns"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.a,{href:"https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/builtin-types/void",title:"void",children:"void"}),(0,s.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"tracing-stop-return"}),(0,s.jsx)("a",{href:"#tracing-stop-return",class:"list-anchor",children:"#"})]}),"\n"]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h3,{id:"tracing-stop-chunk",children:"StopChunkAsync"}),"\n",(0,s.jsx)("font",{size:"2",style:{position:"relative",top:"-20px"},children:"Added in: v1.15"}),"\n",(0,s.jsx)("x-search",{children:"tracing.StopChunkAsync"}),"\n",(0,s.jsxs)(e.p,{children:["Stop the trace chunk. See ",(0,s.jsx)(e.a,{href:"/dotnet/docs/api/class-tracing#tracing-start-chunk",children:"Tracing.StartChunkAsync()"})," for more details about multiple trace chunks."]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Usage"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-csharp",children:"await Tracing.StopChunkAsync(options);\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Arguments"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"options"})," ",(0,s.jsx)(e.code,{children:"TracingStopChunkOptions?"})," ",(0,s.jsx)(e.em,{children:"(optional)"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.code,{children:"Path"})," ",(0,s.jsx)(e.a,{href:"https://docs.microsoft.com/en-us/dotnet/api/system.string",title:"string",children:"string"}),"? ",(0,s.jsx)(e.em,{children:"(optional)"}),(0,s.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"tracing-stop-chunk-option-path"}),(0,s.jsx)("a",{href:"#tracing-stop-chunk-option-path",class:"list-anchor",children:"#"})]}),"\n",(0,s.jsxs)(e.p,{children:["Export trace collected since the last ",(0,s.jsx)(e.a,{href:"/dotnet/docs/api/class-tracing#tracing-start-chunk",children:"Tracing.StartChunkAsync()"})," call into the file with the given path."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Returns"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.a,{href:"https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/builtin-types/void",title:"void",children:"void"}),(0,s.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"tracing-stop-chunk-return"}),(0,s.jsx)("a",{href:"#tracing-stop-chunk-return",class:"list-anchor",children:"#"})]}),"\n"]})]})}function d(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(h,{...n})}):h(n)}}}]);