"use strict";(self.webpackChunkplaywright_dev=self.webpackChunkplaywright_dev||[]).push([[7749],{2263:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>i,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>r,toc:()=>t});var d=s(4848),a=s(8453);s(4235),s(8328),s(3078);const l={id:"class-download",title:"Download"},o=void 0,r={id:"api/class-download",title:"Download",description:"Download] objects are dispatched by page via the [Page.Download event.",source:"@site/versioned_docs/version-stable/api/class-download.mdx",sourceDirName:"api",slug:"/api/class-download",permalink:"/dotnet/docs/api/class-download",draft:!1,unlisted:!1,tags:[],version:"stable",frontMatter:{id:"class-download",title:"Download"},sidebar:"api",previous:{title:"Dialog",permalink:"/dotnet/docs/api/class-dialog"},next:{title:"ElementHandle",permalink:"/dotnet/docs/api/class-elementhandle"}},i={},t=[{value:"Methods",id:"methods",level:2},{value:"CancelAsync",id:"download-cancel",level:3},{value:"CreateReadStreamAsync",id:"download-create-read-stream",level:3},{value:"DeleteAsync",id:"download-delete",level:3},{value:"FailureAsync",id:"download-failure",level:3},{value:"Page",id:"download-page",level:3},{value:"PathAsync",id:"download-path",level:3},{value:"SaveAsAsync",id:"download-save-as",level:3},{value:"SuggestedFilename",id:"download-suggested-filename",level:3},{value:"Url",id:"download-url",level:3}];function c(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.a,{href:"/dotnet/docs/api/class-download",title:"Download",children:"Download"})," objects are dispatched by page via the ",(0,d.jsx)(n.a,{href:"/dotnet/docs/api/class-page#page-event-download",children:"Page.Download"})," event."]}),"\n",(0,d.jsx)(n.p,{children:"All the downloaded files belonging to the browser context are deleted when the browser context is closed."}),"\n",(0,d.jsx)(n.p,{children:"Download event is emitted once the download starts. Download path becomes available once download completes."}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-csharp",children:'// Start the task of waiting for the download before clicking\nvar waitForDownloadTask = page.WaitForDownloadAsync();\nawait page.GetByText("Download file").ClickAsync();\nvar download = await waitForDownloadTask;\n\n// Wait for the download process to complete and save the downloaded file somewhere\nawait download.SaveAsAsync("/path/to/save/at/" + download.SuggestedFilename);\n'})}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h2,{id:"methods",children:"Methods"}),"\n",(0,d.jsx)(n.h3,{id:"download-cancel",children:"CancelAsync"}),"\n",(0,d.jsx)("font",{size:"2",style:{position:"relative",top:"-20px"},children:"Added in: v1.13"}),"\n",(0,d.jsx)("x-search",{children:"download.CancelAsync"}),"\n",(0,d.jsxs)(n.p,{children:["Cancels a download. Will not fail if the download is already finished or canceled. Upon successful cancellations, ",(0,d.jsx)(n.code,{children:"download.failure()"})," would resolve to ",(0,d.jsx)(n.code,{children:"'canceled'"}),"."]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Usage"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-csharp",children:"await Download.CancelAsync();\n"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Returns"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.a,{href:"https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/builtin-types/void",title:"void",children:"void"}),(0,d.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"download-cancel-return"}),(0,d.jsx)("a",{href:"#download-cancel-return",class:"list-anchor",children:"#"})]}),"\n"]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h3,{id:"download-create-read-stream",children:"CreateReadStreamAsync"}),"\n",(0,d.jsx)("font",{size:"2",style:{position:"relative",top:"-20px"},children:"Added before v1.9"}),"\n",(0,d.jsx)("x-search",{children:"download.CreateReadStreamAsync"}),"\n",(0,d.jsx)(n.p,{children:"Returns a readable stream for a successful download, or throws for a failed/canceled download."}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Usage"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-csharp",children:"await Download.CreateReadStreamAsync();\n"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Returns"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["[Stream]",(0,d.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"download-create-read-stream-return"}),(0,d.jsx)("a",{href:"#download-create-read-stream-return",class:"list-anchor",children:"#"})]}),"\n"]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h3,{id:"download-delete",children:"DeleteAsync"}),"\n",(0,d.jsx)("font",{size:"2",style:{position:"relative",top:"-20px"},children:"Added before v1.9"}),"\n",(0,d.jsx)("x-search",{children:"download.DeleteAsync"}),"\n",(0,d.jsx)(n.p,{children:"Deletes the downloaded file. Will wait for the download to finish if necessary."}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Usage"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-csharp",children:"await Download.DeleteAsync();\n"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Returns"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.a,{href:"https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/builtin-types/void",title:"void",children:"void"}),(0,d.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"download-delete-return"}),(0,d.jsx)("a",{href:"#download-delete-return",class:"list-anchor",children:"#"})]}),"\n"]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h3,{id:"download-failure",children:"FailureAsync"}),"\n",(0,d.jsx)("font",{size:"2",style:{position:"relative",top:"-20px"},children:"Added before v1.9"}),"\n",(0,d.jsx)("x-search",{children:"download.FailureAsync"}),"\n",(0,d.jsx)(n.p,{children:"Returns download error if any. Will wait for the download to finish if necessary."}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Usage"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-csharp",children:"await Download.FailureAsync();\n"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Returns"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.a,{href:"https://docs.microsoft.com/en-us/dotnet/api/system.string",title:"string",children:"string"}),"?",(0,d.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"download-failure-return"}),(0,d.jsx)("a",{href:"#download-failure-return",class:"list-anchor",children:"#"})]}),"\n"]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h3,{id:"download-page",children:"Page"}),"\n",(0,d.jsx)("font",{size:"2",style:{position:"relative",top:"-20px"},children:"Added in: v1.12"}),"\n",(0,d.jsx)("x-search",{children:"download.Page"}),"\n",(0,d.jsx)(n.p,{children:"Get the page that the download belongs to."}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Usage"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-csharp",children:"Download.Page\n"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Returns"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.a,{href:"/dotnet/docs/api/class-page",title:"Page",children:"Page"}),(0,d.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"download-page-return"}),(0,d.jsx)("a",{href:"#download-page-return",class:"list-anchor",children:"#"})]}),"\n"]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h3,{id:"download-path",children:"PathAsync"}),"\n",(0,d.jsx)("font",{size:"2",style:{position:"relative",top:"-20px"},children:"Added before v1.9"}),"\n",(0,d.jsx)("x-search",{children:"download.PathAsync"}),"\n",(0,d.jsx)(n.p,{children:"Returns path to the downloaded file for a successful download, or throws for a failed/canceled download. The method will wait for the download to finish if necessary. The method throws when connected remotely."}),"\n",(0,d.jsxs)(n.p,{children:["Note that the download's file name is a random GUID, use ",(0,d.jsx)(n.a,{href:"/dotnet/docs/api/class-download#download-suggested-filename",children:"Download.SuggestedFilename"})," to get suggested file name."]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Usage"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-csharp",children:"await Download.PathAsync();\n"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Returns"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.a,{href:"https://docs.microsoft.com/en-us/dotnet/api/system.string",title:"string",children:"string"}),(0,d.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"download-path-return"}),(0,d.jsx)("a",{href:"#download-path-return",class:"list-anchor",children:"#"})]}),"\n"]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h3,{id:"download-save-as",children:"SaveAsAsync"}),"\n",(0,d.jsx)("font",{size:"2",style:{position:"relative",top:"-20px"},children:"Added before v1.9"}),"\n",(0,d.jsx)("x-search",{children:"download.SaveAsAsync"}),"\n",(0,d.jsx)(n.p,{children:"Copy the download to a user-specified path. It is safe to call this method while the download is still in progress. Will wait for the download to finish if necessary."}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Usage"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-csharp",children:'await download.SaveAsAsync("/path/to/save/at/" + download.SuggestedFilename);\n'})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Arguments"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"path"})," ",(0,d.jsx)(n.a,{href:"https://docs.microsoft.com/en-us/dotnet/api/system.string",title:"string",children:"string"}),(0,d.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"download-save-as-option-path"}),(0,d.jsx)("a",{href:"#download-save-as-option-path",class:"list-anchor",children:"#"})]}),"\n",(0,d.jsx)(n.p,{children:"Path where the download should be copied."}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Returns"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.a,{href:"https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/builtin-types/void",title:"void",children:"void"}),(0,d.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"download-save-as-return"}),(0,d.jsx)("a",{href:"#download-save-as-return",class:"list-anchor",children:"#"})]}),"\n"]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h3,{id:"download-suggested-filename",children:"SuggestedFilename"}),"\n",(0,d.jsx)("font",{size:"2",style:{position:"relative",top:"-20px"},children:"Added before v1.9"}),"\n",(0,d.jsx)("x-search",{children:"download.SuggestedFilename"}),"\n",(0,d.jsxs)(n.p,{children:["Returns suggested filename for this download. It is typically computed by the browser from the ",(0,d.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Disposition",children:(0,d.jsx)(n.code,{children:"Content-Disposition"})})," response header or the ",(0,d.jsx)(n.code,{children:"download"})," attribute. See the spec on ",(0,d.jsx)(n.a,{href:"https://html.spec.whatwg.org/#downloading-resources",children:"whatwg"}),". Different browsers can use different logic for computing it."]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Usage"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-csharp",children:"Download.SuggestedFilename\n"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Returns"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.a,{href:"https://docs.microsoft.com/en-us/dotnet/api/system.string",title:"string",children:"string"}),(0,d.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"download-suggested-filename-return"}),(0,d.jsx)("a",{href:"#download-suggested-filename-return",class:"list-anchor",children:"#"})]}),"\n"]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h3,{id:"download-url",children:"Url"}),"\n",(0,d.jsx)("font",{size:"2",style:{position:"relative",top:"-20px"},children:"Added before v1.9"}),"\n",(0,d.jsx)("x-search",{children:"download.Url"}),"\n",(0,d.jsx)(n.p,{children:"Returns downloaded url."}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Usage"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-csharp",children:"Download.Url\n"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Returns"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.a,{href:"https://docs.microsoft.com/en-us/dotnet/api/system.string",title:"string",children:"string"}),(0,d.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"download-url-return"}),(0,d.jsx)("a",{href:"#download-url-return",class:"list-anchor",children:"#"})]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(c,{...e})}):c(e)}}}]);