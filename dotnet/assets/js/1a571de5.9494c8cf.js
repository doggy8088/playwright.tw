"use strict";(self.webpackChunkplaywright_dev=self.webpackChunkplaywright_dev||[]).push([[1724],{6706:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>t,metadata:()=>i,toc:()=>d});var s=n(4848),a=n(8453);n(4235),n(8328),n(3078);const t={id:"class-worker",title:"Worker"},l=void 0,i={id:"api/class-worker",title:"Worker",description:"The Worker class represents a WebWorker. worker event is emitted on the page object to signal a worker creation. close event is emitted on the worker object when the worker is gone.",source:"@site/versioned_docs/version-stable/api/class-worker.mdx",sourceDirName:"api",slug:"/api/class-worker",permalink:"/dotnet/docs/api/class-worker",draft:!1,unlisted:!1,tags:[],version:"stable",frontMatter:{id:"class-worker",title:"Worker"},sidebar:"api",previous:{title:"WebSocketFrame",permalink:"/dotnet/docs/api/class-websocketframe"},next:{title:"APIResponseAssertions",permalink:"/dotnet/docs/api/class-apiresponseassertions"}},o={},d=[{value:"Methods",id:"methods",level:2},{value:"EvaluateAsync",id:"worker-evaluate",level:3},{value:"EvaluateHandleAsync",id:"worker-evaluate-handle",level:3},{value:"Url",id:"worker-url",level:3},{value:"Events",id:"events",level:2},{value:"event Close",id:"worker-event-close",level:3}];function c(e){const r={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(r.p,{children:["The Worker class represents a ",(0,s.jsx)(r.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API",children:"WebWorker"}),". ",(0,s.jsx)(r.code,{children:"worker"})," event is emitted on the page object to signal a worker creation. ",(0,s.jsx)(r.code,{children:"close"})," event is emitted on the worker object when the worker is gone."]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-csharp",children:'page.Worker += (_, worker) =>\n{\n    Console.WriteLine($"Worker created: {worker.Url}");\n    worker.Close += (_, _) => Console.WriteLine($"Worker closed {worker.Url}");\n};\n\nConsole.WriteLine("Current Workers:");\nforeach(var pageWorker in page.Workers)\n{\n    Console.WriteLine($"\\tWorker: {pageWorker.Url}");\n}\n'})}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsx)(r.h2,{id:"methods",children:"Methods"}),"\n",(0,s.jsx)(r.h3,{id:"worker-evaluate",children:"EvaluateAsync"}),"\n",(0,s.jsx)("font",{size:"2",style:{position:"relative",top:"-20px"},children:"Added before v1.9"}),"\n",(0,s.jsx)("x-search",{children:"worker.EvaluateAsync"}),"\n",(0,s.jsxs)(r.p,{children:["Returns the return value of ",(0,s.jsx)(r.code,{children:"expression"}),"."]}),"\n",(0,s.jsxs)(r.p,{children:["If the function passed to the ",(0,s.jsx)(r.a,{href:"/dotnet/docs/api/class-worker#worker-evaluate",children:"Worker.EvaluateAsync()"})," returns a ",(0,s.jsx)(r.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise",title:"Promise",children:"Promise"}),", then ",(0,s.jsx)(r.a,{href:"/dotnet/docs/api/class-worker#worker-evaluate",children:"Worker.EvaluateAsync()"})," would wait for the promise to resolve and return its value."]}),"\n",(0,s.jsxs)(r.p,{children:["If the function passed to the ",(0,s.jsx)(r.a,{href:"/dotnet/docs/api/class-worker#worker-evaluate",children:"Worker.EvaluateAsync()"})," returns a non-",(0,s.jsx)(r.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Description",title:"Serializable",children:"Serializable"})," value, then ",(0,s.jsx)(r.a,{href:"/dotnet/docs/api/class-worker#worker-evaluate",children:"Worker.EvaluateAsync()"})," returns ",(0,s.jsx)(r.code,{children:"undefined"}),". Playwright also supports transferring some additional values that are not serializable by ",(0,s.jsx)(r.code,{children:"JSON"}),": ",(0,s.jsx)(r.code,{children:"-0"}),", ",(0,s.jsx)(r.code,{children:"NaN"}),", ",(0,s.jsx)(r.code,{children:"Infinity"}),", ",(0,s.jsx)(r.code,{children:"-Infinity"}),"."]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Usage"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-csharp",children:"await Worker.EvaluateAsync(expression, arg);\n"})}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Arguments"})}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.code,{children:"expression"})," ",(0,s.jsx)(r.a,{href:"https://docs.microsoft.com/en-us/dotnet/api/system.string",title:"string",children:"string"}),(0,s.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"worker-evaluate-option-expression"}),(0,s.jsx)("a",{href:"#worker-evaluate-option-expression",class:"list-anchor",children:"#"})]}),"\n",(0,s.jsx)(r.p,{children:"JavaScript expression to be evaluated in the browser context. If the expression evaluates to a function, the function is automatically invoked."}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.code,{children:"arg"})," ",(0,s.jsx)(r.a,{href:"/dotnet/docs/evaluating#evaluation-argument",title:"EvaluationArgument",children:"EvaluationArgument"}),"? ",(0,s.jsx)(r.em,{children:"(optional)"}),(0,s.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"worker-evaluate-option-arg"}),(0,s.jsx)("a",{href:"#worker-evaluate-option-arg",class:"list-anchor",children:"#"})]}),"\n",(0,s.jsxs)(r.p,{children:["Optional argument to pass to ",(0,s.jsx)(r.code,{children:"expression"}),"."]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Returns"})}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["[object]",(0,s.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"worker-evaluate-return"}),(0,s.jsx)("a",{href:"#worker-evaluate-return",class:"list-anchor",children:"#"})]}),"\n"]}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsx)(r.h3,{id:"worker-evaluate-handle",children:"EvaluateHandleAsync"}),"\n",(0,s.jsx)("font",{size:"2",style:{position:"relative",top:"-20px"},children:"Added before v1.9"}),"\n",(0,s.jsx)("x-search",{children:"worker.EvaluateHandleAsync"}),"\n",(0,s.jsxs)(r.p,{children:["Returns the return value of ",(0,s.jsx)(r.code,{children:"expression"})," as a ",(0,s.jsx)(r.a,{href:"/dotnet/docs/api/class-jshandle",title:"JSHandle",children:"JSHandle"}),"."]}),"\n",(0,s.jsxs)(r.p,{children:["The only difference between ",(0,s.jsx)(r.a,{href:"/dotnet/docs/api/class-worker#worker-evaluate",children:"Worker.EvaluateAsync()"})," and ",(0,s.jsx)(r.a,{href:"/dotnet/docs/api/class-worker#worker-evaluate-handle",children:"Worker.EvaluateHandleAsync()"})," is that ",(0,s.jsx)(r.a,{href:"/dotnet/docs/api/class-worker#worker-evaluate-handle",children:"Worker.EvaluateHandleAsync()"})," returns ",(0,s.jsx)(r.a,{href:"/dotnet/docs/api/class-jshandle",title:"JSHandle",children:"JSHandle"}),"."]}),"\n",(0,s.jsxs)(r.p,{children:["If the function passed to the ",(0,s.jsx)(r.a,{href:"/dotnet/docs/api/class-worker#worker-evaluate-handle",children:"Worker.EvaluateHandleAsync()"})," returns a ",(0,s.jsx)(r.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise",title:"Promise",children:"Promise"}),", then ",(0,s.jsx)(r.a,{href:"/dotnet/docs/api/class-worker#worker-evaluate-handle",children:"Worker.EvaluateHandleAsync()"})," would wait for the promise to resolve and return its value."]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Usage"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-csharp",children:"await Worker.EvaluateHandleAsync(expression, arg);\n"})}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Arguments"})}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.code,{children:"expression"})," ",(0,s.jsx)(r.a,{href:"https://docs.microsoft.com/en-us/dotnet/api/system.string",title:"string",children:"string"}),(0,s.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"worker-evaluate-handle-option-expression"}),(0,s.jsx)("a",{href:"#worker-evaluate-handle-option-expression",class:"list-anchor",children:"#"})]}),"\n",(0,s.jsx)(r.p,{children:"JavaScript expression to be evaluated in the browser context. If the expression evaluates to a function, the function is automatically invoked."}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.code,{children:"arg"})," ",(0,s.jsx)(r.a,{href:"/dotnet/docs/evaluating#evaluation-argument",title:"EvaluationArgument",children:"EvaluationArgument"}),"? ",(0,s.jsx)(r.em,{children:"(optional)"}),(0,s.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"worker-evaluate-handle-option-arg"}),(0,s.jsx)("a",{href:"#worker-evaluate-handle-option-arg",class:"list-anchor",children:"#"})]}),"\n",(0,s.jsxs)(r.p,{children:["Optional argument to pass to ",(0,s.jsx)(r.code,{children:"expression"}),"."]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Returns"})}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.a,{href:"/dotnet/docs/api/class-jshandle",title:"JSHandle",children:"JSHandle"}),(0,s.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"worker-evaluate-handle-return"}),(0,s.jsx)("a",{href:"#worker-evaluate-handle-return",class:"list-anchor",children:"#"})]}),"\n"]}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsx)(r.h3,{id:"worker-url",children:"Url"}),"\n",(0,s.jsx)("font",{size:"2",style:{position:"relative",top:"-20px"},children:"Added before v1.9"}),"\n",(0,s.jsx)("x-search",{children:"worker.Url"}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Usage"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-csharp",children:"Worker.Url\n"})}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Returns"})}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.a,{href:"https://docs.microsoft.com/en-us/dotnet/api/system.string",title:"string",children:"string"}),(0,s.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"worker-url-return"}),(0,s.jsx)("a",{href:"#worker-url-return",class:"list-anchor",children:"#"})]}),"\n"]}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsx)(r.h2,{id:"events",children:"Events"}),"\n",(0,s.jsx)(r.h3,{id:"worker-event-close",children:"event Close"}),"\n",(0,s.jsx)("font",{size:"2",style:{position:"relative",top:"-20px"},children:"Added before v1.9"}),"\n",(0,s.jsx)("x-search",{children:"worker.event Close"}),"\n",(0,s.jsxs)(r.p,{children:["Emitted when this dedicated ",(0,s.jsx)(r.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API",children:"WebWorker"})," is terminated."]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Usage"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-csharp",children:"Worker.Close += async (_, worker) => {};\n"})}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Event data"})}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"/dotnet/docs/api/class-worker",title:"Worker",children:"Worker"})}),"\n"]})]})}function h(e={}){const{wrapper:r}={...(0,a.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}}}]);