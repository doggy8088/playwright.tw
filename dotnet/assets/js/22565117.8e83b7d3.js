"use strict";(self.webpackChunkplaywright_dev=self.webpackChunkplaywright_dev||[]).push([[8160],{692:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>o,default:()=>p,frontMatter:()=>c,metadata:()=>l,toc:()=>h});var r=n(4848),s=n(8453),a=n(4235),i=n(8328);n(3078);const c={id:"trace-viewer-intro",title:"Trace viewer"},o=void 0,l={id:"trace-viewer-intro",title:"Trace viewer",description:"Introduction",source:"@site/docs/trace-viewer-intro.mdx",sourceDirName:".",slug:"/trace-viewer-intro",permalink:"/dotnet/docs/next/trace-viewer-intro",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{id:"trace-viewer-intro",title:"Trace viewer"},sidebar:"docs",previous:{title:"Running and debugging tests",permalink:"/dotnet/docs/next/running-tests"},next:{title:"Setting up CI",permalink:"/dotnet/docs/next/ci-intro"}},d={},h=[{value:"Introduction",id:"introduction",level:2},{value:"Recording a trace",id:"recording-a-trace",level:2},{value:"Opening the trace",id:"opening-the-trace",level:2},{value:"What&#39;s next",id:"whats-next",level:2}];function u(e){const t={a:"a",code:"code",h2:"h2",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h2,{id:"introduction",children:"Introduction"}),"\n",(0,r.jsx)(t.p,{children:"Playwright Trace Viewer is a GUI tool that lets you explore recorded Playwright traces of your tests meaning you can go back and forward though each action of your test and visually see what was happening during each action."}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"You will learn"})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"How to record a trace"}),"\n",(0,r.jsx)(t.li,{children:"How to open the trace viewer"}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"recording-a-trace",children:"Recording a trace"}),"\n",(0,r.jsxs)(t.p,{children:["Traces can be recorded using the ",(0,r.jsx)(t.a,{href:"/dotnet/docs/next/api/class-browsercontext#browser-context-tracing",children:"BrowserContext.Tracing"})," API as follows:"]}),"\n",(0,r.jsxs)(a.A,{groupId:"test-runners",defaultValue:"mstest",values:[{label:"MSTest",value:"mstest"},{label:"NUnit",value:"nunit"}],children:[(0,r.jsx)(i.A,{value:"nunit",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-csharp",children:'namespace PlaywrightTests;\n\n[Parallelizable(ParallelScope.Self)]\n[TestFixture]\npublic class Tests : PageTest\n{\n    [SetUp]\n    public async Task Setup()\n    {\n        await Context.Tracing.StartAsync(new()\n        {\n            Title = $"{TestContext.CurrentContext.Test.ClassName}.{TestContext.CurrentContext.Test.Name}",\n            Screenshots = true,\n            Snapshots = true,\n            Sources = true\n        });\n    }\n\n    [TearDown]\n    public async Task TearDown()\n    {\n        await Context.Tracing.StopAsync(new()\n        {\n            Path = Path.Combine(\n                TestContext.CurrentContext.WorkDirectory,\n                "playwright-traces",\n                $"{TestContext.CurrentContext.Test.ClassName}.{TestContext.CurrentContext.Test.Name}.zip"\n            )\n        });\n    }\n\n    [Test]\n    public async Task GetStartedLink()\n    {\n        // ..\n    }\n}\n'})})}),(0,r.jsx)(i.A,{value:"mstest",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-csharp",children:'using System.Text.RegularExpressions;\nusing Microsoft.Playwright;\nusing Microsoft.Playwright.MSTest;\n\nnamespace PlaywrightTests;\n\n[TestClass]\npublic class ExampleTest : PageTest\n{\n    [TestInitialize]\n    public async Task TestInitialize()\n    {\n         await Context.Tracing.StartAsync(new()\n        {\n            Title = $"{TestContext.FullyQualifiedTestClassName}.{TestContext.TestName}",\n            Screenshots = true,\n            Snapshots = true,\n            Sources = true\n        });\n    }\n\n    [TestCleanup]\n    public async Task TestCleanup()\n    {\n        await Context.Tracing.StopAsync(new()\n        {\n            Path = Path.Combine(\n                Environment.CurrentDirectory,\n                "playwright-traces",\n                $"{TestContext.FullyQualifiedTestClassName}.{TestContext.TestName}.zip"\n            )\n        });\n    }\n\n    [TestMethod]\n    public async Task GetStartedLink()\n    {\n        // ...\n    }\n}\n'})})})]}),"\n",(0,r.jsxs)(t.p,{children:["This will record a zip file for each test, e.g. ",(0,r.jsx)(t.code,{children:"PlaywrightTests.ExampleTest.GetStartedLink.zip"})," and place it into the ",(0,r.jsx)(t.code,{children:"bin/Debug/net8.0/playwright-traces/"})," directory."]}),"\n",(0,r.jsx)(t.h2,{id:"opening-the-trace",children:"Opening the trace"}),"\n",(0,r.jsxs)(t.p,{children:["You can open the saved trace using the Playwright CLI or in your browser on ",(0,r.jsx)(t.a,{href:"https://trace.playwright.dev",children:(0,r.jsx)(t.code,{children:"trace.playwright.dev"})}),". Make sure to add the full path to where your trace's zip file is located. Once opened you can click on each action or use the timeline to see the state of the page before and after each action. You can also inspect the log, source and network during each step of the test. The trace viewer creates a DOM snapshot so you can fully interact with it, open devtools etc."]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"pwsh bin/Debug/net8.0/playwright.ps1 show-trace bin/Debug/net8.0/playwright-traces/PlaywrightTests.ExampleTest.GetStartedLink.zip\n"})}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{src:"https://github.com/microsoft/playwright/assets/13063165/4372d661-5bfa-4e1f-be65-0d2fe165a75c",alt:"playwright trace viewer dotnet"})}),"\n",(0,r.jsxs)(t.p,{children:["Check out our detailed guide on ",(0,r.jsx)(t.a,{href:"/dotnet/docs/next/trace-viewer",children:"Trace Viewer"})," to learn more about the trace viewer and how to setup your tests to record a trace only when the test fails."]}),"\n",(0,r.jsx)(t.h2,{id:"whats-next",children:"What's next"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"/dotnet/docs/next/ci-intro",children:"Run tests on CI with GitHub Actions"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"/dotnet/docs/next/test-runners",children:"Learn more about the MSTest and NUnit base classes"})}),"\n"]})]})}function p(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(u,{...e})}):u(e)}}}]);