"use strict";(self.webpackChunkplaywright_dev=self.webpackChunkplaywright_dev||[]).push([[8602],{508:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>c,contentTitle:()=>r,default:()=>p,frontMatter:()=>i,metadata:()=>l,toc:()=>o});var n=s(4848),a=s(8453);s(4235),s(8328),s(3078);const i={id:"junit",title:"JUnit (\u5be6\u9a57\u6027)"},r=void 0,l={id:"junit",title:"JUnit (\u5be6\u9a57\u6027)",description:"\u7c21\u4ecb",source:"@site/versioned_docs/version-stable/junit.mdx",sourceDirName:".",slug:"/junit",permalink:"/java/docs/junit",draft:!1,unlisted:!1,tags:[],version:"stable",frontMatter:{id:"junit",title:"JUnit (\u5be6\u9a57\u6027)"},sidebar:"docs",previous:{title:"\u6e2c\u8a66\u57f7\u884c\u5668",permalink:"/java/docs/test-runners"},next:{title:"\u767c\u884c\u8aaa\u660e",permalink:"/java/docs/release-notes"}},c={},o=[{value:"\u7c21\u4ecb",id:"\u7c21\u4ecb",level:2},{value:"Fixtures",id:"fixtures",level:2},{value:"\u81ea\u8a02\u9078\u9805",id:"\u81ea\u8a02\u9078\u9805",level:2},{value:"\u57f7\u884c\u6e2c\u8a66\u5728\u5e73\u884c\u8655\u7406",id:"\u57f7\u884c\u6e2c\u8a66\u5728\u5e73\u884c\u8655\u7406",level:2}];function h(e){const t={a:"a",code:"code",h2:"h2",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,a.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.h2,{id:"\u7c21\u4ecb",children:"\u7c21\u4ecb"}),"\n",(0,n.jsx)(t.p,{children:"\u53ea\u9700\u5e7e\u884c\u7a0b\u5f0f\u78bc\uff0c\u4f60\u5c31\u53ef\u4ee5\u5c07 Playwright \u9023\u63a5\u5230\u4f60\u6700\u559c\u611b\u7684 Java \u6e2c\u8a66\u57f7\u884c\u5668\u3002"}),"\n",(0,n.jsxs)(t.p,{children:["\u5728 ",(0,n.jsx)(t.a,{href:"https://junit.org/junit5/",children:"JUnit"})," \u4e2d\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 Playwright ",(0,n.jsx)(t.a,{href:"/java/docs/junit#fixtures",children:"fixtures"})," \u81ea\u52d5\u521d\u59cb\u5316 ",(0,n.jsx)(t.a,{href:"/java/docs/api/class-playwright",title:"Playwright",children:"Playwright"}),"\u3001",(0,n.jsx)(t.a,{href:"/java/docs/api/class-browser",title:"Browser",children:"Browser"}),"\u3001",(0,n.jsx)(t.a,{href:"/java/docs/api/class-browsercontext",title:"BrowserContext",children:"BrowserContext"})," \u6216 ",(0,n.jsx)(t.a,{href:"/java/docs/api/class-page",title:"Page",children:"Page"}),"\u3002\u5728\u4e0b\u9762\u7684\u7bc4\u4f8b\u4e2d\uff0c\u6240\u6709\u4e09\u500b\u6e2c\u8a66\u65b9\u6cd5\u4f7f\u7528\u76f8\u540c\u7684 ",(0,n.jsx)(t.a,{href:"/java/docs/api/class-browser",title:"Browser",children:"Browser"}),"\u3002\u6bcf\u500b\u6e2c\u8a66\u4f7f\u7528\u81ea\u5df1\u7684 ",(0,n.jsx)(t.a,{href:"/java/docs/api/class-browsercontext",title:"BrowserContext",children:"BrowserContext"})," \u548c ",(0,n.jsx)(t.a,{href:"/java/docs/api/class-page",title:"Page",children:"Page"}),"\u3002"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-java",children:'package org.example;\n\nimport com.microsoft.playwright.Page;\nimport com.microsoft.playwright.junit.UsePlaywright;\nimport org.junit.jupiter.api.Test;\n\nimport static com.microsoft.playwright.assertions.PlaywrightAssertions.assertThat;\nimport static org.junit.jupiter.api.Assertions.assertEquals;\n\n@UsePlaywright\npublic class TestExample {\n  @Test\n  void shouldClickButton(Page page) {\n    page.navigate("data:text/html,<script>var result;<\/script><button onclick=\'result=\\"Clicked\\"\'>Go</button>");\n    page.locator("button").click();\n    assertEquals("Clicked", page.evaluate("result"));\n  }\n\n  @Test\n  void shouldCheckTheBox(Page page) {\n    page.setContent("<input id=\'checkbox\' type=\'checkbox\'></input>");\n    page.locator("input").check();\n    assertEquals(true, page.evaluate("window[\'checkbox\'].checked"));\n  }\n\n  @Test\n  void shouldSearchWiki(Page page) {\n    page.navigate("https://www.wikipedia.org/");\n    page.locator("input[name=\\"search\\"]").click();\n    page.locator("input[name=\\"search\\"]").fill("playwright");\n    page.locator("input[name=\\"search\\"]").press("Enter");\n    assertThat(page).hasURL("https://en.wikipedia.org/wiki/Playwright");\n  }\n}\n'})}),"\n",(0,n.jsx)(t.h2,{id:"fixtures",children:"Fixtures"}),"\n",(0,n.jsxs)(t.p,{children:["\u53ea\u9700\u5c07 JUnit \u8a3b\u91cb ",(0,n.jsx)(t.code,{children:"@UsePlaywright"})," \u6dfb\u52a0\u5230\u60a8\u7684\u6e2c\u8a66\u985e\u5225\uff0c\u5373\u53ef\u555f\u7528 Playwright fixtures\u3002\u6e2c\u8a66 fixtures \u7528\u65bc\u70ba\u6bcf\u500b\u6e2c\u8a66\u5efa\u7acb\u74b0\u5883\uff0c\u63d0\u4f9b\u6e2c\u8a66\u6240\u9700\u7684\u4e00\u5207\uff0c\u800c\u4e0d\u6703\u6709\u5176\u4ed6\u6771\u897f\u3002"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-java",children:'@UsePlaywright\npublic class TestExample {\n\n  @Test\n  void basicTest(Page page) {\n    page.navigate("https://playwright.dev/");\n\n    assertThat(page).hasTitle(Pattern.compile("Playwright"));\n  }\n}\n'})}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.code,{children:"Page page"})," \u53c3\u6578\u544a\u8a34 JUnit \u8a2d\u5b9a ",(0,n.jsx)(t.code,{children:"page"})," \u56fa\u5b9a\u88dd\u7f6e\u4e26\u5c07\u5176\u63d0\u4f9b\u7d66\u60a8\u7684\u6e2c\u8a66\u65b9\u6cd5\u3002"]}),"\n",(0,n.jsx)(t.p,{children:"\u4ee5\u4e0b\u662f\u9810\u5148\u5b9a\u7fa9\u7684\u56fa\u5b9a\u88dd\u7f6e\u6e05\u55ae:"}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Fixture"}),(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Type"}),(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"page"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.a,{href:"/java/docs/api/class-page",title:"Page",children:"Page"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"\u6b64\u6e2c\u8a66\u57f7\u884c\u7684\u7368\u7acb\u9801\u9762\u3002"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"browserContext"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.a,{href:"/java/docs/api/class-browsercontext",title:"BrowserContext",children:"BrowserContext"})}),(0,n.jsxs)(t.td,{style:{textAlign:"left"},children:["\u6b64\u6e2c\u8a66\u57f7\u884c\u7684\u7368\u7acb\u4e0a\u4e0b\u6587\u3002",(0,n.jsx)(t.code,{children:"page"})," \u7269\u4ef6\u4e5f\u5c6c\u65bc\u6b64\u4e0a\u4e0b\u6587\u3002"]})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"browser"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.a,{href:"/java/docs/api/class-browser",title:"Browser",children:"Browser"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"\u700f\u89bd\u5668\u5728\u6e2c\u8a66\u9593\u5171\u4eab\u4ee5\u512a\u5316\u8cc7\u6e90\u3002"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"playwright"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.a,{href:"/java/docs/api/class-playwright",title:"Playwright",children:"Playwright"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Playwright \u5be6\u4f8b\u5728\u540c\u4e00\u57f7\u884c\u7dd2\u4e0a\u7684\u6e2c\u8a66\u9593\u5171\u4eab\u3002"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"request"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.a,{href:"/java/docs/api/class-apirequestcontext",title:"APIRequestContext",children:"APIRequestContext"})}),(0,n.jsxs)(t.td,{style:{textAlign:"left"},children:["\u6b64\u6e2c\u8a66\u57f7\u884c\u7684\u7368\u7acb APIRequestContext\u3002\u4e86\u89e3\u5982\u4f55\u9032\u884c ",(0,n.jsx)(t.a,{href:"./api-testing",children:"API \u6e2c\u8a66"}),"\u3002"]})]})]})]}),"\n",(0,n.jsx)(t.h2,{id:"\u81ea\u8a02\u9078\u9805",children:"\u81ea\u8a02\u9078\u9805"}),"\n",(0,n.jsxs)(t.p,{children:["\u8981\u81ea\u8a02\u56fa\u5b9a\u88dd\u7f6e\u9078\u9805\uff0c\u60a8\u61c9\u8a72\u5be6\u4f5c\u4e00\u500b ",(0,n.jsx)(t.code,{children:"OptionsFactory"})," \u4e26\u5728 ",(0,n.jsx)(t.code,{children:"@UsePlaywright()"})," \u8a3b\u91cb\u4e2d\u6307\u5b9a\u8a72\u985e\u5225\u3002"]}),"\n",(0,n.jsxs)(t.p,{children:["\u60a8\u53ef\u4ee5\u8f15\u9b06\u5730\u8986\u5beb ",(0,n.jsx)(t.a,{href:"/java/docs/api/class-browsertype#browser-type-launch",children:"BrowserType.launch()"})," \u7684\u555f\u52d5\u9078\u9805\uff0c\u6216 ",(0,n.jsx)(t.a,{href:"/java/docs/api/class-browser#browser-new-context",children:"Browser.newContext()"})," \u548c ",(0,n.jsx)(t.a,{href:"/java/docs/api/class-apirequest#api-request-new-context",children:"APIRequest.newContext()"})," \u7684\u4e0a\u4e0b\u6587\u9078\u9805\u3002\u8acb\u53c3\u95b1\u4ee5\u4e0b\u7bc4\u4f8b\u3002"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-java",children:'import com.microsoft.playwright.junit.Options;\nimport com.microsoft.playwright.junit.OptionsFactory;\nimport com.microsoft.playwright.junit.UsePlaywright;\n\n@UsePlaywright(MyTest.CustomOptions.class)\npublic class MyTest {\n\n  public static class CustomOptions implements OptionsFactory {\n    @Override\n    public Options getOptions() {\n      return new Options()\n          .setHeadless(false)\n          .setContextOption(new Browser.NewContextOptions()\n              .setBaseURL("https://github.com"))\n          .setApiRequestOptions(new APIRequest.NewContextOptions()\n              .setBaseURL("https://playwright.dev"));\n    }\n  }\n\n  @Test\n  public void testWithCustomOptions(Page page, APIRequestContext request) {\n    page.navigate("/");\n    assertThat(page).hasURL(Pattern.compile("github"));\n\n    APIResponse response = request.get("/");\n    assertTrue(response.text().contains("Playwright"));\n  }\n}\n'})}),"\n",(0,n.jsx)(t.h2,{id:"\u57f7\u884c\u6e2c\u8a66\u5728\u5e73\u884c\u8655\u7406",children:"\u57f7\u884c\u6e2c\u8a66\u5728\u5e73\u884c\u8655\u7406"}),"\n",(0,n.jsxs)(t.p,{children:["\u9810\u8a2d\u60c5\u6cc1\u4e0b\uff0cJUnit \u5c07\u5728\u55ae\u500b\u57f7\u884c\u7dd2\u4e0a\u9806\u5e8f\u57f7\u884c\u6240\u6709\u6e2c\u8a66\u3002\u81ea JUnit 5.3 \u8d77\uff0c\u60a8\u53ef\u4ee5\u66f4\u6539\u6b64\u884c\u70ba\u4ee5\u5e73\u884c\u57f7\u884c\u6e2c\u8a66\u4ee5\u52a0\u5feb\u57f7\u884c\u901f\u5ea6\uff08\u8acb\u53c3\u95b1",(0,n.jsx)(t.a,{href:"https://junit.org/junit5/docs/snapshot/user-guide/index.html#writing-tests-parallel-execution",children:"\u6b64\u9801\u9762"}),"\uff09\u3002\u7531\u65bc\u5728\u6c92\u6709\u984d\u5916\u540c\u6b65\u7684\u60c5\u6cc1\u4e0b\uff0c\u5f9e\u591a\u500b\u57f7\u884c\u7dd2\u4f7f\u7528\u76f8\u540c\u7684 Playwright \u7269\u4ef6\u662f\u4e0d\u5b89\u5168\u7684\uff0c\u6211\u5011\u5efa\u8b70\u60a8\u70ba\u6bcf\u500b\u57f7\u884c\u7dd2\u5efa\u7acb Playwright \u5be6\u4f8b\uff0c\u4e26\u5728\u8a72\u57f7\u884c\u7dd2\u4e0a\u5c08\u9580\u4f7f\u7528\u5b83\u3002\u4ee5\u4e0b\u662f\u4e00\u500b\u5982\u4f55\u5e73\u884c\u57f7\u884c\u591a\u500b\u6e2c\u8a66\u985e\u5225\u7684\u7bc4\u4f8b\u3002"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-java",children:'@UsePlaywright\nclass Test1 {\n  @Test\n  void shouldClickButton(Page page) {\n    page.navigate("data:text/html,<script>var result;<\/script><button onclick=\'result=\\"Clicked\\"\'>Go</button>");\n    page.locator("button").click();\n    assertEquals("Clicked", page.evaluate("result"));\n  }\n\n  @Test\n  void shouldCheckTheBox(Page page) {\n    page.setContent("<input id=\'checkbox\' type=\'checkbox\'></input>");\n    page.locator("input").check();\n    assertEquals(true, page.evaluate("window[\'checkbox\'].checked"));\n  }\n\n  @Test\n  void shouldSearchWiki(Page page) {\n    page.navigate("https://www.wikipedia.org/");\n    page.locator("input[name=\\"search\\"]").click();\n    page.locator("input[name=\\"search\\"]").fill("playwright");\n    page.locator("input[name=\\"search\\"]").press("Enter");\n    assertThat(page).hasURL("https://en.wikipedia.org/wiki/Playwright");\n  }\n}\n\n@UsePlaywright\nclass Test2 {\n  @Test\n  void shouldReturnInnerHTML(Page page) {\n    page.setContent("<div>hello</div>");\n    assertEquals("hello", page.innerHTML("css=div"));\n  }\n\n  @Test\n  void shouldClickButton(Page page) {\n    Page popup = page.waitForPopup(() -> {\n      page.evaluate("window.open(\'about:blank\');");\n    });\n    assertEquals("about:blank", popup.url());\n  }\n}\n'})}),"\n",(0,n.jsx)(t.p,{children:"\u914d\u7f6e JUnit \u4ee5\u5728\u6bcf\u500b\u985e\u5225\u4e2d\u4f9d\u5e8f\u57f7\u884c\u6e2c\u8a66\uff0c\u4e26\u5728\u5e73\u884c\u57f7\u884c\u7dd2\u4e0a\u57f7\u884c\u591a\u500b\u985e\u5225\uff08\u57f7\u884c\u7dd2\u7684\u6700\u5927\u6578\u91cf\u7b49\u65bc CPU \u6838\u5fc3\u6578\u7684\u4e00\u534a\uff09:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:"junit.jupiter.execution.parallel.enabled = true\njunit.jupiter.execution.parallel.mode.default = same_thread\njunit.jupiter.execution.parallel.mode.classes.default = concurrent\njunit.jupiter.execution.parallel.config.strategy=dynamic\njunit.jupiter.execution.parallel.config.dynamic.factor=0.5\n"})})]})}function p(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(h,{...e})}):h(e)}}}]);