"use strict";(self.webpackChunkplaywright_dev=self.webpackChunkplaywright_dev||[]).push([[3568],{1740:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>p,contentTitle:()=>o,default:()=>g,frontMatter:()=>l,metadata:()=>c,toc:()=>h});var a=t(4848),r=t(8453),s=t(4235),i=t(8328);t(3078);const l={id:"test-runners",title:"\u6e2c\u8a66\u57f7\u884c\u5668"},o=void 0,c={id:"test-runners",title:"\u6e2c\u8a66\u57f7\u884c\u5668",description:"\u7c21\u4ecb",source:"@site/versioned_docs/version-stable/test-runners.mdx",sourceDirName:".",slug:"/test-runners",permalink:"/java/docs/test-runners",draft:!1,unlisted:!1,tags:[],version:"stable",frontMatter:{id:"test-runners",title:"\u6e2c\u8a66\u57f7\u884c\u5668"},sidebar:"docs",previous:{title:"\u8a2d\u5b9a CI",permalink:"/java/docs/ci-intro"},next:{title:"JUnit (\u5be6\u9a57\u6027)",permalink:"/java/docs/junit"}},p={},h=[{value:"\u7c21\u4ecb",id:"\u7c21\u4ecb",level:2},{value:"JUnit",id:"junit",level:2},{value:"\u57f7\u884c\u6e2c\u8a66\u5728\u5e73\u884c\u8655\u7406",id:"\u57f7\u884c\u6e2c\u8a66\u5728\u5e73\u884c\u8655\u7406",level:3},{value:"\u4f7f\u7528 Gradle",id:"\u4f7f\u7528-gradle",level:3},{value:"TestNG",id:"testng",level:2}];function d(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h2,{id:"\u7c21\u4ecb",children:"\u7c21\u4ecb"}),"\n",(0,a.jsx)(n.p,{children:"\u53ea\u9700\u5e7e\u884c\u7a0b\u5f0f\u78bc\uff0c\u4f60\u5c31\u53ef\u4ee5\u5c07 Playwright \u9023\u63a5\u5230\u4f60\u6700\u559c\u611b\u7684 Java \u6e2c\u8a66\u57f7\u884c\u5668\u3002"}),"\n",(0,a.jsx)(n.p,{children:"Playwright \u548c Browser \u5be6\u4f8b\u53ef\u4ee5\u5728\u6e2c\u8a66\u4e4b\u9593\u91cd\u8907\u4f7f\u7528\uff0c\u4ee5\u63d0\u9ad8\u6548\u80fd\u3002\u6211\u5011\u5efa\u8b70\u5728\u65b0\u7684 BrowserContext \u4e2d\u57f7\u884c\u6bcf\u500b\u6e2c\u8a66\u6848\u4f8b\uff0c\u9019\u6a23\u700f\u89bd\u5668\u72c0\u614b\u5c07\u5728\u6e2c\u8a66\u4e4b\u9593\u9694\u96e2\u3002"}),"\n",(0,a.jsx)(n.h2,{id:"junit",children:"JUnit"}),"\n",(0,a.jsxs)(n.p,{children:["\u5728 ",(0,a.jsx)(n.a,{href:"https://junit.org/junit5/",children:"JUnit"})," \u4e2d\uff0c\u4f60\u53ef\u4ee5\u5728 ",(0,a.jsx)(n.a,{href:"https://junit.org/junit5/docs/current/api/org.junit.jupiter.api/org/junit/jupiter/api/BeforeAll.html",children:"@BeforeAll"})," \u65b9\u6cd5\u4e2d\u521d\u59cb\u5316 ",(0,a.jsx)(n.a,{href:"/java/docs/api/class-playwright",title:"Playwright",children:"Playwright"})," \u548c ",(0,a.jsx)(n.a,{href:"/java/docs/api/class-browser",title:"Browser",children:"Browser"}),"\uff0c\u4e26\u5728 ",(0,a.jsx)(n.a,{href:"https://junit.org/junit5/docs/current/api/org.junit.jupiter.api/org/junit/jupiter/api/AfterAll.html",children:"@AfterAll"})," \u65b9\u6cd5\u4e2d\u92b7\u6bc0\u5b83\u5011\u3002\u5728\u4e0b\u9762\u7684\u7bc4\u4f8b\u4e2d\uff0c\u6240\u6709\u4e09\u500b\u6e2c\u8a66\u65b9\u6cd5\u90fd\u4f7f\u7528\u76f8\u540c\u7684 ",(0,a.jsx)(n.a,{href:"/java/docs/api/class-browser",title:"Browser",children:"Browser"}),"\u3002\u6bcf\u500b\u6e2c\u8a66\u4f7f\u7528\u81ea\u5df1\u7684 ",(0,a.jsx)(n.a,{href:"/java/docs/api/class-browsercontext",title:"BrowserContext",children:"BrowserContext"})," \u548c ",(0,a.jsx)(n.a,{href:"/java/docs/api/class-page",title:"Page",children:"Page"}),"\u3002"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'package org.example;\n\nimport com.microsoft.playwright.Browser;\nimport com.microsoft.playwright.BrowserContext;\nimport com.microsoft.playwright.Page;\nimport com.microsoft.playwright.Playwright;\nimport org.junit.jupiter.api.*;\n\nimport static org.junit.jupiter.api.Assertions.assertEquals;\nimport static org.junit.jupiter.api.Assertions.assertTrue;\n\npublic class TestExample {\n  // Shared between all tests in this class.\n  static Playwright playwright;\n  static Browser browser;\n\n  // New instance for each test method.\n  BrowserContext context;\n  Page page;\n\n  @BeforeAll\n  static void launchBrowser() {\n    playwright = Playwright.create();\n    browser = playwright.chromium().launch();\n  }\n\n  @AfterAll\n  static void closeBrowser() {\n    playwright.close();\n  }\n\n  @BeforeEach\n  void createContextAndPage() {\n    context = browser.newContext();\n    page = context.newPage();\n  }\n\n  @AfterEach\n  void closeContext() {\n    context.close();\n  }\n\n  @Test\n  void shouldClickButton() {\n    page.navigate("data:text/html,<script>var result;<\/script><button onclick=\'result=\\"Clicked\\"\'>Go</button>");\n    page.locator("button").click();\n    assertEquals("Clicked", page.evaluate("result"));\n  }\n\n  @Test\n  void shouldCheckTheBox() {\n    page.setContent("<input id=\'checkbox\' type=\'checkbox\'></input>");\n    page.locator("input").check();\n    assertTrue((Boolean) page.evaluate("() => window[\'checkbox\'].checked"));\n  }\n\n  @Test\n  void shouldSearchWiki() {\n    page.navigate("https://www.wikipedia.org/");\n    page.locator("input[name=\\"search\\"]").click();\n    page.locator("input[name=\\"search\\"]").fill("playwright");\n    page.locator("input[name=\\"search\\"]").press("Enter");\n    assertEquals("https://en.wikipedia.org/wiki/Playwright", page.url());\n  }\n}\n'})}),"\n",(0,a.jsxs)(n.p,{children:["\u8acb\u53c3\u95b1\u5be6\u9a57\u6027 ",(0,a.jsx)(n.a,{href:"/java/docs/junit",children:"JUnit integration"})," \u4ee5\u81ea\u52d5\u521d\u59cb\u5316 Playwright \u7269\u4ef6\u53ca\u66f4\u591a\u3002"]}),"\n",(0,a.jsx)(n.h3,{id:"\u57f7\u884c\u6e2c\u8a66\u5728\u5e73\u884c\u8655\u7406",children:"\u57f7\u884c\u6e2c\u8a66\u5728\u5e73\u884c\u8655\u7406"}),"\n",(0,a.jsxs)(n.p,{children:["\u9810\u8a2d\u60c5\u6cc1\u4e0b\uff0cJUnit \u5c07\u5728\u55ae\u500b\u57f7\u884c\u7dd2\u4e0a\u9806\u5e8f\u57f7\u884c\u6240\u6709\u6e2c\u8a66\u3002\u81ea JUnit 5.3 \u8d77\uff0c\u60a8\u53ef\u4ee5\u66f4\u6539\u6b64\u884c\u70ba\u4ee5\u5e73\u884c\u57f7\u884c\u6e2c\u8a66\u4ee5\u52a0\u5feb\u57f7\u884c\u901f\u5ea6\uff08\u8acb\u53c3\u95b1",(0,a.jsx)(n.a,{href:"https://junit.org/junit5/docs/snapshot/user-guide/index.html#writing-tests-parallel-execution",children:"\u6b64\u9801\u9762"}),"\uff09\u3002\u7531\u65bc\u5728\u6c92\u6709\u984d\u5916\u540c\u6b65\u7684\u60c5\u6cc1\u4e0b\uff0c\u5f9e\u591a\u500b\u57f7\u884c\u7dd2\u4f7f\u7528\u76f8\u540c\u7684 Playwright \u7269\u4ef6\u662f\u4e0d\u5b89\u5168\u7684\uff0c\u6211\u5011\u5efa\u8b70\u60a8\u70ba\u6bcf\u500b\u57f7\u884c\u7dd2\u5efa\u7acb Playwright \u5be6\u4f8b\uff0c\u4e26\u5728\u8a72\u57f7\u884c\u7dd2\u4e0a\u5c08\u9580\u4f7f\u7528\u5b83\u3002\u4ee5\u4e0b\u662f\u4e00\u500b\u5982\u4f55\u5e73\u884c\u57f7\u884c\u591a\u500b\u6e2c\u8a66\u985e\u5225\u7684\u7bc4\u4f8b\u3002"]}),"\n",(0,a.jsxs)(n.p,{children:["\u4f7f\u7528 ",(0,a.jsx)(n.a,{href:"https://junit.org/junit5/docs/current/api/org.junit.jupiter.api/org/junit/jupiter/api/TestInstance.html",children:(0,a.jsx)(n.code,{children:"@TestInstance(TestInstance.Lifecycle.PER_CLASS)"})})," \u8a3b\u91cb\u4f86\u8b93 JUnit \u70ba\u8a72\u985e\u5225\u4e2d\u7684\u6240\u6709\u6e2c\u8a66\u65b9\u6cd5\u5efa\u7acb\u4e00\u500b\u985e\u5225\u7684\u5be6\u4f8b\uff08\u9810\u8a2d\u60c5\u6cc1\u4e0b\uff0c\u6bcf\u500b JUnit \u6703\u70ba\u6bcf\u500b\u6e2c\u8a66\u65b9\u6cd5\u5efa\u7acb\u4e00\u500b\u65b0\u7684\u985e\u5225\u5be6\u4f8b\uff09\u3002\u5c07 ",(0,a.jsx)(n.a,{href:"/java/docs/api/class-playwright",title:"Playwright",children:"Playwright"})," \u548c ",(0,a.jsx)(n.a,{href:"/java/docs/api/class-browser",title:"Browser",children:"Browser"})," \u7269\u4ef6\u5132\u5b58\u5728\u5be6\u4f8b\u6b04\u4f4d\u4e2d\u3002\u5b83\u5011\u5c07\u5728\u6e2c\u8a66\u4e4b\u9593\u5171\u4eab\u3002\u6bcf\u500b\u985e\u5225\u7684\u5be6\u4f8b\u5c07\u4f7f\u7528\u5176\u81ea\u5df1\u7684 Playwright \u8907\u88fd\u54c1\u3002"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'// Subclasses will inherit PER_CLASS behavior.\n@TestInstance(TestInstance.Lifecycle.PER_CLASS)\nclass TestFixtures {\n  // Shared between all tests in the class.\n  Playwright playwright;\n  Browser browser;\n\n  @BeforeAll\n  void launchBrowser() {\n    playwright = Playwright.create();\n    browser = playwright.chromium().launch();\n  }\n\n  @AfterAll\n  void closeBrowser() {\n    playwright.close();\n  }\n\n  // New instance for each test method.\n  BrowserContext context;\n  Page page;\n\n  @BeforeEach\n  void createContextAndPage() {\n    context = browser.newContext();\n    page = context.newPage();\n  }\n\n  @AfterEach\n  void closeContext() {\n    context.close();\n  }\n}\n\nclass Test1 extends TestFixtures {\n  @Test\n  void shouldClickButton() {\n    page.navigate("data:text/html,<script>var result;<\/script><button onclick=\'result=\\"Clicked\\"\'>Go</button>");\n    page.locator("button").click();\n    assertEquals("Clicked", page.evaluate("result"));\n  }\n\n  @Test\n  void shouldCheckTheBox() {\n    page.setContent("<input id=\'checkbox\' type=\'checkbox\'></input>");\n    page.locator("input").check();\n    assertTrue((Boolean) page.evaluate("() => window[\'checkbox\'].checked"));\n  }\n\n  @Test\n  void shouldSearchWiki() {\n    page.navigate("https://www.wikipedia.org/");\n    page.locator("input[name=\\"search\\"]").click();\n    page.locator("input[name=\\"search\\"]").fill("playwright");\n    page.locator("input[name=\\"search\\"]").press("Enter");\n    assertEquals("https://en.wikipedia.org/wiki/Playwright", page.url());\n  }\n}\n\nclass Test2 extends TestFixtures {\n  @Test\n  void shouldReturnInnerHTML() {\n    page.setContent("<div>hello</div>");\n    assertEquals("hello", page.innerHTML("css=div"));\n  }\n\n  @Test\n  void shouldClickButton() {\n    Page popup = page.waitForPopup(() -> {\n      page.evaluate("window.open(\'about:blank\');");\n    });\n    assertEquals("about:blank", popup.url());\n  }\n}\n'})}),"\n",(0,a.jsx)(n.p,{children:"\u914d\u7f6e JUnit \u4ee5\u5728\u6bcf\u500b\u985e\u5225\u4e2d\u4f9d\u5e8f\u57f7\u884c\u6e2c\u8a66\uff0c\u4e26\u5728\u5e73\u884c\u57f7\u884c\u7dd2\u4e0a\u57f7\u884c\u591a\u500b\u985e\u5225\uff08\u57f7\u884c\u7dd2\u7684\u6700\u5927\u6578\u91cf\u7b49\u65bc CPU \u6838\u5fc3\u6578\u7684\u4e00\u534a\uff09:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"junit.jupiter.execution.parallel.enabled = true\njunit.jupiter.execution.parallel.mode.default = same_thread\njunit.jupiter.execution.parallel.mode.classes.default = concurrent\njunit.jupiter.execution.parallel.config.strategy=dynamic\njunit.jupiter.execution.parallel.config.dynamic.factor=0.5\n"})}),"\n",(0,a.jsx)(n.h3,{id:"\u4f7f\u7528-gradle",children:"\u4f7f\u7528 Gradle"}),"\n",(0,a.jsx)(n.p,{children:"\u4f60\u53ef\u4ee5\u4f7f\u7528\u7528 Groovy \u6216 Kotlin \u7de8\u5beb\u7684 Gradle \u5efa\u69cb\u914d\u7f6e\u8173\u672c\u3002"}),"\n",(0,a.jsxs)(s.A,{defaultValue:"gradle",values:[{label:"build.gradle",value:"gradle"},{label:"build.gradle.kts",value:"gradle-kotlin"}],children:[(0,a.jsx)(i.A,{value:"gradle",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:"plugins {\n  application\n  id 'java'\n}\n\nrepositories {\n  mavenCentral()\n}\n\ndependencies {\n  implementation 'com.microsoft.playwright:playwright:1.46.0'\n}\n\napplication {\n  mainClass = 'org.example.App'\n}\n\n// Usage: ./gradlew playwright --args=\"help\"\ntask playwright(type: JavaExec) {\n  classpath sourceSets.test.runtimeClasspath\n  mainClass = 'com.microsoft.playwright.CLI'\n}\n\ntest {\n  useJUnitPlatform()\n}\n"})})}),(0,a.jsx)(i.A,{value:"gradle-kotlin",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'plugins {\n  application\n  id("java")\n}\n\nrepositories {\n  mavenCentral()\n}\n\ndependencies {\n  implementation("com.microsoft.playwright:playwright:1.46.0")\n}\n\napplication {\n  mainClass.set("org.example.App")\n}\n\n// Usage: ./gradlew playwright --args="help"\ntasks.register<JavaExec>("playwright") {\n  classpath(sourceSets["test"].runtimeClasspath)\n  mainClass.set("com.microsoft.playwright.CLI")\n}\n\ntasks.test {\n  useJUnitPlatform()\n  testLogging {\n    events("passed", "skipped", "failed")\n  }\n}\n'})})})]}),"\n",(0,a.jsx)(n.p,{children:"\u6e2c\u8a66\u53ef\u4ee5\u5982\u4e0b\u555f\u52d5:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"./gradlew run\n"})}),"\n",(0,a.jsx)(n.p,{children:"\u6b64\u5916\uff0cPlaywright \u547d\u4ee4\u5217\u5de5\u5177\u53ef\u4ee5\u57f7\u884c\u5982\u4e0b:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'./gradlew playwright --args="help"\n'})}),"\n",(0,a.jsx)(n.h2,{id:"testng",children:"TestNG"}),"\n",(0,a.jsxs)(n.p,{children:["\u5728 ",(0,a.jsx)(n.a,{href:"https://testng.org/",children:"TestNG"})," \u4e2d\uff0c\u4f60\u53ef\u4ee5\u5728 ",(0,a.jsx)(n.a,{href:"https://javadoc.io/doc/org.testng/testng/latest/org/testng/annotations/BeforeClass.html",children:"@BeforeClass"})," \u65b9\u6cd5\u4e2d\u521d\u59cb\u5316 ",(0,a.jsx)(n.a,{href:"/java/docs/api/class-playwright",title:"Playwright",children:"Playwright"})," \u548c ",(0,a.jsx)(n.a,{href:"/java/docs/api/class-browser",title:"Browser",children:"Browser"}),"\uff0c\u4e26\u5728 ",(0,a.jsx)(n.a,{href:"https://javadoc.io/doc/org.testng/testng/latest/org/testng/annotations/AfterClass.html",children:"@AfterClass"})," \u65b9\u6cd5\u4e2d\u92b7\u6bc0\u5b83\u5011\u3002\u5728\u4e0b\u9762\u7684\u7bc4\u4f8b\u4e2d\uff0c\u6240\u6709\u4e09\u500b\u6e2c\u8a66\u65b9\u6cd5\u90fd\u4f7f\u7528\u76f8\u540c\u7684 ",(0,a.jsx)(n.a,{href:"/java/docs/api/class-browser",title:"Browser",children:"Browser"}),"\u3002\u6bcf\u500b\u6e2c\u8a66\u4f7f\u7528\u5176\u81ea\u5df1\u7684 ",(0,a.jsx)(n.a,{href:"/java/docs/api/class-browsercontext",title:"BrowserContext",children:"BrowserContext"})," \u548c ",(0,a.jsx)(n.a,{href:"/java/docs/api/class-page",title:"Page",children:"Page"}),"\u3002"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'package org.example;\n\nimport com.microsoft.playwright.Browser;\nimport com.microsoft.playwright.BrowserContext;\nimport com.microsoft.playwright.Page;\nimport com.microsoft.playwright.Playwright;\nimport org.testng.annotations.*;\n\nimport static org.testng.Assert.assertEquals;\nimport static org.testng.Assert.assertTrue;\n\npublic class TestExample {\n  // Shared between all tests in this class.\n  Playwright playwright;\n  Browser browser;\n\n  // New instance for each test method.\n  BrowserContext context;\n  Page page;\n\n  @BeforeClass\n  void launchBrowser() {\n    playwright = Playwright.create();\n    browser = playwright.chromium().launch();\n  }\n\n  @AfterClass\n  void closeBrowser() {\n    playwright.close();\n  }\n\n  @BeforeMethod\n  void createContextAndPage() {\n    context = browser.newContext();\n    page = context.newPage();\n  }\n\n  @AfterMethod\n  void closeContext() {\n    context.close();\n  }\n\n  @Test\n  void shouldClickButton() {\n    page.navigate("data:text/html,<script>var result;<\/script><button onclick=\'result=\\"Clicked\\"\'>Go</button>");\n    page.locator("button").click();\n    assertEquals("Clicked", page.evaluate("result"));\n  }\n\n  @Test\n  void shouldCheckTheBox() {\n    page.setContent("<input id=\'checkbox\' type=\'checkbox\'></input>");\n    page.locator("input").check();\n    assertTrue((Boolean) page.evaluate("() => window[\'checkbox\'].checked"));\n  }\n\n  @Test\n  void shouldSearchWiki() {\n    page.navigate("https://www.wikipedia.org/");\n    page.locator("input[name=\\"search\\"]").click();\n    page.locator("input[name=\\"search\\"]").fill("playwright");\n    page.locator("input[name=\\"search\\"]").press("Enter");\n    assertEquals("https://en.wikipedia.org/wiki/Playwright", page.url());\n  }\n}\n'})})]})}function g(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}}}]);