"use strict";(self.webpackChunkplaywright_dev=self.webpackChunkplaywright_dev||[]).push([[1724],{6706:(e,r,s)=>{s.r(r),s.d(r,{assets:()=>t,contentTitle:()=>i,default:()=>h,frontMatter:()=>l,metadata:()=>o,toc:()=>d});var n=s(4848),a=s(8453);s(4235),s(8328),s(3078);const l={id:"class-worker",title:"Worker"},i=void 0,o={id:"api/class-worker",title:"Worker",description:"The Worker class represents a WebWorker. worker event is emitted on the page object to signal a worker creation. close event is emitted on the worker object when the worker is gone.",source:"@site/versioned_docs/version-stable/api/class-worker.mdx",sourceDirName:"api",slug:"/api/class-worker",permalink:"/java/docs/api/class-worker",draft:!1,unlisted:!1,tags:[],version:"stable",frontMatter:{id:"class-worker",title:"Worker"},sidebar:"api",previous:{title:"WebSocketFrame",permalink:"/java/docs/api/class-websocketframe"},next:{title:"APIResponseAssertions",permalink:"/java/docs/api/class-apiresponseassertions"}},t={},d=[{value:"Methods",id:"methods",level:2},{value:"evaluate",id:"worker-evaluate",level:3},{value:"evaluateHandle",id:"worker-evaluate-handle",level:3},{value:"url",id:"worker-url",level:3},{value:"waitForClose",id:"worker-wait-for-close",level:3},{value:"Events",id:"events",level:2},{value:"onClose(handler)",id:"worker-event-close",level:3}];function c(e){const r={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(r.p,{children:["The Worker class represents a ",(0,n.jsx)(r.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API",children:"WebWorker"}),". ",(0,n.jsx)(r.code,{children:"worker"})," event is emitted on the page object to signal a worker creation. ",(0,n.jsx)(r.code,{children:"close"})," event is emitted on the worker object when the worker is gone."]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-java",children:'page.onWorker(worker -> {\n  System.out.println("Worker created: " + worker.url());\n  worker.onClose(worker1 -> System.out.println("Worker destroyed: " + worker1.url()));\n});\nSystem.out.println("Current workers:");\nfor (Worker worker : page.workers())\n  System.out.println("  " + worker.url());\n'})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h2,{id:"methods",children:"Methods"}),"\n",(0,n.jsx)(r.h3,{id:"worker-evaluate",children:"evaluate"}),"\n",(0,n.jsx)("font",{size:"2",style:{position:"relative",top:"-20px"},children:"Added before v1.9"}),"\n",(0,n.jsx)("x-search",{children:"worker.evaluate"}),"\n",(0,n.jsxs)(r.p,{children:["Returns the return value of ",(0,n.jsx)(r.code,{children:"expression"}),"."]}),"\n",(0,n.jsxs)(r.p,{children:["If the function passed to the ",(0,n.jsx)(r.a,{href:"/java/docs/api/class-worker#worker-evaluate",children:"Worker.evaluate()"})," returns a ",(0,n.jsx)(r.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise",title:"Promise",children:"Promise"}),", then ",(0,n.jsx)(r.a,{href:"/java/docs/api/class-worker#worker-evaluate",children:"Worker.evaluate()"})," would wait for the promise to resolve and return its value."]}),"\n",(0,n.jsxs)(r.p,{children:["If the function passed to the ",(0,n.jsx)(r.a,{href:"/java/docs/api/class-worker#worker-evaluate",children:"Worker.evaluate()"})," returns a non-",(0,n.jsx)(r.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Description",title:"Serializable",children:"Serializable"})," value, then ",(0,n.jsx)(r.a,{href:"/java/docs/api/class-worker#worker-evaluate",children:"Worker.evaluate()"})," returns ",(0,n.jsx)(r.code,{children:"undefined"}),". Playwright also supports transferring some additional values that are not serializable by ",(0,n.jsx)(r.code,{children:"JSON"}),": ",(0,n.jsx)(r.code,{children:"-0"}),", ",(0,n.jsx)(r.code,{children:"NaN"}),", ",(0,n.jsx)(r.code,{children:"Infinity"}),", ",(0,n.jsx)(r.code,{children:"-Infinity"}),"."]}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.strong,{children:"Usage"})}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-java",children:"Worker.evaluate(expression);\nWorker.evaluate(expression, arg);\n"})}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.strong,{children:"Arguments"})}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.code,{children:"expression"})," ",(0,n.jsx)(r.a,{href:"https://docs.oracle.com/javase/8/docs/api/java/lang/String.html",title:"String",children:"String"}),(0,n.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"worker-evaluate-option-expression"}),(0,n.jsx)("a",{href:"#worker-evaluate-option-expression",class:"list-anchor",children:"#"})]}),"\n",(0,n.jsx)(r.p,{children:"JavaScript expression to be evaluated in the browser context. If the expression evaluates to a function, the function is automatically invoked."}),"\n"]}),"\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.code,{children:"arg"})," ",(0,n.jsx)(r.a,{href:"/java/docs/evaluating#evaluation-argument",title:"EvaluationArgument",children:"EvaluationArgument"})," ",(0,n.jsx)(r.em,{children:"(optional)"}),(0,n.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"worker-evaluate-option-arg"}),(0,n.jsx)("a",{href:"#worker-evaluate-option-arg",class:"list-anchor",children:"#"})]}),"\n",(0,n.jsxs)(r.p,{children:["Optional argument to pass to ",(0,n.jsx)(r.code,{children:"expression"}),"."]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.strong,{children:"Returns"})}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.a,{href:"https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html",title:"Object",children:"Object"}),(0,n.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"worker-evaluate-return"}),(0,n.jsx)("a",{href:"#worker-evaluate-return",class:"list-anchor",children:"#"})]}),"\n"]}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"worker-evaluate-handle",children:"evaluateHandle"}),"\n",(0,n.jsx)("font",{size:"2",style:{position:"relative",top:"-20px"},children:"Added before v1.9"}),"\n",(0,n.jsx)("x-search",{children:"worker.evaluateHandle"}),"\n",(0,n.jsxs)(r.p,{children:["Returns the return value of ",(0,n.jsx)(r.code,{children:"expression"})," as a ",(0,n.jsx)(r.a,{href:"/java/docs/api/class-jshandle",title:"JSHandle",children:"JSHandle"}),"."]}),"\n",(0,n.jsxs)(r.p,{children:["The only difference between ",(0,n.jsx)(r.a,{href:"/java/docs/api/class-worker#worker-evaluate",children:"Worker.evaluate()"})," and ",(0,n.jsx)(r.a,{href:"/java/docs/api/class-worker#worker-evaluate-handle",children:"Worker.evaluateHandle()"})," is that ",(0,n.jsx)(r.a,{href:"/java/docs/api/class-worker#worker-evaluate-handle",children:"Worker.evaluateHandle()"})," returns ",(0,n.jsx)(r.a,{href:"/java/docs/api/class-jshandle",title:"JSHandle",children:"JSHandle"}),"."]}),"\n",(0,n.jsxs)(r.p,{children:["If the function passed to the ",(0,n.jsx)(r.a,{href:"/java/docs/api/class-worker#worker-evaluate-handle",children:"Worker.evaluateHandle()"})," returns a ",(0,n.jsx)(r.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise",title:"Promise",children:"Promise"}),", then ",(0,n.jsx)(r.a,{href:"/java/docs/api/class-worker#worker-evaluate-handle",children:"Worker.evaluateHandle()"})," would wait for the promise to resolve and return its value."]}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.strong,{children:"Usage"})}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-java",children:"Worker.evaluateHandle(expression);\nWorker.evaluateHandle(expression, arg);\n"})}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.strong,{children:"Arguments"})}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.code,{children:"expression"})," ",(0,n.jsx)(r.a,{href:"https://docs.oracle.com/javase/8/docs/api/java/lang/String.html",title:"String",children:"String"}),(0,n.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"worker-evaluate-handle-option-expression"}),(0,n.jsx)("a",{href:"#worker-evaluate-handle-option-expression",class:"list-anchor",children:"#"})]}),"\n",(0,n.jsx)(r.p,{children:"JavaScript expression to be evaluated in the browser context. If the expression evaluates to a function, the function is automatically invoked."}),"\n"]}),"\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.code,{children:"arg"})," ",(0,n.jsx)(r.a,{href:"/java/docs/evaluating#evaluation-argument",title:"EvaluationArgument",children:"EvaluationArgument"})," ",(0,n.jsx)(r.em,{children:"(optional)"}),(0,n.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"worker-evaluate-handle-option-arg"}),(0,n.jsx)("a",{href:"#worker-evaluate-handle-option-arg",class:"list-anchor",children:"#"})]}),"\n",(0,n.jsxs)(r.p,{children:["Optional argument to pass to ",(0,n.jsx)(r.code,{children:"expression"}),"."]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.strong,{children:"Returns"})}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.a,{href:"/java/docs/api/class-jshandle",title:"JSHandle",children:"JSHandle"}),(0,n.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"worker-evaluate-handle-return"}),(0,n.jsx)("a",{href:"#worker-evaluate-handle-return",class:"list-anchor",children:"#"})]}),"\n"]}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"worker-url",children:"url"}),"\n",(0,n.jsx)("font",{size:"2",style:{position:"relative",top:"-20px"},children:"Added before v1.9"}),"\n",(0,n.jsx)("x-search",{children:"worker.url"}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.strong,{children:"Usage"})}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-java",children:"Worker.url();\n"})}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.strong,{children:"Returns"})}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.a,{href:"https://docs.oracle.com/javase/8/docs/api/java/lang/String.html",title:"String",children:"String"}),(0,n.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"worker-url-return"}),(0,n.jsx)("a",{href:"#worker-url-return",class:"list-anchor",children:"#"})]}),"\n"]}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"worker-wait-for-close",children:"waitForClose"}),"\n",(0,n.jsx)("font",{size:"2",style:{position:"relative",top:"-20px"},children:"Added in: v1.10"}),"\n",(0,n.jsx)("x-search",{children:"worker.waitForClose"}),"\n",(0,n.jsx)(r.p,{children:"Performs action and waits for the Worker to close."}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.strong,{children:"Usage"})}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-java",children:"Worker.waitForClose(callback);\nWorker.waitForClose(callback, options);\n"})}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.strong,{children:"Arguments"})}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.code,{children:"options"})," ",(0,n.jsx)(r.code,{children:"Worker.WaitForCloseOptions"})," ",(0,n.jsx)(r.em,{children:"(optional)"})]}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.code,{children:"setTimeout"})," ",(0,n.jsx)(r.a,{href:"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html",title:"double",children:"double"})," ",(0,n.jsx)(r.em,{children:"(optional)"})," ",(0,n.jsx)("font",{size:"2",children:"Added in: v1.9"}),(0,n.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"worker-wait-for-close-option-timeout"}),(0,n.jsx)("a",{href:"#worker-wait-for-close-option-timeout",class:"list-anchor",children:"#"})]}),"\n",(0,n.jsxs)(r.p,{children:["Maximum time to wait for in milliseconds. Defaults to ",(0,n.jsx)(r.code,{children:"30000"})," (30 seconds). Pass ",(0,n.jsx)(r.code,{children:"0"})," to disable timeout. The default value can be changed by using the ",(0,n.jsx)(r.a,{href:"/java/docs/api/class-browsercontext#browser-context-set-default-timeout",children:"BrowserContext.setDefaultTimeout()"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.code,{children:"callback"})," ",(0,n.jsx)(r.a,{href:"https://docs.oracle.com/javase/8/docs/api/java/lang/Runnable.html",title:"Runnable",children:"Runnable"})," ",(0,n.jsx)("font",{size:"2",children:"Added in: v1.9"}),(0,n.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"worker-wait-for-close-option-callback"}),(0,n.jsx)("a",{href:"#worker-wait-for-close-option-callback",class:"list-anchor",children:"#"})]}),"\n",(0,n.jsx)(r.p,{children:"Callback that performs the action triggering the event."}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.strong,{children:"Returns"})}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.a,{href:"/java/docs/api/class-worker",title:"Worker",children:"Worker"}),(0,n.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"worker-wait-for-close-return"}),(0,n.jsx)("a",{href:"#worker-wait-for-close-return",class:"list-anchor",children:"#"})]}),"\n"]}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h2,{id:"events",children:"Events"}),"\n",(0,n.jsx)(r.h3,{id:"worker-event-close",children:"onClose(handler)"}),"\n",(0,n.jsx)("font",{size:"2",style:{position:"relative",top:"-20px"},children:"Added before v1.9"}),"\n",(0,n.jsx)("x-search",{children:"worker.onClose(handler)"}),"\n",(0,n.jsxs)(r.p,{children:["Emitted when this dedicated ",(0,n.jsx)(r.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API",children:"WebWorker"})," is terminated."]}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.strong,{children:"Usage"})}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-java",children:"Worker.onClose(handler)\n"})}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.strong,{children:"Event data"})}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsx)(r.li,{children:(0,n.jsx)(r.a,{href:"/java/docs/api/class-worker",title:"Worker",children:"Worker"})}),"\n"]})]})}function h(e={}){const{wrapper:r}={...(0,a.R)(),...e.components};return r?(0,n.jsx)(r,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}}}]);