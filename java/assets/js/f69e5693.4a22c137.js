"use strict";(self.webpackChunkplaywright_dev=self.webpackChunkplaywright_dev||[]).push([[3092],{623:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>i,contentTitle:()=>t,default:()=>o,frontMatter:()=>r,metadata:()=>d,toc:()=>h});var a=s(4848),l=s(8453);s(4235),s(8328),s(3078);const r={id:"class-jshandle",title:"JSHandle"},t=void 0,d={id:"api/class-jshandle",title:"JSHandle",description:"JSHandle represents an in-page JavaScript object. JSHandles can be created with the Page.evaluateHandle() method.",source:"@site/versioned_docs/version-stable/api/class-jshandle.mdx",sourceDirName:"api",slug:"/api/class-jshandle",permalink:"/java/docs/api/class-jshandle",draft:!1,unlisted:!1,tags:[],version:"stable",frontMatter:{id:"class-jshandle",title:"JSHandle"},sidebar:"api",previous:{title:"FrameLocator",permalink:"/java/docs/api/class-framelocator"},next:{title:"Keyboard",permalink:"/java/docs/api/class-keyboard"}},i={},h=[{value:"Methods",id:"methods",level:2},{value:"asElement",id:"js-handle-as-element",level:3},{value:"dispose",id:"js-handle-dispose",level:3},{value:"evaluate",id:"js-handle-evaluate",level:3},{value:"evaluateHandle",id:"js-handle-evaluate-handle",level:3},{value:"getProperties",id:"js-handle-get-properties",level:3},{value:"getProperty",id:"js-handle-get-property",level:3},{value:"jsonValue",id:"js-handle-json-value",level:3}];function c(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(n.p,{children:["JSHandle represents an in-page JavaScript object. JSHandles can be created with the ",(0,a.jsx)(n.a,{href:"/java/docs/api/class-page#page-evaluate-handle",children:"Page.evaluateHandle()"})," method."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'JSHandle windowHandle = page.evaluateHandle("() => window");\n// ...\n'})}),"\n",(0,a.jsxs)(n.p,{children:["JSHandle prevents the referenced JavaScript object being garbage collected unless the handle is exposed with ",(0,a.jsx)(n.a,{href:"/java/docs/api/class-jshandle#js-handle-dispose",children:"JSHandle.dispose()"}),". JSHandles are auto-disposed when their origin frame gets navigated or the parent context gets destroyed."]}),"\n",(0,a.jsxs)(n.p,{children:["JSHandle instances can be used as an argument in ",(0,a.jsx)(n.a,{href:"/java/docs/api/class-page#page-eval-on-selector",children:"Page.evalOnSelector()"}),", ",(0,a.jsx)(n.a,{href:"/java/docs/api/class-page#page-evaluate",children:"Page.evaluate()"})," and ",(0,a.jsx)(n.a,{href:"/java/docs/api/class-page#page-evaluate-handle",children:"Page.evaluateHandle()"})," methods."]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"methods",children:"Methods"}),"\n",(0,a.jsx)(n.h3,{id:"js-handle-as-element",children:"asElement"}),"\n",(0,a.jsx)("font",{size:"2",style:{position:"relative",top:"-20px"},children:"Added before v1.9"}),"\n",(0,a.jsx)("x-search",{children:"jsHandle.asElement"}),"\n",(0,a.jsxs)(n.p,{children:["Returns either ",(0,a.jsx)(n.code,{children:"null"})," or the object handle itself, if the object handle is an instance of ",(0,a.jsx)(n.a,{href:"/java/docs/api/class-elementhandle",title:"ElementHandle",children:"ElementHandle"}),"."]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Usage"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:"JSHandle.asElement();\n"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Returns"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"https://docs.oracle.com/javase/specs/jls/se8/html/jls-3.html#jls-3.10.7",title:"null",children:"null"})," | ",(0,a.jsx)(n.a,{href:"/java/docs/api/class-elementhandle",title:"ElementHandle",children:"ElementHandle"}),(0,a.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"js-handle-as-element-return"}),(0,a.jsx)("a",{href:"#js-handle-as-element-return",class:"list-anchor",children:"#"})]}),"\n"]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h3,{id:"js-handle-dispose",children:"dispose"}),"\n",(0,a.jsx)("font",{size:"2",style:{position:"relative",top:"-20px"},children:"Added before v1.9"}),"\n",(0,a.jsx)("x-search",{children:"jsHandle.dispose"}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.code,{children:"jsHandle.dispose"})," method stops referencing the element handle."]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Usage"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:"JSHandle.dispose();\n"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Returns"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"https://docs.oracle.com/javase/tutorial/java/javaOO/methods.html",title:"void",children:"void"}),(0,a.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"js-handle-dispose-return"}),(0,a.jsx)("a",{href:"#js-handle-dispose-return",class:"list-anchor",children:"#"})]}),"\n"]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h3,{id:"js-handle-evaluate",children:"evaluate"}),"\n",(0,a.jsx)("font",{size:"2",style:{position:"relative",top:"-20px"},children:"Added before v1.9"}),"\n",(0,a.jsx)("x-search",{children:"jsHandle.evaluate"}),"\n",(0,a.jsxs)(n.p,{children:["Returns the return value of ",(0,a.jsx)(n.code,{children:"expression"}),"."]}),"\n",(0,a.jsxs)(n.p,{children:["This method passes this handle as the first argument to ",(0,a.jsx)(n.code,{children:"expression"}),"."]}),"\n",(0,a.jsxs)(n.p,{children:["If ",(0,a.jsx)(n.code,{children:"expression"})," returns a ",(0,a.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise",title:"Promise",children:"Promise"}),", then ",(0,a.jsx)(n.code,{children:"handle.evaluate"})," would wait for the promise to resolve and return its value."]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Usage"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'ElementHandle tweetHandle = page.querySelector(".tweet .retweets");\nassertEquals("10 retweets", tweetHandle.evaluate("node => node.innerText"));\n'})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Arguments"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.code,{children:"expression"})," ",(0,a.jsx)(n.a,{href:"https://docs.oracle.com/javase/8/docs/api/java/lang/String.html",title:"String",children:"String"}),(0,a.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"js-handle-evaluate-option-expression"}),(0,a.jsx)("a",{href:"#js-handle-evaluate-option-expression",class:"list-anchor",children:"#"})]}),"\n",(0,a.jsx)(n.p,{children:"JavaScript expression to be evaluated in the browser context. If the expression evaluates to a function, the function is automatically invoked."}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.code,{children:"arg"})," ",(0,a.jsx)(n.a,{href:"/java/docs/evaluating#evaluation-argument",title:"EvaluationArgument",children:"EvaluationArgument"})," ",(0,a.jsx)(n.em,{children:"(optional)"}),(0,a.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"js-handle-evaluate-option-arg"}),(0,a.jsx)("a",{href:"#js-handle-evaluate-option-arg",class:"list-anchor",children:"#"})]}),"\n",(0,a.jsxs)(n.p,{children:["Optional argument to pass to ",(0,a.jsx)(n.code,{children:"expression"}),"."]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Returns"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html",title:"Object",children:"Object"}),(0,a.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"js-handle-evaluate-return"}),(0,a.jsx)("a",{href:"#js-handle-evaluate-return",class:"list-anchor",children:"#"})]}),"\n"]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h3,{id:"js-handle-evaluate-handle",children:"evaluateHandle"}),"\n",(0,a.jsx)("font",{size:"2",style:{position:"relative",top:"-20px"},children:"Added before v1.9"}),"\n",(0,a.jsx)("x-search",{children:"jsHandle.evaluateHandle"}),"\n",(0,a.jsxs)(n.p,{children:["Returns the return value of ",(0,a.jsx)(n.code,{children:"expression"})," as a ",(0,a.jsx)(n.a,{href:"/java/docs/api/class-jshandle",title:"JSHandle",children:"JSHandle"}),"."]}),"\n",(0,a.jsxs)(n.p,{children:["This method passes this handle as the first argument to ",(0,a.jsx)(n.code,{children:"expression"}),"."]}),"\n",(0,a.jsxs)(n.p,{children:["The only difference between ",(0,a.jsx)(n.code,{children:"jsHandle.evaluate"})," and ",(0,a.jsx)(n.code,{children:"jsHandle.evaluateHandle"})," is that ",(0,a.jsx)(n.code,{children:"jsHandle.evaluateHandle"})," returns ",(0,a.jsx)(n.a,{href:"/java/docs/api/class-jshandle",title:"JSHandle",children:"JSHandle"}),"."]}),"\n",(0,a.jsxs)(n.p,{children:["If the function passed to the ",(0,a.jsx)(n.code,{children:"jsHandle.evaluateHandle"})," returns a ",(0,a.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise",title:"Promise",children:"Promise"}),", then ",(0,a.jsx)(n.code,{children:"jsHandle.evaluateHandle"})," would wait for the promise to resolve and return its value."]}),"\n",(0,a.jsxs)(n.p,{children:["See ",(0,a.jsx)(n.a,{href:"/java/docs/api/class-page#page-evaluate-handle",children:"Page.evaluateHandle()"})," for more details."]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Usage"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:"JSHandle.evaluateHandle(expression);\nJSHandle.evaluateHandle(expression, arg);\n"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Arguments"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.code,{children:"expression"})," ",(0,a.jsx)(n.a,{href:"https://docs.oracle.com/javase/8/docs/api/java/lang/String.html",title:"String",children:"String"}),(0,a.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"js-handle-evaluate-handle-option-expression"}),(0,a.jsx)("a",{href:"#js-handle-evaluate-handle-option-expression",class:"list-anchor",children:"#"})]}),"\n",(0,a.jsx)(n.p,{children:"JavaScript expression to be evaluated in the browser context. If the expression evaluates to a function, the function is automatically invoked."}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.code,{children:"arg"})," ",(0,a.jsx)(n.a,{href:"/java/docs/evaluating#evaluation-argument",title:"EvaluationArgument",children:"EvaluationArgument"})," ",(0,a.jsx)(n.em,{children:"(optional)"}),(0,a.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"js-handle-evaluate-handle-option-arg"}),(0,a.jsx)("a",{href:"#js-handle-evaluate-handle-option-arg",class:"list-anchor",children:"#"})]}),"\n",(0,a.jsxs)(n.p,{children:["Optional argument to pass to ",(0,a.jsx)(n.code,{children:"expression"}),"."]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Returns"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"/java/docs/api/class-jshandle",title:"JSHandle",children:"JSHandle"}),(0,a.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"js-handle-evaluate-handle-return"}),(0,a.jsx)("a",{href:"#js-handle-evaluate-handle-return",class:"list-anchor",children:"#"})]}),"\n"]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h3,{id:"js-handle-get-properties",children:"getProperties"}),"\n",(0,a.jsx)("font",{size:"2",style:{position:"relative",top:"-20px"},children:"Added before v1.9"}),"\n",(0,a.jsx)("x-search",{children:"jsHandle.getProperties"}),"\n",(0,a.jsxs)(n.p,{children:["The method returns a map with ",(0,a.jsx)(n.strong,{children:"own property names"})," as keys and JSHandle instances for the property values."]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Usage"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'JSHandle handle = page.evaluateHandle("() => ({ window, document })");\nMap<String, JSHandle> properties = handle.getProperties();\nJSHandle windowHandle = properties.get("window");\nJSHandle documentHandle = properties.get("document");\nhandle.dispose();\n'})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Returns"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"https://docs.oracle.com/javase/8/docs/api/java/util/Map.html",title:"Map",children:"Map"}),"<",(0,a.jsx)(n.a,{href:"https://docs.oracle.com/javase/8/docs/api/java/lang/String.html",title:"String",children:"String"}),", ",(0,a.jsx)(n.a,{href:"/java/docs/api/class-jshandle",title:"JSHandle",children:"JSHandle"}),">",(0,a.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"js-handle-get-properties-return"}),(0,a.jsx)("a",{href:"#js-handle-get-properties-return",class:"list-anchor",children:"#"})]}),"\n"]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h3,{id:"js-handle-get-property",children:"getProperty"}),"\n",(0,a.jsx)("font",{size:"2",style:{position:"relative",top:"-20px"},children:"Added before v1.9"}),"\n",(0,a.jsx)("x-search",{children:"jsHandle.getProperty"}),"\n",(0,a.jsx)(n.p,{children:"Fetches a single property from the referenced object."}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Usage"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:"JSHandle.getProperty(propertyName);\n"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Arguments"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.code,{children:"propertyName"})," ",(0,a.jsx)(n.a,{href:"https://docs.oracle.com/javase/8/docs/api/java/lang/String.html",title:"String",children:"String"}),(0,a.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"js-handle-get-property-option-property-name"}),(0,a.jsx)("a",{href:"#js-handle-get-property-option-property-name",class:"list-anchor",children:"#"})]}),"\n",(0,a.jsx)(n.p,{children:"property to get"}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Returns"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"/java/docs/api/class-jshandle",title:"JSHandle",children:"JSHandle"}),(0,a.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"js-handle-get-property-return"}),(0,a.jsx)("a",{href:"#js-handle-get-property-return",class:"list-anchor",children:"#"})]}),"\n"]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h3,{id:"js-handle-json-value",children:"jsonValue"}),"\n",(0,a.jsx)("font",{size:"2",style:{position:"relative",top:"-20px"},children:"Added before v1.9"}),"\n",(0,a.jsx)("x-search",{children:"jsHandle.jsonValue"}),"\n",(0,a.jsxs)(n.p,{children:["Returns a JSON representation of the object. If the object has a ",(0,a.jsx)(n.code,{children:"toJSON"})," function, it ",(0,a.jsx)(n.strong,{children:"will not be called"}),"."]}),"\n",(0,a.jsx)(n.admonition,{type:"note",children:(0,a.jsx)(n.p,{children:"The method will return an empty JSON object if the referenced object is not stringifiable. It will throw an error if the object has circular references."})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Usage"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:"JSHandle.jsonValue();\n"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Returns"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html",title:"Object",children:"Object"}),(0,a.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"js-handle-json-value-return"}),(0,a.jsx)("a",{href:"#js-handle-json-value-return",class:"list-anchor",children:"#"})]}),"\n"]})]})}function o(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}}}]);