"use strict";(self.webpackChunkplaywright_dev=self.webpackChunkplaywright_dev||[]).push([[1324],{6033:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>c,contentTitle:()=>a,default:()=>p,frontMatter:()=>o,metadata:()=>d,toc:()=>h});var n=s(4848),r=s(8453),l=s(4235),i=s(8328);s(3078);const o={id:"class-route",title:"Route"},a=void 0,d={id:"api/class-route",title:"Route",description:"Whenever a network route is set up with page.route() or browser_context.route(), the Route object allows to handle the route.",source:"@site/versioned_docs/version-stable/api/class-route.mdx",sourceDirName:"api",slug:"/api/class-route",permalink:"/python/docs/api/class-route",draft:!1,unlisted:!1,tags:[],version:"stable",frontMatter:{id:"class-route",title:"Route"},sidebar:"api",previous:{title:"Response",permalink:"/python/docs/api/class-response"},next:{title:"Selectors",permalink:"/python/docs/api/class-selectors"}},c={},h=[{value:"Methods",id:"methods",level:2},{value:"abort",id:"route-abort",level:3},{value:"continue_",id:"route-continue",level:3},{value:"fallback",id:"route-fallback",level:3},{value:"fetch",id:"route-fetch",level:3},{value:"fulfill",id:"route-fulfill",level:3},{value:"Properties",id:"properties",level:2},{value:"request",id:"route-request",level:3}];function u(e){const t={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(t.p,{children:["Whenever a network route is set up with ",(0,n.jsx)(t.a,{href:"/python/docs/api/class-page#page-route",children:"page.route()"})," or ",(0,n.jsx)(t.a,{href:"/python/docs/api/class-browsercontext#browser-context-route",children:"browser_context.route()"}),", the ",(0,n.jsx)(t.code,{children:"Route"})," object allows to handle the route."]}),"\n",(0,n.jsxs)(t.p,{children:["Learn more about ",(0,n.jsx)(t.a,{href:"/python/docs/network",children:"networking"}),"."]}),"\n",(0,n.jsx)(t.hr,{}),"\n",(0,n.jsx)(t.h2,{id:"methods",children:"Methods"}),"\n",(0,n.jsx)(t.h3,{id:"route-abort",children:"abort"}),"\n",(0,n.jsx)("font",{size:"2",style:{position:"relative",top:"-20px"},children:"Added before v1.9"}),"\n",(0,n.jsx)("x-search",{children:"route.abort"}),"\n",(0,n.jsx)(t.p,{children:"Aborts the route's request."}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.strong,{children:"Usage"})}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-python",children:"route.abort()\nroute.abort(**kwargs)\n"})}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.strong,{children:"Arguments"})}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.code,{children:"error_code"})," ",(0,n.jsx)(t.a,{href:"https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str",title:"str",children:"str"})," ",(0,n.jsx)(t.em,{children:"(optional)"}),(0,n.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"route-abort-option-error-code"}),(0,n.jsx)("a",{href:"#route-abort-option-error-code",class:"list-anchor",children:"#"})]}),"\n",(0,n.jsxs)(t.p,{children:["Optional error code. Defaults to ",(0,n.jsx)(t.code,{children:"failed"}),", could be one of the following:"]}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"'aborted'"})," - An operation was aborted (due to user action)"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"'accessdenied'"})," - Permission to access a resource, other than the network, was denied"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"'addressunreachable'"})," - The IP address is unreachable. This usually means that there is no route to the specified host or network."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"'blockedbyclient'"})," - The client chose to block the request."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"'blockedbyresponse'"})," - The request failed because the response was delivered along with requirements which are not met ('X-Frame-Options' and 'Content-Security-Policy' ancestor checks, for instance)."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"'connectionaborted'"})," - A connection timed out as a result of not receiving an ACK for data sent."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"'connectionclosed'"})," - A connection was closed (corresponding to a TCP FIN)."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"'connectionfailed'"})," - A connection attempt failed."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"'connectionrefused'"})," - A connection attempt was refused."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"'connectionreset'"})," - A connection was reset (corresponding to a TCP RST)."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"'internetdisconnected'"})," - The Internet connection has been lost."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"'namenotresolved'"})," - The host name could not be resolved."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"'timedout'"})," - An operation timed out."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"'failed'"})," - A generic failure occurred."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.strong,{children:"Returns"})}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.a,{href:"https://docs.python.org/3/library/constants.html#None",title:"None",children:"NoneType"}),(0,n.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"route-abort-return"}),(0,n.jsx)("a",{href:"#route-abort-return",class:"list-anchor",children:"#"})]}),"\n"]}),"\n",(0,n.jsx)(t.hr,{}),"\n",(0,n.jsx)(t.h3,{id:"route-continue",children:"continue_"}),"\n",(0,n.jsx)("font",{size:"2",style:{position:"relative",top:"-20px"},children:"Added before v1.9"}),"\n",(0,n.jsx)("x-search",{children:"route.continue_"}),"\n",(0,n.jsx)(t.p,{children:"Sends route's request to the network with optional overrides."}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.strong,{children:"Usage"})}),"\n",(0,n.jsxs)(l.A,{groupId:"python-flavor",defaultValue:"sync",values:[{label:"Sync",value:"sync"},{label:"Async",value:"async"}],children:[(0,n.jsx)(i.A,{value:"sync",children:(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-py",children:'def handle(route, request):\n    # override headers\n    headers = {\n        **request.headers,\n        "foo": "foo-value", # set "foo" header\n        "bar": None # remove "bar" header\n    }\n    route.continue_(headers=headers)\n\npage.route("**/*", handle)\n'})})}),(0,n.jsx)(i.A,{value:"async",children:(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-py",children:'async def handle(route, request):\n    # override headers\n    headers = {\n        **request.headers,\n        "foo": "foo-value", # set "foo" header\n        "bar": None # remove "bar" header\n    }\n    await route.continue_(headers=headers)\n\nawait page.route("**/*", handle)\n'})})})]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.strong,{children:"Arguments"})}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.code,{children:"headers"})," ",(0,n.jsx)(t.a,{href:"https://docs.python.org/3/library/typing.html#typing.Dict",title:"Dict",children:"Dict"}),"[",(0,n.jsx)(t.a,{href:"https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str",title:"str",children:"str"}),", ",(0,n.jsx)(t.a,{href:"https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str",title:"str",children:"str"}),"] ",(0,n.jsx)(t.em,{children:"(optional)"}),(0,n.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"route-continue-option-headers"}),(0,n.jsx)("a",{href:"#route-continue-option-headers",class:"list-anchor",children:"#"})]}),"\n",(0,n.jsx)(t.p,{children:"If set changes the request HTTP headers. Header values will be converted to a string."}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.code,{children:"method"})," ",(0,n.jsx)(t.a,{href:"https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str",title:"str",children:"str"})," ",(0,n.jsx)(t.em,{children:"(optional)"}),(0,n.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"route-continue-option-method"}),(0,n.jsx)("a",{href:"#route-continue-option-method",class:"list-anchor",children:"#"})]}),"\n",(0,n.jsx)(t.p,{children:"If set changes the request method (e.g. GET or POST)."}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.code,{children:"post_data"})," ",(0,n.jsx)(t.a,{href:"https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str",title:"str",children:"str"})," | ",(0,n.jsx)(t.a,{href:"https://docs.python.org/3/library/stdtypes.html#bytes",title:"bytes",children:"bytes"})," | ",(0,n.jsx)(t.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Description",title:"Serializable",children:"Serializable"})," ",(0,n.jsx)(t.em,{children:"(optional)"}),(0,n.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"route-continue-option-post-data"}),(0,n.jsx)("a",{href:"#route-continue-option-post-data",class:"list-anchor",children:"#"})]}),"\n",(0,n.jsx)(t.p,{children:"If set changes the post data of request."}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.code,{children:"url"})," ",(0,n.jsx)(t.a,{href:"https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str",title:"str",children:"str"})," ",(0,n.jsx)(t.em,{children:"(optional)"}),(0,n.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"route-continue-option-url"}),(0,n.jsx)("a",{href:"#route-continue-option-url",class:"list-anchor",children:"#"})]}),"\n",(0,n.jsx)(t.p,{children:"If set changes the request URL. New URL must have same protocol as original one."}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.strong,{children:"Returns"})}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.a,{href:"https://docs.python.org/3/library/constants.html#None",title:"None",children:"NoneType"}),(0,n.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"route-continue-return"}),(0,n.jsx)("a",{href:"#route-continue-return",class:"list-anchor",children:"#"})]}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.strong,{children:"Details"})}),"\n",(0,n.jsxs)(t.p,{children:["Note that any overrides such as ",(0,n.jsx)(t.code,{children:"url"})," or ",(0,n.jsx)(t.code,{children:"headers"})," only apply to the request being routed. If this request results in a redirect, overrides will not be applied to the new redirected request. If you want to propagate a header through redirects, use the combination of ",(0,n.jsx)(t.a,{href:"/python/docs/api/class-route#route-fetch",children:"route.fetch()"})," and ",(0,n.jsx)(t.a,{href:"/python/docs/api/class-route#route-fulfill",children:"route.fulfill()"})," instead."]}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.a,{href:"/python/docs/api/class-route#route-continue",children:"route.continue_()"})," will immediately send the request to the network, other matching handlers won't be invoked. Use ",(0,n.jsx)(t.a,{href:"/python/docs/api/class-route#route-fallback",children:"route.fallback()"})," If you want next matching handler in the chain to be invoked."]}),"\n",(0,n.jsx)(t.hr,{}),"\n",(0,n.jsx)(t.h3,{id:"route-fallback",children:"fallback"}),"\n",(0,n.jsx)("font",{size:"2",style:{position:"relative",top:"-20px"},children:"Added in: v1.23"}),"\n",(0,n.jsx)("x-search",{children:"route.fallback"}),"\n",(0,n.jsxs)(t.p,{children:["Continues route's request with optional overrides. The method is similar to ",(0,n.jsx)(t.a,{href:"/python/docs/api/class-route#route-continue",children:"route.continue_()"})," with the difference that other matching handlers will be invoked before sending the request."]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.strong,{children:"Usage"})}),"\n",(0,n.jsx)(t.p,{children:"When several routes match the given pattern, they run in the order opposite to their registration. That way the last registered route can always override all the previous ones. In the example below, request will be handled by the bottom-most handler first, then it'll fall back to the previous one and in the end will be aborted by the first registered route."}),"\n",(0,n.jsxs)(l.A,{groupId:"python-flavor",defaultValue:"sync",values:[{label:"Sync",value:"sync"},{label:"Async",value:"async"}],children:[(0,n.jsx)(i.A,{value:"sync",children:(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-py",children:'page.route("**/*", lambda route: route.abort())  # Runs last.\npage.route("**/*", lambda route: route.fallback())  # Runs second.\npage.route("**/*", lambda route: route.fallback())  # Runs first.\n'})})}),(0,n.jsx)(i.A,{value:"async",children:(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-py",children:'await page.route("**/*", lambda route: route.abort())  # Runs last.\nawait page.route("**/*", lambda route: route.fallback())  # Runs second.\nawait page.route("**/*", lambda route: route.fallback())  # Runs first.\n'})})})]}),"\n",(0,n.jsx)(t.p,{children:"Registering multiple routes is useful when you want separate handlers to handle different kinds of requests, for example API calls vs page resources or GET requests vs POST requests as in the example below."}),"\n",(0,n.jsxs)(l.A,{groupId:"python-flavor",defaultValue:"sync",values:[{label:"Sync",value:"sync"},{label:"Async",value:"async"}],children:[(0,n.jsx)(i.A,{value:"sync",children:(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-py",children:'# Handle GET requests.\ndef handle_get(route):\n    if route.request.method != "GET":\n        route.fallback()\n        return\n  # Handling GET only.\n  # ...\n\n# Handle POST requests.\ndef handle_post(route):\n    if route.request.method != "POST":\n        route.fallback()\n        return\n  # Handling POST only.\n  # ...\n\npage.route("**/*", handle_get)\npage.route("**/*", handle_post)\n'})})}),(0,n.jsx)(i.A,{value:"async",children:(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-py",children:'# Handle GET requests.\nasync def handle_get(route):\n    if route.request.method != "GET":\n        await route.fallback()\n        return\n  # Handling GET only.\n  # ...\n\n# Handle POST requests.\nasync def handle_post(route):\n    if route.request.method != "POST":\n        await route.fallback()\n        return\n  # Handling POST only.\n  # ...\n\nawait page.route("**/*", handle_get)\nawait page.route("**/*", handle_post)\n'})})})]}),"\n",(0,n.jsx)(t.p,{children:"One can also modify request while falling back to the subsequent handler, that way intermediate route handler can modify url, method, headers and postData of the request."}),"\n",(0,n.jsxs)(l.A,{groupId:"python-flavor",defaultValue:"sync",values:[{label:"Sync",value:"sync"},{label:"Async",value:"async"}],children:[(0,n.jsx)(i.A,{value:"sync",children:(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-py",children:'def handle(route, request):\n    # override headers\n    headers = {\n        **request.headers,\n        "foo": "foo-value", # set "foo" header\n        "bar": None # remove "bar" header\n    }\n    route.fallback(headers=headers)\n\npage.route("**/*", handle)\n'})})}),(0,n.jsx)(i.A,{value:"async",children:(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-py",children:'async def handle(route, request):\n    # override headers\n    headers = {\n        **request.headers,\n        "foo": "foo-value", # set "foo" header\n        "bar": None # remove "bar" header\n    }\n    await route.fallback(headers=headers)\n\nawait page.route("**/*", handle)\n'})})})]}),"\n",(0,n.jsxs)(t.p,{children:["Use ",(0,n.jsx)(t.a,{href:"/python/docs/api/class-route#route-continue",children:"route.continue_()"})," to immediately send the request to the network, other matching handlers won't be invoked in that case."]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.strong,{children:"Arguments"})}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.code,{children:"headers"})," ",(0,n.jsx)(t.a,{href:"https://docs.python.org/3/library/typing.html#typing.Dict",title:"Dict",children:"Dict"}),"[",(0,n.jsx)(t.a,{href:"https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str",title:"str",children:"str"}),", ",(0,n.jsx)(t.a,{href:"https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str",title:"str",children:"str"}),"] ",(0,n.jsx)(t.em,{children:"(optional)"}),(0,n.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"route-fallback-option-headers"}),(0,n.jsx)("a",{href:"#route-fallback-option-headers",class:"list-anchor",children:"#"})]}),"\n",(0,n.jsx)(t.p,{children:"If set changes the request HTTP headers. Header values will be converted to a string."}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.code,{children:"method"})," ",(0,n.jsx)(t.a,{href:"https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str",title:"str",children:"str"})," ",(0,n.jsx)(t.em,{children:"(optional)"}),(0,n.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"route-fallback-option-method"}),(0,n.jsx)("a",{href:"#route-fallback-option-method",class:"list-anchor",children:"#"})]}),"\n",(0,n.jsx)(t.p,{children:"If set changes the request method (e.g. GET or POST)."}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.code,{children:"post_data"})," ",(0,n.jsx)(t.a,{href:"https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str",title:"str",children:"str"})," | ",(0,n.jsx)(t.a,{href:"https://docs.python.org/3/library/stdtypes.html#bytes",title:"bytes",children:"bytes"})," | ",(0,n.jsx)(t.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Description",title:"Serializable",children:"Serializable"})," ",(0,n.jsx)(t.em,{children:"(optional)"}),(0,n.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"route-fallback-option-post-data"}),(0,n.jsx)("a",{href:"#route-fallback-option-post-data",class:"list-anchor",children:"#"})]}),"\n",(0,n.jsx)(t.p,{children:"If set changes the post data of request."}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.code,{children:"url"})," ",(0,n.jsx)(t.a,{href:"https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str",title:"str",children:"str"})," ",(0,n.jsx)(t.em,{children:"(optional)"}),(0,n.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"route-fallback-option-url"}),(0,n.jsx)("a",{href:"#route-fallback-option-url",class:"list-anchor",children:"#"})]}),"\n",(0,n.jsx)(t.p,{children:"If set changes the request URL. New URL must have same protocol as original one. Changing the URL won't affect the route matching, all the routes are matched using the original request URL."}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.strong,{children:"Returns"})}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.a,{href:"https://docs.python.org/3/library/constants.html#None",title:"None",children:"NoneType"}),(0,n.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"route-fallback-return"}),(0,n.jsx)("a",{href:"#route-fallback-return",class:"list-anchor",children:"#"})]}),"\n"]}),"\n",(0,n.jsx)(t.hr,{}),"\n",(0,n.jsx)(t.h3,{id:"route-fetch",children:"fetch"}),"\n",(0,n.jsx)("font",{size:"2",style:{position:"relative",top:"-20px"},children:"Added in: v1.29"}),"\n",(0,n.jsx)("x-search",{children:"route.fetch"}),"\n",(0,n.jsx)(t.p,{children:"Performs the request and fetches result without fulfilling it, so that the response could be modified and then fulfilled."}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.strong,{children:"Usage"})}),"\n",(0,n.jsxs)(l.A,{groupId:"python-flavor",defaultValue:"sync",values:[{label:"Sync",value:"sync"},{label:"Async",value:"async"}],children:[(0,n.jsx)(i.A,{value:"sync",children:(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-py",children:'def handle(route):\n    response = route.fetch()\n    json = response.json()\n    json["message"]["big_red_dog"] = []\n    route.fulfill(response=response, json=json)\n\npage.route("https://dog.ceo/api/breeds/list/all", handle)\n'})})}),(0,n.jsx)(i.A,{value:"async",children:(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-py",children:'async def handle(route):\n    response = await route.fetch()\n    json = await response.json()\n    json["message"]["big_red_dog"] = []\n    await route.fulfill(response=response, json=json)\n\nawait page.route("https://dog.ceo/api/breeds/list/all", handle)\n'})})})]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.strong,{children:"Arguments"})}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.code,{children:"headers"})," ",(0,n.jsx)(t.a,{href:"https://docs.python.org/3/library/typing.html#typing.Dict",title:"Dict",children:"Dict"}),"[",(0,n.jsx)(t.a,{href:"https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str",title:"str",children:"str"}),", ",(0,n.jsx)(t.a,{href:"https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str",title:"str",children:"str"}),"] ",(0,n.jsx)(t.em,{children:"(optional)"}),(0,n.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"route-fetch-option-headers"}),(0,n.jsx)("a",{href:"#route-fetch-option-headers",class:"list-anchor",children:"#"})]}),"\n",(0,n.jsx)(t.p,{children:"If set changes the request HTTP headers. Header values will be converted to a string."}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.code,{children:"max_redirects"})," ",(0,n.jsx)(t.a,{href:"https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex",title:"int",children:"int"})," ",(0,n.jsx)(t.em,{children:"(optional)"})," ",(0,n.jsx)("font",{size:"2",children:"Added in: v1.31"}),(0,n.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"route-fetch-option-max-redirects"}),(0,n.jsx)("a",{href:"#route-fetch-option-max-redirects",class:"list-anchor",children:"#"})]}),"\n",(0,n.jsxs)(t.p,{children:["Maximum number of request redirects that will be followed automatically. An error will be thrown if the number is exceeded. Defaults to ",(0,n.jsx)(t.code,{children:"20"}),". Pass ",(0,n.jsx)(t.code,{children:"0"})," to not follow redirects."]}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.code,{children:"max_retries"})," ",(0,n.jsx)(t.a,{href:"https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex",title:"int",children:"int"})," ",(0,n.jsx)(t.em,{children:"(optional)"})," ",(0,n.jsx)("font",{size:"2",children:"Added in: v1.46"}),(0,n.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"route-fetch-option-max-retries"}),(0,n.jsx)("a",{href:"#route-fetch-option-max-retries",class:"list-anchor",children:"#"})]}),"\n",(0,n.jsxs)(t.p,{children:["Maximum number of times network errors should be retried. Currently only ",(0,n.jsx)(t.code,{children:"ECONNRESET"})," error is retried. Does not retry based on HTTP response codes. An error will be thrown if the limit is exceeded. Defaults to ",(0,n.jsx)(t.code,{children:"0"})," - no retries."]}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.code,{children:"method"})," ",(0,n.jsx)(t.a,{href:"https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str",title:"str",children:"str"})," ",(0,n.jsx)(t.em,{children:"(optional)"}),(0,n.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"route-fetch-option-method"}),(0,n.jsx)("a",{href:"#route-fetch-option-method",class:"list-anchor",children:"#"})]}),"\n",(0,n.jsx)(t.p,{children:"If set changes the request method (e.g. GET or POST)."}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.code,{children:"post_data"})," ",(0,n.jsx)(t.a,{href:"https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str",title:"str",children:"str"})," | ",(0,n.jsx)(t.a,{href:"https://docs.python.org/3/library/stdtypes.html#bytes",title:"bytes",children:"bytes"})," | ",(0,n.jsx)(t.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Description",title:"Serializable",children:"Serializable"})," ",(0,n.jsx)(t.em,{children:"(optional)"}),(0,n.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"route-fetch-option-post-data"}),(0,n.jsx)("a",{href:"#route-fetch-option-post-data",class:"list-anchor",children:"#"})]}),"\n",(0,n.jsxs)(t.p,{children:["Allows to set post data of the request. If the data parameter is an object, it will be serialized to json string and ",(0,n.jsx)(t.code,{children:"content-type"})," header will be set to ",(0,n.jsx)(t.code,{children:"application/json"})," if not explicitly set. Otherwise the ",(0,n.jsx)(t.code,{children:"content-type"})," header will be set to ",(0,n.jsx)(t.code,{children:"application/octet-stream"})," if not explicitly set."]}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.code,{children:"timeout"})," ",(0,n.jsx)(t.a,{href:"https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex",title:"float",children:"float"})," ",(0,n.jsx)(t.em,{children:"(optional)"})," ",(0,n.jsx)("font",{size:"2",children:"Added in: v1.33"}),(0,n.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"route-fetch-option-timeout"}),(0,n.jsx)("a",{href:"#route-fetch-option-timeout",class:"list-anchor",children:"#"})]}),"\n",(0,n.jsxs)(t.p,{children:["Request timeout in milliseconds. Defaults to ",(0,n.jsx)(t.code,{children:"30000"})," (30 seconds). Pass ",(0,n.jsx)(t.code,{children:"0"})," to disable timeout."]}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.code,{children:"url"})," ",(0,n.jsx)(t.a,{href:"https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str",title:"str",children:"str"})," ",(0,n.jsx)(t.em,{children:"(optional)"}),(0,n.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"route-fetch-option-url"}),(0,n.jsx)("a",{href:"#route-fetch-option-url",class:"list-anchor",children:"#"})]}),"\n",(0,n.jsx)(t.p,{children:"If set changes the request URL. New URL must have same protocol as original one."}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.strong,{children:"Returns"})}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.a,{href:"/python/docs/api/class-apiresponse",title:"APIResponse",children:"APIResponse"}),(0,n.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"route-fetch-return"}),(0,n.jsx)("a",{href:"#route-fetch-return",class:"list-anchor",children:"#"})]}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.strong,{children:"Details"})}),"\n",(0,n.jsxs)(t.p,{children:["Note that ",(0,n.jsx)(t.code,{children:"headers"})," option will apply to the fetched request as well as any redirects initiated by it. If you want to only apply ",(0,n.jsx)(t.code,{children:"headers"})," to the original request, but not to redirects, look into ",(0,n.jsx)(t.a,{href:"/python/docs/api/class-route#route-continue",children:"route.continue_()"})," instead."]}),"\n",(0,n.jsx)(t.hr,{}),"\n",(0,n.jsx)(t.h3,{id:"route-fulfill",children:"fulfill"}),"\n",(0,n.jsx)("font",{size:"2",style:{position:"relative",top:"-20px"},children:"Added before v1.9"}),"\n",(0,n.jsx)("x-search",{children:"route.fulfill"}),"\n",(0,n.jsx)(t.p,{children:"Fulfills route's request with given response."}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.strong,{children:"Usage"})}),"\n",(0,n.jsx)(t.p,{children:"An example of fulfilling all requests with 404 responses:"}),"\n",(0,n.jsxs)(l.A,{groupId:"python-flavor",defaultValue:"sync",values:[{label:"Sync",value:"sync"},{label:"Async",value:"async"}],children:[(0,n.jsx)(i.A,{value:"sync",children:(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-py",children:'page.route("**/*", lambda route: route.fulfill(\n    status=404,\n    content_type="text/plain",\n    body="not found!"))\n'})})}),(0,n.jsx)(i.A,{value:"async",children:(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-py",children:'await page.route("**/*", lambda route: route.fulfill(\n    status=404,\n    content_type="text/plain",\n    body="not found!"))\n'})})})]}),"\n",(0,n.jsx)(t.p,{children:"An example of serving static file:"}),"\n",(0,n.jsxs)(l.A,{groupId:"python-flavor",defaultValue:"sync",values:[{label:"Sync",value:"sync"},{label:"Async",value:"async"}],children:[(0,n.jsx)(i.A,{value:"sync",children:(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-py",children:'page.route("**/xhr_endpoint", lambda route: route.fulfill(path="mock_data.json"))\n'})})}),(0,n.jsx)(i.A,{value:"async",children:(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-py",children:'await page.route("**/xhr_endpoint", lambda route: route.fulfill(path="mock_data.json"))\n'})})})]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.strong,{children:"Arguments"})}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.code,{children:"body"})," ",(0,n.jsx)(t.a,{href:"https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str",title:"str",children:"str"})," | ",(0,n.jsx)(t.a,{href:"https://docs.python.org/3/library/stdtypes.html#bytes",title:"bytes",children:"bytes"})," ",(0,n.jsx)(t.em,{children:"(optional)"}),(0,n.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"route-fulfill-option-body"}),(0,n.jsx)("a",{href:"#route-fulfill-option-body",class:"list-anchor",children:"#"})]}),"\n",(0,n.jsx)(t.p,{children:"Response body."}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.code,{children:"content_type"})," ",(0,n.jsx)(t.a,{href:"https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str",title:"str",children:"str"})," ",(0,n.jsx)(t.em,{children:"(optional)"}),(0,n.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"route-fulfill-option-content-type"}),(0,n.jsx)("a",{href:"#route-fulfill-option-content-type",class:"list-anchor",children:"#"})]}),"\n",(0,n.jsxs)(t.p,{children:["If set, equals to setting ",(0,n.jsx)(t.code,{children:"Content-Type"})," response header."]}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.code,{children:"headers"})," ",(0,n.jsx)(t.a,{href:"https://docs.python.org/3/library/typing.html#typing.Dict",title:"Dict",children:"Dict"}),"[",(0,n.jsx)(t.a,{href:"https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str",title:"str",children:"str"}),", ",(0,n.jsx)(t.a,{href:"https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str",title:"str",children:"str"}),"] ",(0,n.jsx)(t.em,{children:"(optional)"}),(0,n.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"route-fulfill-option-headers"}),(0,n.jsx)("a",{href:"#route-fulfill-option-headers",class:"list-anchor",children:"#"})]}),"\n",(0,n.jsx)(t.p,{children:"Response headers. Header values will be converted to a string."}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.code,{children:"json"})," ",(0,n.jsx)(t.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Description",title:"Serializable",children:"Serializable"})," ",(0,n.jsx)(t.em,{children:"(optional)"})," ",(0,n.jsx)("font",{size:"2",children:"Added in: v1.29"}),(0,n.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"route-fulfill-option-json"}),(0,n.jsx)("a",{href:"#route-fulfill-option-json",class:"list-anchor",children:"#"})]}),"\n",(0,n.jsxs)(t.p,{children:["JSON response. This method will set the content type to ",(0,n.jsx)(t.code,{children:"application/json"})," if not set."]}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.code,{children:"path"})," ",(0,n.jsx)(t.a,{href:"https://docs.python.org/3/library/typing.html#typing.Union",title:"Union",children:"Union"}),"[",(0,n.jsx)(t.a,{href:"https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str",title:"str",children:"str"}),", ",(0,n.jsx)(t.a,{href:"https://realpython.com/python-pathlib/",title:"pathlib.Path",children:"pathlib.Path"}),"] ",(0,n.jsx)(t.em,{children:"(optional)"}),(0,n.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"route-fulfill-option-path"}),(0,n.jsx)("a",{href:"#route-fulfill-option-path",class:"list-anchor",children:"#"})]}),"\n",(0,n.jsxs)(t.p,{children:["File path to respond with. The content type will be inferred from file extension. If ",(0,n.jsx)(t.code,{children:"path"})," is a relative path, then it is resolved relative to the current working directory."]}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.code,{children:"response"})," ",(0,n.jsx)(t.a,{href:"/python/docs/api/class-apiresponse",title:"APIResponse",children:"APIResponse"})," ",(0,n.jsx)(t.em,{children:"(optional)"})," ",(0,n.jsx)("font",{size:"2",children:"Added in: v1.15"}),(0,n.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"route-fulfill-option-response"}),(0,n.jsx)("a",{href:"#route-fulfill-option-response",class:"list-anchor",children:"#"})]}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.a,{href:"/python/docs/api/class-apiresponse",title:"APIResponse",children:"APIResponse"})," to fulfill route's request with. Individual fields of the response (such as headers) can be overridden using fulfill options."]}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.code,{children:"status"})," ",(0,n.jsx)(t.a,{href:"https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex",title:"int",children:"int"})," ",(0,n.jsx)(t.em,{children:"(optional)"}),(0,n.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"route-fulfill-option-status"}),(0,n.jsx)("a",{href:"#route-fulfill-option-status",class:"list-anchor",children:"#"})]}),"\n",(0,n.jsxs)(t.p,{children:["Response status code, defaults to ",(0,n.jsx)(t.code,{children:"200"}),"."]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.strong,{children:"Returns"})}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.a,{href:"https://docs.python.org/3/library/constants.html#None",title:"None",children:"NoneType"}),(0,n.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"route-fulfill-return"}),(0,n.jsx)("a",{href:"#route-fulfill-return",class:"list-anchor",children:"#"})]}),"\n"]}),"\n",(0,n.jsx)(t.hr,{}),"\n",(0,n.jsx)(t.h2,{id:"properties",children:"Properties"}),"\n",(0,n.jsx)(t.h3,{id:"route-request",children:"request"}),"\n",(0,n.jsx)("font",{size:"2",style:{position:"relative",top:"-20px"},children:"Added before v1.9"}),"\n",(0,n.jsx)("x-search",{children:"route.request"}),"\n",(0,n.jsx)(t.p,{children:"A request to be routed."}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.strong,{children:"Usage"})}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-python",children:"route.request\n"})}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.strong,{children:"Returns"})}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.a,{href:"/python/docs/api/class-request",title:"Request",children:"Request"}),(0,n.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"route-request-return"}),(0,n.jsx)("a",{href:"#route-request-return",class:"list-anchor",children:"#"})]}),"\n"]})]})}function p(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(u,{...e})}):u(e)}}}]);