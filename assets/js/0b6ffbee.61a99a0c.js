"use strict";(self.webpackChunkplaywright_dev=self.webpackChunkplaywright_dev||[]).push([[8903],{8373:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>l,metadata:()=>o,toc:()=>d});var n=s(4848),i=s(8453);s(4235),s(8328),s(3078);const l={id:"test-use-options",title:"\u6e2c\u8a66\u4f7f\u7528\u9078\u9805"},r=void 0,o={id:"test-use-options",title:"\u6e2c\u8a66\u4f7f\u7528\u9078\u9805",description:"\u7c21\u4ecb",source:"@site/versioned_docs/version-stable/test-use-options.mdx",sourceDirName:".",slug:"/test-use-options",permalink:"/docs/test-use-options",draft:!1,unlisted:!1,tags:[],version:"stable",frontMatter:{id:"test-use-options",title:"\u6e2c\u8a66\u4f7f\u7528\u9078\u9805"},sidebar:"docs",previous:{title:"\u6e2c\u8a66\u8a2d\u5b9a",permalink:"/docs/test-configuration"},next:{title:"\u8a3b\u91cb",permalink:"/docs/test-annotations"}},c={},d=[{value:"\u7c21\u4ecb",id:"\u7c21\u4ecb",level:2},{value:"\u57fa\u672c\u9078\u9805",id:"\u57fa\u672c\u9078\u9805",level:3},{value:"\u6a21\u64ec\u9078\u9805",id:"\u6a21\u64ec\u9078\u9805",level:3},{value:"\u7db2\u8def\u9078\u9805",id:"\u7db2\u8def\u9078\u9805",level:3},{value:"\u9304\u88fd\u9078\u9805",id:"\u9304\u88fd\u9078\u9805",level:3},{value:"\u5176\u4ed6\u9078\u9805",id:"\u5176\u4ed6\u9078\u9805",level:3},{value:"\u66f4\u591a\u700f\u89bd\u5668\u548c\u4e0a\u4e0b\u6587\u9078\u9805",id:"\u66f4\u591a\u700f\u89bd\u5668\u548c\u4e0a\u4e0b\u6587\u9078\u9805",level:3},{value:"\u660e\u78ba\u7684\u4e0a\u4e0b\u6587\u5efa\u7acb\u548c\u9078\u9805\u7e7c\u627f",id:"\u660e\u78ba\u7684\u4e0a\u4e0b\u6587\u5efa\u7acb\u548c\u9078\u9805\u7e7c\u627f",level:3},{value:"\u8a2d\u5b9a\u7bc4\u570d",id:"\u8a2d\u5b9a\u7bc4\u570d",level:3}];function a(e){const t={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.h2,{id:"\u7c21\u4ecb",children:"\u7c21\u4ecb"}),"\n",(0,n.jsxs)(t.p,{children:["\u9664\u4e86\u914d\u7f6e\u6e2c\u8a66\u57f7\u884c\u5668\u4e4b\u5916\uff0c\u4f60\u9084\u53ef\u4ee5\u914d\u7f6e",(0,n.jsx)(t.a,{href:"#%E6%A8%A1%E6%93%AC%E9%81%B8%E9%A0%85",children:"\u6a21\u64ec"}),"\u3001",(0,n.jsx)(t.a,{href:"#%E7%B6%B2%E8%B7%AF%E9%81%B8%E9%A0%85",children:"\u7db2\u8def"}),"\u548c",(0,n.jsx)(t.a,{href:"#%E9%8C%84%E8%A3%BD%E9%81%B8%E9%A0%85",children:"\u9304\u88fd"}),"\u7d66 ",(0,n.jsx)(t.a,{href:"/docs/api/class-browser",title:"Browser",children:"Browser"})," \u6216 ",(0,n.jsx)(t.a,{href:"/docs/api/class-browsercontext",title:"BrowserContext",children:"BrowserContext"}),"\u3002\u9019\u4e9b\u9078\u9805\u6703\u50b3\u905e\u7d66 Playwright \u914d\u7f6e\u4e2d\u7684 ",(0,n.jsx)(t.code,{children:"use: {}"})," \u7269\u4ef6\u3002"]}),"\n",(0,n.jsx)(t.h3,{id:"\u57fa\u672c\u9078\u9805",children:"\u57fa\u672c\u9078\u9805"}),"\n",(0,n.jsx)(t.p,{children:"\u8a2d\u5b9a\u6240\u6709\u6e2c\u8a66\u7684\u57fa\u672c URL \u548c\u5132\u5b58\u72c0\u614b:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-js",metastring:'title="playwright.config.ts"',children:"import { defineConfig } from '@playwright/test';\n\nexport default defineConfig({\n  use: {\n    // Base URL to use in actions like `await page.goto('/')`.\n    baseURL: 'http://127.0.0.1:3000',\n\n    // Populates context with given storage state.\n    storageState: 'state.json',\n  },\n});\n"})}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Option"}),(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.a,{href:"/docs/api/class-testoptions#test-options-base-url",children:"testOptions.baseURL"})}),(0,n.jsxs)(t.td,{style:{textAlign:"left"},children:["\u7528\u65bc\u4e0a\u4e0b\u6587\u4e2d\u6240\u6709\u9801\u9762\u7684\u57fa\u672c URL\u3002\u5141\u8a31\u50c5\u4f7f\u7528\u8def\u5f91\u9032\u884c\u5c0e\u822a\uff0c\u4f8b\u5982 ",(0,n.jsx)(t.code,{children:"page.goto('/settings')"}),"\u3002"]})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.a,{href:"/docs/api/class-testoptions#test-options-storage-state",children:"testOptions.storageState"})}),(0,n.jsxs)(t.td,{style:{textAlign:"left"},children:["\u4f7f\u7528\u7d66\u5b9a\u7684\u5b58\u5132\u72c0\u614b\u586b\u5145\u4e0a\u4e0b\u6587\u3002\u5c0d\u65bc\u7c21\u55ae\u7684\u8eab\u4efd\u9a57\u8b49\u975e\u5e38\u6709\u7528\uff0c",(0,n.jsx)(t.a,{href:"/docs/auth",children:"\u4e86\u89e3\u66f4\u591a"}),"\u3002"]})]})]})]}),"\n",(0,n.jsx)(t.h3,{id:"\u6a21\u64ec\u9078\u9805",children:"\u6a21\u64ec\u9078\u9805"}),"\n",(0,n.jsxs)(t.p,{children:["\u4f7f\u7528 Playwright\uff0c\u4f60\u53ef\u4ee5\u6a21\u64ec\u771f\u5be6\u8a2d\u5099\uff0c\u4f8b\u5982\u624b\u6a5f\u6216\u5e73\u677f\u96fb\u8166\u3002\u67e5\u770b\u6211\u5011\u7684",(0,n.jsx)(t.a,{href:"/docs/test-projects",children:"\u5c08\u6848\u6307\u5357"}),"\u4ee5\u7372\u53d6\u6709\u95dc\u6a21\u64ec\u8a2d\u5099\u7684\u66f4\u591a\u8cc7\u8a0a\u3002\u4f60\u9084\u53ef\u4ee5\u70ba\u6240\u6709\u6e2c\u8a66\u6216\u7279\u5b9a\u6e2c\u8a66\u6a21\u64ec ",(0,n.jsx)(t.code,{children:'"geolocation"'}),"\u3001",(0,n.jsx)(t.code,{children:'"locale"'})," \u548c ",(0,n.jsx)(t.code,{children:'"timezone"'}),"\uff0c\u4ee5\u53ca\u8a2d\u7f6e ",(0,n.jsx)(t.code,{children:'"permissions"'})," \u4f86\u986f\u793a\u901a\u77e5\u6216\u66f4\u6539 ",(0,n.jsx)(t.code,{children:'"colorScheme"'}),"\u3002\u67e5\u770b\u6211\u5011\u7684",(0,n.jsx)(t.a,{href:"/docs/emulation",children:"\u6a21\u64ec"}),"\u6307\u5357\u4ee5\u4e86\u89e3\u66f4\u591a\u3002"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-js",metastring:'title="playwright.config.ts"',children:"import { defineConfig } from '@playwright/test';\n\nexport default defineConfig({\n  use: {\n    // Emulates `'prefers-colors-scheme'` media feature.\n    colorScheme: 'dark',\n\n    // Context geolocation.\n    geolocation: { longitude: 12.492507, latitude: 41.889938 },\n\n    // Emulates the user locale.\n    locale: 'en-GB',\n\n    // Grants specified permissions to the browser context.\n    permissions: ['geolocation'],\n\n    // Emulates the user timezone.\n    timezoneId: 'Europe/Paris',\n\n    // Viewport used for all pages in the context.\n    viewport: { width: 1280, height: 720 },\n  },\n});\n"})}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Option"}),(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.a,{href:"/docs/api/class-testoptions#test-options-color-scheme",children:"testOptions.colorScheme"})}),(0,n.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,n.jsx)(t.a,{href:"/docs/emulation#color-scheme-and-media",children:"\u6a21\u64ec"})," ",(0,n.jsx)(t.code,{children:"'prefers-colors-scheme'"})," \u5a92\u9ad4\u529f\u80fd\uff0c\u652f\u6301\u7684\u503c\u6709 ",(0,n.jsx)(t.code,{children:"'light'"}),"\u3001",(0,n.jsx)(t.code,{children:"'dark'"}),"\u3001",(0,n.jsx)(t.code,{children:"'no-preference'"})]})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.a,{href:"/docs/api/class-testoptions#test-options-geolocation",children:"testOptions.geolocation"})}),(0,n.jsxs)(t.td,{style:{textAlign:"left"},children:["\u4e0a\u4e0b\u6587 ",(0,n.jsx)(t.a,{href:"/docs/emulation#geolocation",children:"geolocation"})]})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.a,{href:"/docs/api/class-testoptions#test-options-locale",children:"testOptions.locale"})}),(0,n.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,n.jsx)(t.a,{href:"/docs/emulation#locale--timezone",children:"\u6a21\u64ec"})," \u4f7f\u7528\u8005\u7684\u5340\u57df\u8a2d\u7f6e\uff0c\u4f8b\u5982 ",(0,n.jsx)(t.code,{children:"en-GB"}),"\u3001",(0,n.jsx)(t.code,{children:"de-DE"})," \u7b49"]})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.a,{href:"/docs/api/class-testoptions#test-options-permissions",children:"testOptions.permissions"})}),(0,n.jsxs)(t.td,{style:{textAlign:"left"},children:["\u8981\u6388\u4e88\u4e0a\u4e0b\u6587\u4e2d\u6240\u6709\u9801\u9762\u7684 ",(0,n.jsx)(t.a,{href:"/docs/emulation#permissions",children:"permissions"})," \u5217\u8868"]})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.a,{href:"/docs/api/class-testoptions#test-options-timezone-id",children:"testOptions.timezoneId"})}),(0,n.jsxs)(t.td,{style:{textAlign:"left"},children:["\u66f4\u6539\u4e0a\u4e0b\u6587\u7684 ",(0,n.jsx)(t.a,{href:"/docs/emulation#locale--timezone",children:"timezone"})]})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.a,{href:"/docs/api/class-testoptions#test-options-viewport",children:"testOptions.viewport"})}),(0,n.jsxs)(t.td,{style:{textAlign:"left"},children:["\u7528\u65bc\u4e0a\u4e0b\u6587\u4e2d\u6240\u6709\u9801\u9762\u7684 ",(0,n.jsx)(t.a,{href:"/docs/emulation#viewport",children:"Viewport"})]})]})]})]}),"\n",(0,n.jsx)(t.h3,{id:"\u7db2\u8def\u9078\u9805",children:"\u7db2\u8def\u9078\u9805"}),"\n",(0,n.jsx)(t.p,{children:"\u914d\u7f6e\u7db2\u7d61\u7684\u53ef\u7528\u9078\u9805:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-js",metastring:'title="playwright.config.ts"',children:"import { defineConfig } from '@playwright/test';\n\nexport default defineConfig({\n  use: {\n    // Whether to automatically download all the attachments.\n    acceptDownloads: false,\n\n    // An object containing additional HTTP headers to be sent with every request.\n    extraHTTPHeaders: {\n      'X-My-Header': 'value',\n    },\n\n    // Credentials for HTTP authentication.\n    httpCredentials: {\n      username: 'user',\n      password: 'pass',\n    },\n\n    // Whether to ignore HTTPS errors during navigation.\n    ignoreHTTPSErrors: true,\n\n    // Whether to emulate network being offline.\n    offline: true,\n\n    // Proxy settings used for all pages in the test.\n    proxy: {\n      server: 'http://myproxy.com:3128',\n      bypass: 'localhost',\n    },\n  },\n});\n"})}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Option"}),(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.a,{href:"/docs/api/class-testoptions#test-options-accept-downloads",children:"testOptions.acceptDownloads"})}),(0,n.jsxs)(t.td,{style:{textAlign:"left"},children:["\u662f\u5426\u81ea\u52d5\u4e0b\u8f09\u6240\u6709\u9644\u4ef6\uff0c\u9810\u8a2d\u70ba ",(0,n.jsx)(t.code,{children:"true"}),"\u3002",(0,n.jsx)(t.a,{href:"/docs/downloads",children:"\u4e86\u89e3\u66f4\u591a"})," \u95dc\u65bc\u4e0b\u8f09\u7684\u5de5\u4f5c\u3002"]})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.a,{href:"/docs/api/class-testoptions#test-options-extra-http-headers",children:"testOptions.extraHTTPHeaders"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"\u5305\u542b\u8981\u96a8\u6bcf\u500b\u8acb\u6c42\u4e00\u8d77\u767c\u9001\u7684\u984d\u5916 HTTP \u6a19\u982d\u7684\u7269\u4ef6\u3002\u6240\u6709\u6a19\u982d\u503c\u5fc5\u9808\u662f\u5b57\u4e32\u3002"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.a,{href:"/docs/api/class-testoptions#test-options-http-credentials",children:"testOptions.httpCredentials"})}),(0,n.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,n.jsx)(t.a,{href:"/docs/network#http-authentication",children:"HTTP \u8a8d\u8b49"})," \u7684\u6191\u8b49\u3002"]})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.a,{href:"/docs/api/class-testoptions#test-options-ignore-https-errors",children:"testOptions.ignoreHTTPSErrors"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"\u662f\u5426\u5728\u5c0e\u822a\u671f\u9593\u5ffd\u7565 HTTPS \u932f\u8aa4\u3002"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.a,{href:"/docs/api/class-testoptions#test-options-offline",children:"testOptions.offline"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"\u662f\u5426\u6a21\u64ec\u7db2\u8def\u96e2\u7dda\u3002"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.a,{href:"/docs/api/class-testoptions#test-options-proxy",children:"testOptions.proxy"})}),(0,n.jsxs)(t.td,{style:{textAlign:"left"},children:["\u6e2c\u8a66\u4e2d\u6240\u6709\u9801\u9762\u4f7f\u7528\u7684 ",(0,n.jsx)(t.a,{href:"/docs/network#http-proxy",children:"\u4ee3\u7406\u8a2d\u5b9a"}),"\u3002"]})]})]})]}),"\n",(0,n.jsx)(t.admonition,{type:"note",children:(0,n.jsxs)(t.p,{children:["\u4f60\u4e0d\u9700\u8981\u914d\u7f6e\u4efb\u4f55\u6771\u897f\u4f86\u6a21\u64ec\u7db2\u8def\u8acb\u6c42\u3002\u53ea\u9700\u5b9a\u7fa9\u4e00\u500b\u81ea\u8a02\u7684 ",(0,n.jsx)(t.a,{href:"/docs/api/class-route",title:"Route",children:"Route"})," \u4f86\u6a21\u64ec\u700f\u89bd\u5668\u4e0a\u4e0b\u6587\u7684\u7db2\u8def\u3002\u8acb\u53c3\u95b1\u6211\u5011\u7684",(0,n.jsx)(t.a,{href:"/docs/network",children:"\u7db2\u8def\u6a21\u64ec\u6307\u5357"}),"\u4ee5\u4e86\u89e3\u66f4\u591a\u8cc7\u8a0a\u3002"]})}),"\n",(0,n.jsx)(t.h3,{id:"\u9304\u88fd\u9078\u9805",children:"\u9304\u88fd\u9078\u9805"}),"\n",(0,n.jsxs)(t.p,{children:["\u4f7f\u7528 Playwright\uff0c\u4f60\u53ef\u4ee5\u622a\u53d6\u87a2\u5e55\u622a\u5716\u3001\u9304\u88fd\u5f71\u7247\u4ee5\u53ca\u8a18\u9304\u6e2c\u8a66\u7684\u8ffd\u8e64\u3002\u9019\u4e9b\u529f\u80fd\u9810\u8a2d\u662f\u95dc\u9589\u7684\uff0c\u4f46\u4f60\u53ef\u4ee5\u900f\u904e\u5728 ",(0,n.jsx)(t.code,{children:"playwright.config.js"})," \u6a94\u6848\u4e2d\u8a2d\u5b9a ",(0,n.jsx)(t.code,{children:"screenshot"}),"\u3001",(0,n.jsx)(t.code,{children:"video"})," \u548c ",(0,n.jsx)(t.code,{children:"trace"})," \u9078\u9805\u4f86\u555f\u7528\u5b83\u5011\u3002"]}),"\n",(0,n.jsxs)(t.p,{children:["\u6e2c\u8a66\u8f38\u51fa\u76ee\u9304\u4e2d\u901a\u5e38\u6703\u51fa\u73fe\u8ffd\u8e64\u6a94\u6848\u3001\u622a\u5716\u548c\u5f71\u7247\uff0c\u901a\u5e38\u662f ",(0,n.jsx)(t.code,{children:"test-results"}),"\u3002"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-js",metastring:'title="playwright.config.ts"',children:"import { defineConfig } from '@playwright/test';\n\nexport default defineConfig({\n  use: {\n    // Capture screenshot after each test failure.\n    screenshot: 'only-on-failure',\n\n    // Record trace only when retrying a test for the first time.\n    trace: 'on-first-retry',\n\n    // Record video only when retrying a test for the first time.\n    video: 'on-first-retry'\n  },\n});\n"})}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Option"}),(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.a,{href:"/docs/api/class-testoptions#test-options-screenshot",children:"testOptions.screenshot"})}),(0,n.jsxs)(t.td,{style:{textAlign:"left"},children:["\u6355\u6349\u6e2c\u8a66\u7684",(0,n.jsx)(t.a,{href:"/docs/screenshots",children:"\u622a\u5716"}),"\u3002\u9078\u9805\u5305\u62ec ",(0,n.jsx)(t.code,{children:"'off'"}),"\u3001",(0,n.jsx)(t.code,{children:"'on'"})," \u548c ",(0,n.jsx)(t.code,{children:"'only-on-failure'"})]})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.a,{href:"/docs/api/class-testoptions#test-options-trace",children:"testOptions.trace"})}),(0,n.jsxs)(t.td,{style:{textAlign:"left"},children:["Playwright \u53ef\u4ee5\u5728\u57f7\u884c\u6e2c\u8a66\u6642\u7522\u751f\u6e2c\u8a66\u8ffd\u8e64\u3002\u4e4b\u5f8c\uff0c\u4f60\u53ef\u4ee5\u6253\u958b ",(0,n.jsx)(t.a,{href:"/docs/trace-viewer",children:"Trace Viewer"})," \u67e5\u770b\u8ffd\u8e64\u4e26\u7372\u53d6\u6709\u95dc Playwright \u57f7\u884c\u7684\u8a73\u7d30\u8cc7\u8a0a\u3002\u9078\u9805\u5305\u62ec\uff1a",(0,n.jsx)(t.code,{children:"'off'"}),"\u3001",(0,n.jsx)(t.code,{children:"'on'"}),"\u3001",(0,n.jsx)(t.code,{children:"'retain-on-failure'"})," \u548c ",(0,n.jsx)(t.code,{children:"'on-first-retry'"})]})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.a,{href:"/docs/api/class-testoptions#test-options-video",children:"testOptions.video"})}),(0,n.jsxs)(t.td,{style:{textAlign:"left"},children:["Playwright \u53ef\u4ee5\u70ba\u4f60\u7684\u6e2c\u8a66\u9304\u88fd",(0,n.jsx)(t.a,{href:"/docs/videos",children:"\u5f71\u7247"}),"\u3002\u9078\u9805\u5305\u62ec\uff1a",(0,n.jsx)(t.code,{children:"'off'"}),"\u3001",(0,n.jsx)(t.code,{children:"'on'"}),"\u3001",(0,n.jsx)(t.code,{children:"'retain-on-failure'"})," \u548c ",(0,n.jsx)(t.code,{children:"'on-first-retry'"})]})]})]})]}),"\n",(0,n.jsx)(t.h3,{id:"\u5176\u4ed6\u9078\u9805",children:"\u5176\u4ed6\u9078\u9805"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-js",metastring:'title="playwright.config.ts"',children:"import { defineConfig } from '@playwright/test';\n\nexport default defineConfig({\n  use: {\n    // Maximum time each action such as `click()` can take. Defaults to 0 (no limit).\n    actionTimeout: 0,\n\n    // Name of the browser that runs tests. For example `chromium`, `firefox`, `webkit`.\n    browserName: 'chromium',\n\n    // Toggles bypassing Content-Security-Policy.\n    bypassCSP: true,\n\n    // Channel to use, for example \"chrome\", \"chrome-beta\", \"msedge\", \"msedge-beta\".\n    channel: 'chrome',\n\n    // Run browser in headless mode.\n    headless: false,\n\n    // Change the default data-testid attribute.\n    testIdAttribute: 'pw-test-id',\n  },\n});\n"})}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Option"}),(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.a,{href:"/docs/api/class-testoptions#test-options-action-timeout",children:"testOptions.actionTimeout"})}),(0,n.jsxs)(t.td,{style:{textAlign:"left"},children:["\u6bcf\u500b Playwright \u52d5\u4f5c\u7684\u8d85\u6642\u6642\u9593\uff08\u4ee5\u6beb\u79d2\u70ba\u55ae\u4f4d\uff09\u3002\u9810\u8a2d\u70ba ",(0,n.jsx)(t.code,{children:"0"}),"\uff08\u7121\u8d85\u6642\uff09\u3002\u4e86\u89e3\u66f4\u591a\u95dc\u65bc",(0,n.jsx)(t.a,{href:"/docs/test-timeouts",children:"\u8d85\u6642"}),"\u53ca\u5982\u4f55\u70ba\u55ae\u500b\u6e2c\u8a66\u8a2d\u5b9a\u3002"]})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.a,{href:"/docs/api/class-testoptions#test-options-browser-name",children:"testOptions.browserName"})}),(0,n.jsxs)(t.td,{style:{textAlign:"left"},children:["\u57f7\u884c\u6e2c\u8a66\u7684\u700f\u89bd\u5668\u540d\u7a31\u3002\u9810\u8a2d\u70ba 'chromium'\u3002\u9078\u9805\u5305\u62ec ",(0,n.jsx)(t.code,{children:"chromium"}),"\u3001",(0,n.jsx)(t.code,{children:"firefox"})," \u6216 ",(0,n.jsx)(t.code,{children:"webkit"}),"\u3002"]})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.a,{href:"/docs/api/class-testoptions#test-options-bypass-csp",children:"testOptions.bypassCSP"})}),(0,n.jsxs)(t.td,{style:{textAlign:"left"},children:["\u5207\u63db\u7e5e\u904e\u5167\u5bb9\u5b89\u5168\u653f\u7b56\uff08CSP\uff09\u3002\u7576 CSP \u5305\u542b\u751f\u7522\u4f86\u6e90\u6642\u5f88\u6709\u7528\u3002\u9810\u8a2d\u70ba ",(0,n.jsx)(t.code,{children:"false"}),"\u3002"]})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.a,{href:"/docs/api/class-testoptions#test-options-channel",children:"testOptions.channel"})}),(0,n.jsxs)(t.td,{style:{textAlign:"left"},children:["\u8981\u4f7f\u7528\u7684\u700f\u89bd\u5668\u983b\u9053\u3002\u4e86\u89e3\u66f4\u591a\u95dc\u65bc\u4e0d\u540c\u700f\u89bd\u5668\u548c\u983b\u9053\u7684",(0,n.jsx)(t.a,{href:"/docs/browsers",children:"\u8cc7\u8a0a"}),"\u3002"]})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.a,{href:"/docs/api/class-testoptions#test-options-headless",children:"testOptions.headless"})}),(0,n.jsxs)(t.td,{style:{textAlign:"left"},children:["\u662f\u5426\u5728\u7121\u982d\u6a21\u5f0f\u4e0b\u57f7\u884c\u700f\u89bd\u5668\uff0c\u9019\u610f\u5473\u8457\u5728\u57f7\u884c\u6e2c\u8a66\u6642\u4e0d\u986f\u793a\u700f\u89bd\u5668\u3002\u9810\u8a2d\u70ba ",(0,n.jsx)(t.code,{children:"true"}),"\u3002"]})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.a,{href:"/docs/api/class-testoptions#test-options-test-id-attribute",children:"testOptions.testIdAttribute"})}),(0,n.jsxs)(t.td,{style:{textAlign:"left"},children:["\u66f4\u6539 Playwright \u5b9a\u4f4d\u5668\u4f7f\u7528\u7684\u9810\u8a2d",(0,n.jsxs)(t.a,{href:"/docs/locators#locate-by-test-id",children:[(0,n.jsx)(t.code,{children:"data-testid"}),"\u5c6c\u6027"]}),"\u3002"]})]})]})]}),"\n",(0,n.jsx)(t.h3,{id:"\u66f4\u591a\u700f\u89bd\u5668\u548c\u4e0a\u4e0b\u6587\u9078\u9805",children:"\u66f4\u591a\u700f\u89bd\u5668\u548c\u4e0a\u4e0b\u6587\u9078\u9805"}),"\n",(0,n.jsxs)(t.p,{children:["\u4efb\u4f55\u7531 ",(0,n.jsx)(t.a,{href:"/docs/api/class-browsertype#browser-type-launch",children:"browserType.launch()"})," \u6216 ",(0,n.jsx)(t.a,{href:"/docs/api/class-browser#browser-new-context",children:"browser.newContext()"})," \u63a5\u53d7\u7684\u9078\u9805\u53ef\u4ee5\u5206\u5225\u653e\u5165 ",(0,n.jsx)(t.code,{children:"launchOptions"})," \u6216 ",(0,n.jsx)(t.code,{children:"contextOptions"})," \u4e2d\u7684 ",(0,n.jsx)(t.code,{children:"use"})," \u90e8\u5206\u3002"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-js",metastring:'title="playwright.config.ts"',children:"import { defineConfig } from '@playwright/test';\n\nexport default defineConfig({\n  use: {\n    launchOptions: {\n      slowMo: 50,\n    },\n  },\n});\n"})}),"\n",(0,n.jsxs)(t.p,{children:["\u7136\u800c\uff0c\u5927\u591a\u6578\u5e38\u898b\u7684\u9078\u9805\u5982 ",(0,n.jsx)(t.code,{children:"headless"})," \u6216 ",(0,n.jsx)(t.code,{children:"viewport"})," \u53ef\u4ee5\u76f4\u63a5\u5728 ",(0,n.jsx)(t.code,{children:"use"})," \u90e8\u5206\u4f7f\u7528 - \u8acb\u53c3\u898b",(0,n.jsx)(t.a,{href:"#basic-options",children:"\u57fa\u672c\u9078\u9805"}),"\u3001",(0,n.jsx)(t.a,{href:"#emulation-options",children:"\u6a21\u64ec"}),"\u6216",(0,n.jsx)(t.a,{href:"#network-options",children:"\u7db2\u7d61"}),"\u3002"]}),"\n",(0,n.jsx)(t.h3,{id:"\u660e\u78ba\u7684\u4e0a\u4e0b\u6587\u5efa\u7acb\u548c\u9078\u9805\u7e7c\u627f",children:"\u660e\u78ba\u7684\u4e0a\u4e0b\u6587\u5efa\u7acb\u548c\u9078\u9805\u7e7c\u627f"}),"\n",(0,n.jsxs)(t.p,{children:["\u5982\u679c\u4f7f\u7528\u5167\u5efa\u7684 ",(0,n.jsx)(t.code,{children:"browser"})," fixture\uff0c\u547c\u53eb ",(0,n.jsx)(t.a,{href:"/docs/api/class-browser#browser-new-context",children:"browser.newContext()"})," \u6703\u5efa\u7acb\u4e00\u500b\u7e7c\u627f\u81ea\u914d\u7f6e\u7684 context:"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-js",metastring:'title="playwright.config.ts"',children:"import { defineConfig } from '@playwright/test';\n\nexport default defineConfig({\n  use: {\n    userAgent: 'some custom ua',\n    viewport: { width: 100, height: 100 },\n  },\n});\n"})}),"\n",(0,n.jsx)(t.p,{children:"\u4e00\u500b\u7bc4\u4f8b\u6e2c\u8a66\u8aaa\u660e\u4e86\u521d\u59cb\u4e0a\u4e0b\u6587\u9078\u9805\u7684\u8a2d\u5b9a:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-js",children:"test('should inherit use options on context when using built-in browser fixture', async ({\n  browser,\n}) => {\n  const context = await browser.newContext();\n  const page = await context.newPage();\n  expect(await page.evaluate(() => navigator.userAgent)).toBe('some custom ua');\n  expect(await page.evaluate(() => window.innerWidth)).toBe(100);\n  await context.close();\n});\n"})}),"\n",(0,n.jsx)(t.h3,{id:"\u8a2d\u5b9a\u7bc4\u570d",children:"\u8a2d\u5b9a\u7bc4\u570d"}),"\n",(0,n.jsxs)(t.p,{children:["\u4f60\u53ef\u4ee5\u5168\u57df\u3001\u6bcf\u500b\u5c08\u6848\u6216\u6bcf\u500b\u6e2c\u8a66\u4f86\u914d\u7f6e Playwright\u3002\u4f8b\u5982\uff0c\u4f60\u53ef\u4ee5\u901a\u904e\u5728 Playwright \u914d\u7f6e\u7684 ",(0,n.jsx)(t.code,{children:"use"})," \u9078\u9805\u4e2d\u6dfb\u52a0 ",(0,n.jsx)(t.code,{children:"locale"})," \u4f86\u8a2d\u7f6e\u5168\u57df\u4f7f\u7528\u7684\u8a9e\u8a00\u74b0\u5883\uff0c\u7136\u5f8c\u4f7f\u7528\u914d\u7f6e\u4e2d\u7684 ",(0,n.jsx)(t.code,{children:"project"})," \u9078\u9805\u70ba\u7279\u5b9a\u5c08\u6848\u8986\u84cb\u5b83\u3002\u4f60\u4e5f\u53ef\u4ee5\u901a\u904e\u5728\u6e2c\u8a66\u6587\u4ef6\u4e2d\u6dfb\u52a0 ",(0,n.jsx)(t.code,{children:"test.use({})"})," \u4e26\u50b3\u5165\u9078\u9805\u4f86\u70ba\u7279\u5b9a\u6e2c\u8a66\u8986\u84cb\u5b83\u3002"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-js",metastring:'title="playwright.config.ts"',children:"import { defineConfig } from '@playwright/test';\n\nexport default defineConfig({\n  use: {\n    locale: 'en-GB'\n  },\n});\n"})}),"\n",(0,n.jsxs)(t.p,{children:["\u4f60\u53ef\u4ee5\u4f7f\u7528 Playwright \u8a2d\u5b9a\u4e2d\u7684 ",(0,n.jsx)(t.code,{children:"project"})," \u9078\u9805\u4f86\u8986\u84cb\u7279\u5b9a\u5c08\u6848\u7684\u9078\u9805\u3002"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-js",children:"import { defineConfig, devices } from '@playwright/test';\n\nexport default defineConfig({\n  projects: [\n    {\n      name: 'chromium',\n      use: {\n        ...devices['Desktop Chrome'],\n        locale: 'de-DE',\n      },\n    },\n  ],\n});\n"})}),"\n",(0,n.jsxs)(t.p,{children:["\u60a8\u53ef\u4ee5\u4f7f\u7528 ",(0,n.jsx)(t.code,{children:"test.use()"})," \u65b9\u6cd5\u4e26\u50b3\u5165\u9078\u9805\u4f86\u8986\u84cb\u7279\u5b9a\u6e2c\u8a66\u6587\u4ef6\u7684\u9078\u9805\u3002\u4f8b\u5982\uff0c\u5c0d\u65bc\u7279\u5b9a\u6e2c\u8a66\u4f7f\u7528\u6cd5\u8a9e\u5340\u57df\u4f86\u57f7\u884c\u6e2c\u8a66:"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-js",children:"import { test, expect } from '@playwright/test';\n\ntest.use({ locale: 'fr-FR' });\n\ntest('example', async ({ page }) => {\n  // ...\n});\n"})}),"\n",(0,n.jsx)(t.p,{children:"\u5728 describe \u5340\u584a\u5167\u4e5f\u662f\u4e00\u6a23\u3002\u4f8b\u5982\uff0c\u8981\u5728 describe \u5340\u584a\u4e2d\u4ee5\u6cd5\u8a9e\u5340\u57df\u57f7\u884c\u6e2c\u8a66:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-js",children:"import { test, expect } from '@playwright/test';\n\ntest.describe('french language block', () => {\n\n  test.use({ locale: 'fr-FR' });\n\n  test('example', async ({ page }) => {\n    // ...\n  });\n});\n"})})]})}function h(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(a,{...e})}):a(e)}}}]);