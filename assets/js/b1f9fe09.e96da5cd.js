"use strict";(self.webpackChunkplaywright_dev=self.webpackChunkplaywright_dev||[]).push([[7245],{436:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>d,frontMatter:()=>i,metadata:()=>c,toc:()=>o});var s=t(4848),r=t(8453);t(4235),t(8328),t(3078);const i={id:"class-tracing",title:"Tracing"},a=void 0,c={id:"api/class-tracing",title:"Tracing",description:"API for collecting and saving Playwright Traces. Playwright Traces can be opened in Trace Viewer after Playwright script runs.",source:"@site/versioned_docs/version-stable/api/class-tracing.mdx",sourceDirName:"api",slug:"/api/class-tracing",permalink:"/docs/api/class-tracing",draft:!1,unlisted:!1,tags:[],version:"stable",frontMatter:{id:"class-tracing",title:"Tracing"},sidebar:"api",previous:{title:"Touchscreen",permalink:"/docs/api/class-touchscreen"},next:{title:"Video",permalink:"/docs/api/class-video"}},l={},o=[{value:"Methods",id:"methods",level:2},{value:"start",id:"tracing-start",level:3},{value:"startChunk",id:"tracing-start-chunk",level:3},{value:"stop",id:"tracing-stop",level:3},{value:"stopChunk",id:"tracing-stop-chunk",level:3}];function h(e){const n={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:["API for collecting and saving Playwright Traces. Playwright Traces can be opened in ",(0,s.jsx)(n.a,{href:"/docs/trace-viewer",children:"Trace Viewer"})," after Playwright script runs."]}),"\n",(0,s.jsx)(n.p,{children:"Start recording a trace before performing actions. At the end, stop tracing and save it to a file."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"const browser = await chromium.launch();\nconst context = await browser.newContext();\nawait context.tracing.start({ screenshots: true, snapshots: true });\nconst page = await context.newPage();\nawait page.goto('https://playwright.dev');\nawait context.tracing.stop({ path: 'trace.zip' });\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"methods",children:"Methods"}),"\n",(0,s.jsx)(n.h3,{id:"tracing-start",children:"start"}),"\n",(0,s.jsx)("font",{size:"2",style:{position:"relative",top:"-20px"},children:"Added in: v1.12"}),"\n",(0,s.jsx)("x-search",{children:"tracing.start"}),"\n",(0,s.jsx)(n.p,{children:"Start tracing."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Usage"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"await context.tracing.start({ screenshots: true, snapshots: true });\nconst page = await context.newPage();\nawait page.goto('https://playwright.dev');\nawait context.tracing.stop({ path: 'trace.zip' });\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"options"})," ",(0,s.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object",title:"Object",children:"Object"})," ",(0,s.jsx)(n.em,{children:"(optional)"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"name"})," ",(0,s.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type",title:"string",children:"string"})," ",(0,s.jsx)(n.em,{children:"(optional)"}),(0,s.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"tracing-start-option-name"}),(0,s.jsx)("a",{href:"#tracing-start-option-name",class:"list-anchor",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["If specified, intermediate trace files are going to be saved into the files with the given name prefix inside the ",(0,s.jsx)(n.code,{children:"tracesDir"})," folder specified in ",(0,s.jsx)(n.a,{href:"/docs/api/class-browsertype#browser-type-launch",children:"browserType.launch()"}),". To specify the final trace zip file name, you need to pass ",(0,s.jsx)(n.code,{children:"path"})," option to ",(0,s.jsx)(n.a,{href:"/docs/api/class-tracing#tracing-stop",children:"tracing.stop()"})," instead."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"screenshots"})," ",(0,s.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type",title:"Boolean",children:"boolean"})," ",(0,s.jsx)(n.em,{children:"(optional)"}),(0,s.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"tracing-start-option-screenshots"}),(0,s.jsx)("a",{href:"#tracing-start-option-screenshots",class:"list-anchor",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"Whether to capture screenshots during tracing. Screenshots are used to build a timeline preview."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"snapshots"})," ",(0,s.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type",title:"Boolean",children:"boolean"})," ",(0,s.jsx)(n.em,{children:"(optional)"}),(0,s.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"tracing-start-option-snapshots"}),(0,s.jsx)("a",{href:"#tracing-start-option-snapshots",class:"list-anchor",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"If this option is true tracing will"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"capture DOM snapshot on every action"}),"\n",(0,s.jsx)(n.li,{children:"record network activity"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"sources"})," ",(0,s.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type",title:"Boolean",children:"boolean"})," ",(0,s.jsx)(n.em,{children:"(optional)"})," ",(0,s.jsx)("font",{size:"2",children:"Added in: v1.17"}),(0,s.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"tracing-start-option-sources"}),(0,s.jsx)("a",{href:"#tracing-start-option-sources",class:"list-anchor",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"Whether to include source files for trace actions."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"title"})," ",(0,s.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type",title:"string",children:"string"})," ",(0,s.jsx)(n.em,{children:"(optional)"})," ",(0,s.jsx)("font",{size:"2",children:"Added in: v1.17"}),(0,s.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"tracing-start-option-title"}),(0,s.jsx)("a",{href:"#tracing-start-option-title",class:"list-anchor",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"Trace name to be shown in the Trace Viewer."}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Returns"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise",title:"Promise",children:"Promise"}),"<",(0,s.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined",title:"void",children:"void"}),">",(0,s.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"tracing-start-return"}),(0,s.jsx)("a",{href:"#tracing-start-return",class:"list-anchor",children:"#"})]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"tracing-start-chunk",children:"startChunk"}),"\n",(0,s.jsx)("font",{size:"2",style:{position:"relative",top:"-20px"},children:"Added in: v1.15"}),"\n",(0,s.jsx)("x-search",{children:"tracing.startChunk"}),"\n",(0,s.jsxs)(n.p,{children:["Start a new trace chunk. If you'd like to record multiple traces on the same ",(0,s.jsx)(n.a,{href:"/docs/api/class-browsercontext",title:"BrowserContext",children:"BrowserContext"}),", use ",(0,s.jsx)(n.a,{href:"/docs/api/class-tracing#tracing-start",children:"tracing.start()"})," once, and then create multiple trace chunks with ",(0,s.jsx)(n.a,{href:"/docs/api/class-tracing#tracing-start-chunk",children:"tracing.startChunk()"})," and ",(0,s.jsx)(n.a,{href:"/docs/api/class-tracing#tracing-stop-chunk",children:"tracing.stopChunk()"}),"."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Usage"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"await context.tracing.start({ screenshots: true, snapshots: true });\nconst page = await context.newPage();\nawait page.goto('https://playwright.dev');\n\nawait context.tracing.startChunk();\nawait page.getByText('Get Started').click();\n// Everything between startChunk and stopChunk will be recorded in the trace.\nawait context.tracing.stopChunk({ path: 'trace1.zip' });\n\nawait context.tracing.startChunk();\nawait page.goto('http://example.com');\n// Save a second trace file with different actions.\nawait context.tracing.stopChunk({ path: 'trace2.zip' });\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"options"})," ",(0,s.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object",title:"Object",children:"Object"})," ",(0,s.jsx)(n.em,{children:"(optional)"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"name"})," ",(0,s.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type",title:"string",children:"string"})," ",(0,s.jsx)(n.em,{children:"(optional)"})," ",(0,s.jsx)("font",{size:"2",children:"Added in: v1.32"}),(0,s.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"tracing-start-chunk-option-name"}),(0,s.jsx)("a",{href:"#tracing-start-chunk-option-name",class:"list-anchor",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["If specified, intermediate trace files are going to be saved into the files with the given name prefix inside the ",(0,s.jsx)(n.code,{children:"tracesDir"})," folder specified in ",(0,s.jsx)(n.a,{href:"/docs/api/class-browsertype#browser-type-launch",children:"browserType.launch()"}),". To specify the final trace zip file name, you need to pass ",(0,s.jsx)(n.code,{children:"path"})," option to ",(0,s.jsx)(n.a,{href:"/docs/api/class-tracing#tracing-stop-chunk",children:"tracing.stopChunk()"})," instead."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"title"})," ",(0,s.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type",title:"string",children:"string"})," ",(0,s.jsx)(n.em,{children:"(optional)"})," ",(0,s.jsx)("font",{size:"2",children:"Added in: v1.17"}),(0,s.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"tracing-start-chunk-option-title"}),(0,s.jsx)("a",{href:"#tracing-start-chunk-option-title",class:"list-anchor",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"Trace name to be shown in the Trace Viewer."}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Returns"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise",title:"Promise",children:"Promise"}),"<",(0,s.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined",title:"void",children:"void"}),">",(0,s.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"tracing-start-chunk-return"}),(0,s.jsx)("a",{href:"#tracing-start-chunk-return",class:"list-anchor",children:"#"})]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"tracing-stop",children:"stop"}),"\n",(0,s.jsx)("font",{size:"2",style:{position:"relative",top:"-20px"},children:"Added in: v1.12"}),"\n",(0,s.jsx)("x-search",{children:"tracing.stop"}),"\n",(0,s.jsx)(n.p,{children:"Stop tracing."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Usage"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"await tracing.stop();\nawait tracing.stop(options);\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"options"})," ",(0,s.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object",title:"Object",children:"Object"})," ",(0,s.jsx)(n.em,{children:"(optional)"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"path"})," ",(0,s.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type",title:"string",children:"string"})," ",(0,s.jsx)(n.em,{children:"(optional)"}),(0,s.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"tracing-stop-option-path"}),(0,s.jsx)("a",{href:"#tracing-stop-option-path",class:"list-anchor",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"Export trace into the file with the given path."}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Returns"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise",title:"Promise",children:"Promise"}),"<",(0,s.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined",title:"void",children:"void"}),">",(0,s.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"tracing-stop-return"}),(0,s.jsx)("a",{href:"#tracing-stop-return",class:"list-anchor",children:"#"})]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"tracing-stop-chunk",children:"stopChunk"}),"\n",(0,s.jsx)("font",{size:"2",style:{position:"relative",top:"-20px"},children:"Added in: v1.15"}),"\n",(0,s.jsx)("x-search",{children:"tracing.stopChunk"}),"\n",(0,s.jsxs)(n.p,{children:["Stop the trace chunk. See ",(0,s.jsx)(n.a,{href:"/docs/api/class-tracing#tracing-start-chunk",children:"tracing.startChunk()"})," for more details about multiple trace chunks."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Usage"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"await tracing.stopChunk();\nawait tracing.stopChunk(options);\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"options"})," ",(0,s.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object",title:"Object",children:"Object"})," ",(0,s.jsx)(n.em,{children:"(optional)"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"path"})," ",(0,s.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type",title:"string",children:"string"})," ",(0,s.jsx)(n.em,{children:"(optional)"}),(0,s.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"tracing-stop-chunk-option-path"}),(0,s.jsx)("a",{href:"#tracing-stop-chunk-option-path",class:"list-anchor",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["Export trace collected since the last ",(0,s.jsx)(n.a,{href:"/docs/api/class-tracing#tracing-start-chunk",children:"tracing.startChunk()"})," call into the file with the given path."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Returns"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise",title:"Promise",children:"Promise"}),"<",(0,s.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined",title:"void",children:"void"}),">",(0,s.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"tracing-stop-chunk-return"}),(0,s.jsx)("a",{href:"#tracing-stop-chunk-return",class:"list-anchor",children:"#"})]}),"\n"]})]})}function d(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}}}]);