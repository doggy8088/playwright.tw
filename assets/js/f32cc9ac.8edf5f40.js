"use strict";(self.webpackChunkplaywright_dev=self.webpackChunkplaywright_dev||[]).push([[4795],{9056:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>p,frontMatter:()=>i,metadata:()=>a,toc:()=>l});var s=n(4848),r=n(8453);n(4235),n(8328),n(3078);const i={id:"test-projects",title:"Projects"},o=void 0,a={id:"test-projects",title:"Projects",description:"Introduction",source:"@site/docs/test-projects.mdx",sourceDirName:".",slug:"/test-projects",permalink:"/docs/next/test-projects",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{id:"test-projects",title:"Projects"},sidebar:"docs",previous:{title:"Parameterize tests",permalink:"/docs/next/test-parameterize"},next:{title:"Reporters",permalink:"/docs/next/test-reporters"}},c={},l=[{value:"Introduction",id:"introduction",level:2},{value:"Configure projects for multiple browsers",id:"configure-projects-for-multiple-browsers",level:2},{value:"Run projects",id:"run-projects",level:2},{value:"Configure projects for multiple environments",id:"configure-projects-for-multiple-environments",level:2},{value:"Splitting tests into projects",id:"splitting-tests-into-projects",level:2},{value:"Dependencies",id:"dependencies",level:2},{value:"Running Sequence",id:"running-sequence",level:3},{value:"Teardown",id:"teardown",level:3},{value:"Test filtering",id:"test-filtering",level:3},{value:"Custom project parameters",id:"custom-project-parameters",level:2}];function d(e){const t={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.h2,{id:"introduction",children:"Introduction"}),"\n",(0,s.jsxs)(t.p,{children:["A project is logical group of tests running with the same configuration. We use projects so we can run tests on different browsers and devices. Projects are configured in the ",(0,s.jsx)(t.code,{children:"playwright.config.ts"})," file and once configured you can then run your tests on all projects or only on a specific project. You can also use projects to run the same tests in different configurations. For example, you can run the same tests in a logged-in and logged-out state."]}),"\n",(0,s.jsx)(t.p,{children:"By setting up projects you can also run a group of tests with different timeouts or retries or a group of tests against different environments such as staging and production, splitting tests per package/functionality and more."}),"\n",(0,s.jsx)(t.h2,{id:"configure-projects-for-multiple-browsers",children:"Configure projects for multiple browsers"}),"\n",(0,s.jsxs)(t.p,{children:["By using ",(0,s.jsx)(t.strong,{children:"projects"})," you can run your tests in multiple browsers such as chromium, webkit and firefox as well as branded browsers such as Google Chrome and Microsoft Edge. Playwright can also run on emulated tablet and mobile devices. See the ",(0,s.jsx)(t.a,{href:"https://github.com/microsoft/playwright/blob/main/packages/playwright-core/src/server/deviceDescriptorsSource.json",children:"registry of device parameters"})," for a complete list of selected desktop, tablet and mobile devices."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-js",children:"import { defineConfig, devices } from '@playwright/test';\n\nexport default defineConfig({\n  projects: [\n    {\n      name: 'chromium',\n      use: { ...devices['Desktop Chrome'] },\n    },\n\n    {\n      name: 'firefox',\n      use: { ...devices['Desktop Firefox'] },\n    },\n\n    {\n      name: 'webkit',\n      use: { ...devices['Desktop Safari'] },\n    },\n\n    /* Test against mobile viewports. */\n    {\n      name: 'Mobile Chrome',\n      use: { ...devices['Pixel 5'] },\n    },\n    {\n      name: 'Mobile Safari',\n      use: { ...devices['iPhone 12'] },\n    },\n\n    /* Test against branded browsers. */\n    {\n      name: 'Microsoft Edge',\n      use: {\n        ...devices['Desktop Edge'],\n        channel: 'msedge'\n      },\n    },\n    {\n      name: 'Google Chrome',\n      use: {\n        ...devices['Desktop Chrome'],\n        channel: 'chrome'\n      },\n    },\n  ],\n});\n"})}),"\n",(0,s.jsx)(t.h2,{id:"run-projects",children:"Run projects"}),"\n",(0,s.jsx)(t.p,{children:"Playwright will run all projects by default."}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"npx playwright test\n\nRunning 7 tests using 5 workers\n\n  \u2713 [chromium] \u203a example.spec.ts:3:1 \u203a basic test (2s)\n  \u2713 [firefox] \u203a example.spec.ts:3:1 \u203a basic test (2s)\n  \u2713 [webkit] \u203a example.spec.ts:3:1 \u203a basic test (2s)\n  \u2713 [Mobile Chrome] \u203a example.spec.ts:3:1 \u203a basic test (2s)\n  \u2713 [Mobile Safari] \u203a example.spec.ts:3:1 \u203a basic test (2s)\n  \u2713 [Microsoft Edge] \u203a example.spec.ts:3:1 \u203a basic test (2s)\n  \u2713 [Google Chrome] \u203a example.spec.ts:3:1 \u203a basic test (2s)\n"})}),"\n",(0,s.jsxs)(t.p,{children:["Use the ",(0,s.jsx)(t.code,{children:"--project"})," command line option to run a single project."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"npx playwright test --project=firefox\n\nRunning 1 test using 1 worker\n\n  \u2713 [firefox] \u203a example.spec.ts:3:1 \u203a basic test (2s)\n"})}),"\n",(0,s.jsxs)(t.p,{children:["The VS Code test runner runs your tests on the default browser of Chrome. To run on other/multiple browsers click the play button's dropdown from the testing sidebar and choose another profile or modify the default profile by clicking ",(0,s.jsx)(t.strong,{children:"Select Default Profile"})," and select the browsers you wish to run your tests on."]}),"\n",(0,s.jsx)("img",{width:"1464",alt:"selecting browsers",src:"https://user-images.githubusercontent.com/13063165/221136731-9d4bc18f-38a4-4adb-997b-5b98c98aec7f.png"}),"\n",(0,s.jsx)(t.p,{children:"Choose a specific profile, various profiles or all profiles to run tests on."}),"\n",(0,s.jsx)("img",{width:"1536",alt:"choosing default profiles",src:"https://user-images.githubusercontent.com/13063165/221669537-e5df8672-f50d-4ff1-96f9-141cd67e12f8.png"}),"\n",(0,s.jsx)(t.h2,{id:"configure-projects-for-multiple-environments",children:"Configure projects for multiple environments"}),"\n",(0,s.jsx)(t.p,{children:"By setting up projects we can also run a group of tests with different timeouts or retries or run a group of tests against different environments. For example we can run our tests against a staging environment with 2 retries as well as against a production environment with 0 retries."}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-js",metastring:'title="playwright.config.ts"',children:"import { defineConfig } from '@playwright/test';\n\nexport default defineConfig({\n  timeout: 60000, // Timeout is shared between all tests.\n  projects: [\n    {\n      name: 'staging',\n      use: {\n        baseURL: 'staging.example.com',\n      },\n      retries: 2,\n    },\n    {\n      name: 'production',\n      use: {\n        baseURL: 'production.example.com',\n      },\n      retries: 0,\n    },\n  ],\n});\n"})}),"\n",(0,s.jsx)(t.h2,{id:"splitting-tests-into-projects",children:"Splitting tests into projects"}),"\n",(0,s.jsx)(t.p,{children:"We can split tests into projects and use filters to run a subset of tests. For example, we can create a project that runs tests using a filter matching all tests with a specific file name. We can then have another group of tests that ignore specific test files."}),"\n",(0,s.jsx)(t.p,{children:'Here is an example that defines a common timeout and two projects. The "Smoke" project runs a small subset of tests without retries, and "Default" project runs all other tests with retries.'}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-js",metastring:'title="playwright.config.ts"',children:"import { defineConfig } from '@playwright/test';\n\nexport default defineConfig({\n  timeout: 60000, // Timeout is shared between all tests.\n  projects: [\n    {\n      name: 'Smoke',\n      testMatch: /.*smoke.spec.ts/,\n      retries: 0,\n    },\n    {\n      name: 'Default',\n      testIgnore: /.*smoke.spec.ts/,\n      retries: 2,\n    },\n  ],\n});\n"})}),"\n",(0,s.jsx)(t.h2,{id:"dependencies",children:"Dependencies"}),"\n",(0,s.jsxs)(t.p,{children:["Dependencies are a list of projects that need to run before the tests in another project run. They can be useful for configuring the global setup actions so that one project depends on this running first. When using project dependencies, ",(0,s.jsx)(t.a,{href:"/docs/next/test-reporters",children:"test reporters"})," will show the setup tests and the ",(0,s.jsx)(t.a,{href:"/docs/next/trace-viewer",children:"trace viewer"})," will record traces of the setup. You can use the inspector to inspect the DOM snapshot of the trace of your setup tests and you can also use ",(0,s.jsx)(t.a,{href:"/docs/next/test-fixtures",children:"fixtures"})," inside your setup."]}),"\n",(0,s.jsx)(t.p,{children:"In this example the chromium, firefox and webkit projects depend on the setup project."}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-js",metastring:'title="playwright.config.ts"',children:"import { defineConfig } from '@playwright/test';\n\nexport default defineConfig({\n  projects: [\n    {\n      name: 'setup',\n      testMatch: '**/*.setup.ts',\n    },\n    {\n      name: 'chromium',\n      use: { ...devices['Desktop Chrome'] },\n      dependencies: ['setup'],\n    },\n    {\n      name: 'firefox',\n      use: { ...devices['Desktop Firefox'] },\n      dependencies: ['setup'],\n    },\n    {\n      name: 'webkit',\n      use: { ...devices['Desktop Safari'] },\n      dependencies: ['setup'],\n    },\n  ],\n});\n"})}),"\n",(0,s.jsx)(t.h3,{id:"running-sequence",children:"Running Sequence"}),"\n",(0,s.jsx)(t.p,{children:"When working with tests that have a dependency, the dependency will always run first and once all tests from this project have passed, then the other projects will run in parallel."}),"\n",(0,s.jsx)(t.p,{children:"Running order:"}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"Tests in the 'setup' project run. Once all tests from this project have passed, then the tests from the dependent projects will start running."}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:["Tests in the 'chromium', 'webkit' and 'firefox' projects run together. By default, these projects will ",(0,s.jsx)(t.a,{href:"/docs/next/test-parallel",children:"run in parallel"}),", subject to the maximum workers limit."]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)("img",{width:"70%",style:{display:"flex",margin:"auto"},alt:"chromium, webkit and firefox projects depend on setup project",loading:"lazy",src:"https://user-images.githubusercontent.com/13063165/225937080-327b1e63-431f-40e0-90d7-35f21d7a92cb.jpg"}),"\n",(0,s.jsx)(t.p,{children:"If there are more than one dependency then these project dependencies will be run first and in parallel. If the tests from a dependency fails then the tests that rely on this project will not be run."}),"\n",(0,s.jsx)(t.p,{children:"Running order:"}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsxs)(t.li,{children:["Tests in the 'Browser Login' and 'DataBase' projects run in parallel:","\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"'Browser Login' passes"}),"\n",(0,s.jsx)(t.li,{children:"\u274c 'DataBase' fails!"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(t.li,{children:"The 'e2e tests' project is not run!"}),"\n"]}),"\n",(0,s.jsx)("img",{width:"70%",style:{display:"flex",margin:"auto"},alt:"Browser login project is blue, database is red and e2e tests relies on both",loading:"lazy",src:"https://user-images.githubusercontent.com/13063165/225938262-33c1b78f-f092-4762-a478-7f8cbc1e3b21.jpg"}),"\n",(0,s.jsx)(t.h3,{id:"teardown",children:"Teardown"}),"\n",(0,s.jsxs)(t.p,{children:["You can also teardown your setup by adding a ",(0,s.jsx)(t.a,{href:"/docs/next/api/class-testproject#test-project-teardown",children:"testProject.teardown"})," property to your setup project. Teardown will run after all dependent projects have run. See the ",(0,s.jsx)(t.a,{href:"/docs/next/test-global-setup-teardown#teardown",children:"teardown guide"})," for more information."]}),"\n",(0,s.jsx)("img",{style:{display:"flex",margin:"auto"},alt:"global setup and teardown",loading:"lazy",src:"https://github.com/microsoft/playwright/assets/13063165/dfcf10a9-f601-4d0c-bd8d-9490e6efbf7a"}),"\n",(0,s.jsx)(t.h3,{id:"test-filtering",children:"Test filtering"}),"\n",(0,s.jsxs)(t.p,{children:["If ",(0,s.jsx)(t.code,{children:"--grep/--grep-invert"})," or ",(0,s.jsx)(t.code,{children:"--shard"})," ",(0,s.jsx)(t.a,{href:"/docs/next/test-cli#reference",children:"option"})," is used, test file name filter is specified in ",(0,s.jsx)(t.a,{href:"/docs/next/test-cli",children:"command line"})," or ",(0,s.jsx)(t.a,{href:"/docs/next/api/class-test#test-only",children:"test.only()"})," is used, it will only apply to the tests from the deepest projects in the project dependency chain. In other words, if a matching test belongs to a project that has project dependencies, Playwright will run all the tests from the project dependencies ignoring the filters."]}),"\n",(0,s.jsx)(t.h2,{id:"custom-project-parameters",children:"Custom project parameters"}),"\n",(0,s.jsxs)(t.p,{children:["Projects can be also used to parametrize tests with your custom configuration - take a look at ",(0,s.jsx)(t.a,{href:"/docs/next/test-parameterize#parameterized-projects",children:"this separate guide"}),"."]})]})}function p(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);