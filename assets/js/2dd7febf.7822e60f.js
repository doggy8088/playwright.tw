"use strict";(self.webpackChunkplaywright_dev=self.webpackChunkplaywright_dev||[]).push([[5913],{8898:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>c,contentTitle:()=>d,default:()=>p,frontMatter:()=>o,metadata:()=>a,toc:()=>h});var i=n(4848),t=n(8453),r=n(4235),l=n(8328);n(3078);const o={id:"videos",title:"\u9304\u5f71"},d=void 0,a={id:"videos",title:"\u9304\u5f71",description:"\u7c21\u4ecb",source:"@site/versioned_docs/version-stable/videos.mdx",sourceDirName:".",slug:"/videos",permalink:"/docs/videos",draft:!1,unlisted:!1,tags:[],version:"stable",frontMatter:{id:"videos",title:"\u9304\u5f71"},sidebar:"docs",previous:{title:"\u8ffd\u8e64\u6aa2\u8996\u5668",permalink:"/docs/trace-viewer"},next:{title:"WebView2",permalink:"/docs/webview2"}},c={},h=[{value:"\u7c21\u4ecb",id:"\u7c21\u4ecb",level:2},{value:"\u9304\u88fd\u5f71\u7247",id:"\u9304\u88fd\u5f71\u7247",level:2}];function x(e){const s={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.h2,{id:"\u7c21\u4ecb",children:"\u7c21\u4ecb"}),"\n",(0,i.jsx)(s.p,{children:"\u4f7f\u7528 Playwright\uff0c\u4f60\u53ef\u4ee5\u9304\u88fd\u6e2c\u8a66\u7684\u5f71\u7247\u3002"}),"\n",(0,i.jsx)(s.h2,{id:"\u9304\u88fd\u5f71\u7247",children:"\u9304\u88fd\u5f71\u7247"}),"\n",(0,i.jsxs)(s.p,{children:["Playwright Test \u53ef\u4ee5\u70ba\u60a8\u7684\u6e2c\u8a66\u9304\u88fd\u5f71\u7247, \u7531 Playwright \u914d\u7f6e\u4e2d\u7684 ",(0,i.jsx)(s.code,{children:"video"})," \u9078\u9805\u63a7\u5236\u3002\u9810\u8a2d\u60c5\u6cc1\u4e0b\u5f71\u7247\u662f\u95dc\u9589\u7684\u3002"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"'off'"})," - \u4e0d\u9304\u88fd \u5f71\u7247\u3002"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"'on'"})," - \u70ba\u6bcf\u500b\u6e2c\u8a66\u9304\u88fd \u5f71\u7247\u3002"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"'retain-on-failure'"})," - \u70ba\u6bcf\u500b\u6e2c\u8a66\u9304\u88fd \u5f71\u7247\uff0c\u4f46\u79fb\u9664\u6240\u6709\u6210\u529f\u6e2c\u8a66\u57f7\u884c\u7684 \u5f71\u7247\u3002"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"'on-first-retry'"})," - \u50c5\u5728\u7b2c\u4e00\u6b21\u91cd\u8a66\u6e2c\u8a66\u6642\u9304\u88fd \u5f71\u7247\u3002"]}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:["\u5f71\u7247\u6a94\u6848\u5c07\u51fa\u73fe\u5728\u6e2c\u8a66\u8f38\u51fa\u76ee\u9304\u4e2d\uff0c\u901a\u5e38\u662f ",(0,i.jsx)(s.code,{children:"test-results"}),"\u3002\u8acb\u53c3\u95b1 ",(0,i.jsx)(s.a,{href:"/docs/api/class-testoptions#test-options-video",children:"testOptions.video"})," \u4ee5\u9032\u884c\u9ad8\u7d1a\u5f71\u7247\u914d\u7f6e\u3002"]}),"\n",(0,i.jsxs)(s.p,{children:["\u5f71\u7247\u6703\u5728\u6e2c\u8a66\u7d50\u675f\u6642\u65bc ",(0,i.jsx)(s.a,{href:"/docs/browser-contexts",children:"browser context"})," \u95dc\u9589\u6642\u5132\u5b58\u3002\u5982\u679c\u4f60\u624b\u52d5\u5efa\u7acb\u4e00\u500b browser context\uff0c\u8acb\u78ba\u4fdd\u7b49\u5f85 ",(0,i.jsx)(s.a,{href:"/docs/api/class-browsercontext#browser-context-close",children:"browserContext.close()"})," \u3002"]}),"\n",(0,i.jsxs)(r.A,{groupId:"js-flavor",defaultValue:"test",values:[{label:"Test",value:"test"},{label:"Library",value:"library"}],children:[(0,i.jsx)(l.A,{value:"test",children:(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-js",metastring:'title="playwright.config.ts"',children:"import { defineConfig } from '@playwright/test';\nexport default defineConfig({\n  use: {\n    video: 'on-first-retry',\n  },\n});\n"})})}),(0,i.jsx)(l.A,{value:"library",children:(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-js",children:"const context = await browser.newContext({ recordVideo: { dir: 'videos/' } });\n// Make sure to await close, so that videos are saved.\nawait context.close();\n"})})})]}),"\n",(0,i.jsx)(s.p,{children:"\u60a8\u4e5f\u53ef\u4ee5\u6307\u5b9a\u5f71\u7247\u5927\u5c0f\u3002\u5f71\u7247\u5927\u5c0f\u9810\u8a2d\u70ba\u7e2e\u5c0f\u4ee5\u9069\u61c9 800x800 \u7684\u8996\u53e3\u5927\u5c0f\u3002\u8996\u53e3\u7684\u5f71\u7247\u653e\u7f6e\u5728\u8f38\u51fa\u5f71\u7247\u7684\u5de6\u4e0a\u89d2\uff0c\u5fc5\u8981\u6642\u7e2e\u5c0f\u4ee5\u9069\u61c9\u3002\u60a8\u53ef\u80fd\u9700\u8981\u8a2d\u5b9a\u8996\u53e3\u5927\u5c0f\u4ee5\u5339\u914d\u6240\u9700\u7684\u5f71\u7247\u5927\u5c0f\u3002"}),"\n",(0,i.jsxs)(r.A,{groupId:"js-flavor",defaultValue:"test",values:[{label:"Test",value:"test"},{label:"Library",value:"library"}],children:[(0,i.jsx)(l.A,{value:"test",children:(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-js",metastring:'title="playwright.config.ts"',children:"import { defineConfig } from '@playwright/test';\nexport default defineConfig({\n  use: {\n    video: {\n      mode: 'on-first-retry',\n      size: { width: 640, height: 480 }\n    }\n  },\n});\n"})})}),(0,i.jsx)(l.A,{value:"library",children:(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-js",children:"const context = await browser.newContext({\n  recordVideo: {\n    dir: 'videos/',\n    size: { width: 640, height: 480 },\n  }\n});\n"})})})]}),"\n",(0,i.jsxs)(s.p,{children:["\u5c0d\u65bc\u591a\u9801\u9762\u5834\u666f\uff0c\u4f60\u53ef\u4ee5\u901a\u904e ",(0,i.jsx)(s.a,{href:"/docs/api/class-page#page-video",children:"page.video()"})," \u8a2a\u554f\u8207\u9801\u9762\u76f8\u95dc\u7684\u5f71\u7247\u6587\u4ef6\u3002"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-js",children:"const path = await page.video().path();\n"})}),"\n",(0,i.jsx)(s.admonition,{type:"note",children:(0,i.jsx)(s.p,{children:"\u8acb\u6ce8\u610f\uff0c\u5f71\u7247\u50c5\u5728\u9801\u9762\u6216\u700f\u89bd\u5668\u4e0a\u4e0b\u6587\u95dc\u9589\u5f8c\u53ef\u7528\u3002"})})]})}function p(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(x,{...e})}):x(e)}}}]);