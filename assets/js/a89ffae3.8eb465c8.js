"use strict";(self.webpackChunkplaywright_dev=self.webpackChunkplaywright_dev||[]).push([[1846],{7087:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>o,contentTitle:()=>r,default:()=>d,frontMatter:()=>l,metadata:()=>a,toc:()=>c});var n=s(4848),i=s(8453);s(4235),s(8328),s(3078);const l={id:"writing-tests",title:"Writing tests"},r=void 0,a={id:"writing-tests",title:"Writing tests",description:"Introduction",source:"@site/docs/writing-tests.mdx",sourceDirName:".",slug:"/writing-tests",permalink:"/docs/next/writing-tests",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{id:"writing-tests",title:"Writing tests"},sidebar:"docs",previous:{title:"Installation",permalink:"/docs/next/intro"},next:{title:"Generating tests",permalink:"/docs/next/codegen-intro"}},o={},c=[{value:"Introduction",id:"introduction",level:2},{value:"First test",id:"first-test",level:2},{value:"Actions",id:"actions",level:2},{value:"Navigation",id:"navigation",level:3},{value:"Interactions",id:"interactions",level:3},{value:"Basic actions",id:"basic-actions",level:3},{value:"Assertions",id:"assertions",level:2},{value:"Test Isolation",id:"test-isolation",level:3},{value:"Using Test Hooks",id:"using-test-hooks",level:3},{value:"What&#39;s Next",id:"whats-next",level:2}];function h(e){const t={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.h2,{id:"introduction",children:"Introduction"}),"\n",(0,n.jsx)(t.p,{children:"Playwright tests are simple, they"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"perform actions"}),", and"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"assert the state"})," against expectations."]}),"\n"]}),"\n",(0,n.jsxs)(t.p,{children:["There is no need to wait for anything prior to performing an action: Playwright automatically waits for the wide range of ",(0,n.jsx)(t.a,{href:"/docs/next/actionability",children:"actionability"})," checks to pass prior to performing each action."]}),"\n",(0,n.jsx)(t.p,{children:"There is also no need to deal with the race conditions when performing the checks - Playwright assertions are designed in a way that they describe the expectations that need to be eventually met."}),"\n",(0,n.jsx)(t.p,{children:"That's it! These design choices allow Playwright users to forget about flaky timeouts and racy checks in their tests altogether."}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.strong,{children:"You will learn"})}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.a,{href:"/docs/next/writing-tests#first-test",children:"How to write the first test"})}),"\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.a,{href:"/docs/next/writing-tests#actions",children:"How to perform actions"})}),"\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.a,{href:"/docs/next/writing-tests#assertions",children:"How to use assertions"})}),"\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.a,{href:"/docs/next/writing-tests#test-isolation",children:"How tests run in isolation"})}),"\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.a,{href:"/docs/next/writing-tests#using-test-hooks",children:"How to use test hooks"})}),"\n"]}),"\n",(0,n.jsx)(t.h2,{id:"first-test",children:"First test"}),"\n",(0,n.jsx)(t.p,{children:"Take a look at the following example to see how to write a test."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-js",metastring:'title="tests/example.spec.ts"',children:"import { test, expect } from '@playwright/test';\n\ntest('has title', async ({ page }) => {\n  await page.goto('https://playwright.dev/');\n\n  // Expect a title \"to contain\" a substring.\n  await expect(page).toHaveTitle(/Playwright/);\n});\n\ntest('get started link', async ({ page }) => {\n  await page.goto('https://playwright.dev/');\n\n  // Click the get started link.\n  await page.getByRole('link', { name: 'Get started' }).click();\n\n  // Expects page to have a heading with the name of Installation.\n  await expect(page.getByRole('heading', { name: 'Installation' })).toBeVisible();\n});\n"})}),"\n",(0,n.jsx)(t.admonition,{type:"note",children:(0,n.jsxs)(t.p,{children:["Add ",(0,n.jsx)(t.code,{children:"// @ts-check"})," at the start of each test file when using JavaScript in VS Code to get automatic type checking."]})}),"\n",(0,n.jsx)(t.h2,{id:"actions",children:"Actions"}),"\n",(0,n.jsx)(t.h3,{id:"navigation",children:"Navigation"}),"\n",(0,n.jsx)(t.p,{children:"Most of the tests will start with navigating page to the URL. After that, test will be able to interact with the page elements."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-js",children:"await page.goto('https://playwright.dev/');\n"})}),"\n",(0,n.jsxs)(t.p,{children:["Playwright will wait for page to reach the load state prior to moving forward. Learn more about the ",(0,n.jsx)(t.a,{href:"/docs/next/api/class-page#page-goto",children:"page.goto()"})," options."]}),"\n",(0,n.jsx)(t.h3,{id:"interactions",children:"Interactions"}),"\n",(0,n.jsxs)(t.p,{children:["Performing actions starts with locating the elements. Playwright uses ",(0,n.jsx)(t.a,{href:"/docs/next/locators",children:"Locators API"})," for that. Locators represent a way to find element(s) on the page at any moment, learn more about the ",(0,n.jsx)(t.a,{href:"/docs/next/locators",children:"different types"})," of locators available. Playwright will wait for the element to be ",(0,n.jsx)(t.a,{href:"/docs/next/actionability",children:"actionable"})," prior to performing the action, so there is no need to wait for it to become available."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-js",children:"// Create a locator.\nconst getStarted = page.getByRole('link', { name: 'Get started' });\n\n// Click it.\nawait getStarted.click();\n"})}),"\n",(0,n.jsx)(t.p,{children:"In most cases, it'll be written in one line:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-js",children:"await page.getByRole('link', { name: 'Get started' }).click();\n"})}),"\n",(0,n.jsx)(t.h3,{id:"basic-actions",children:"Basic actions"}),"\n",(0,n.jsxs)(t.p,{children:["This is the list of the most popular Playwright actions. Note that there are many more, so make sure to check the ",(0,n.jsx)(t.a,{href:"/docs/next/api/class-locator",children:"Locator API"})," section to learn more about them."]}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Action"}),(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.a,{href:"/docs/next/api/class-locator#locator-check",children:"locator.check()"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Check the input checkbox"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.a,{href:"/docs/next/api/class-locator#locator-click",children:"locator.click()"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Click the element"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.a,{href:"/docs/next/api/class-locator#locator-uncheck",children:"locator.uncheck()"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Uncheck the input checkbox"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.a,{href:"/docs/next/api/class-locator#locator-hover",children:"locator.hover()"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Hover mouse over the element"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.a,{href:"/docs/next/api/class-locator#locator-fill",children:"locator.fill()"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Fill the form field, input text"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.a,{href:"/docs/next/api/class-locator#locator-focus",children:"locator.focus()"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Focus the element"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.a,{href:"/docs/next/api/class-locator#locator-press",children:"locator.press()"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Press single key"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.a,{href:"/docs/next/api/class-locator#locator-set-input-files",children:"locator.setInputFiles()"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Pick files to upload"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.a,{href:"/docs/next/api/class-locator#locator-select-option",children:"locator.selectOption()"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Select option in the drop down"})]})]})]}),"\n",(0,n.jsx)(t.h2,{id:"assertions",children:"Assertions"}),"\n",(0,n.jsxs)(t.p,{children:["Playwright includes ",(0,n.jsx)(t.a,{href:"/docs/next/test-assertions",children:"test assertions"})," in the form of ",(0,n.jsx)(t.code,{children:"expect"})," function. To make an assertion, call ",(0,n.jsx)(t.code,{children:"expect(value)"})," and choose a matcher that reflects the expectation."]}),"\n",(0,n.jsxs)(t.p,{children:["There are many generic matchers like ",(0,n.jsx)(t.code,{children:"toEqual"}),", ",(0,n.jsx)(t.code,{children:"toContain"}),", ",(0,n.jsx)(t.code,{children:"toBeTruthy"})," that can be used to assert any conditions."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-js",children:"expect(success).toBeTruthy();\n"})}),"\n",(0,n.jsx)(t.p,{children:'Playwright also includes async matchers that will wait until the expected condition is met. Using these matchers allows making the tests non-flaky and resilient. For example, this code will wait until the page gets the title containing "Playwright":'}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-js",children:"await expect(page).toHaveTitle(/Playwright/);\n"})}),"\n",(0,n.jsxs)(t.p,{children:["Here is the list of the most popular async assertions. Note that there are ",(0,n.jsx)(t.a,{href:"/docs/next/test-assertions",children:"many more"})," to get familiar with:"]}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Assertion"}),(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.a,{href:"/docs/next/api/class-locatorassertions#locator-assertions-to-be-checked",children:"expect(locator).toBeChecked()"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Checkbox is checked"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.a,{href:"/docs/next/api/class-locatorassertions#locator-assertions-to-be-enabled",children:"expect(locator).toBeEnabled()"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Control is enabled"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.a,{href:"/docs/next/api/class-locatorassertions#locator-assertions-to-be-visible",children:"expect(locator).toBeVisible()"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Element is visible"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.a,{href:"/docs/next/api/class-locatorassertions#locator-assertions-to-contain-text",children:"expect(locator).toContainText()"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Element contains text"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.a,{href:"/docs/next/api/class-locatorassertions#locator-assertions-to-have-attribute",children:"expect(locator).toHaveAttribute()"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Element has attribute"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.a,{href:"/docs/next/api/class-locatorassertions#locator-assertions-to-have-count",children:"expect(locator).toHaveCount()"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"List of elements has given length"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.a,{href:"/docs/next/api/class-locatorassertions#locator-assertions-to-have-text",children:"expect(locator).toHaveText()"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Element matches text"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.a,{href:"/docs/next/api/class-locatorassertions#locator-assertions-to-have-value",children:"expect(locator).toHaveValue()"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Input element has value"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.a,{href:"/docs/next/api/class-pageassertions#page-assertions-to-have-title",children:"expect(page).toHaveTitle()"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Page has title"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.a,{href:"/docs/next/api/class-pageassertions#page-assertions-to-have-url",children:"expect(page).toHaveURL()"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Page has URL"})]})]})]}),"\n",(0,n.jsx)(t.h3,{id:"test-isolation",children:"Test Isolation"}),"\n",(0,n.jsxs)(t.p,{children:["Playwright Test is based on the concept of ",(0,n.jsx)(t.a,{href:"/docs/next/test-fixtures",children:"test fixtures"})," such as the ",(0,n.jsx)(t.a,{href:"./test-fixtures#built-in-fixtures",children:"built in page fixture"}),", which is passed into your test. Pages are ",(0,n.jsx)(t.a,{href:"./browser-contexts",children:"isolated between tests due to the Browser Context"}),", which is equivalent to a brand new browser profile, where every test gets a fresh environment, even when multiple tests run in a single Browser."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-js",metastring:'title="tests/example.spec.ts"',children:"import { test } from '@playwright/test';\n\ntest('example test', async ({ page }) => {\n  // \"page\" belongs to an isolated BrowserContext, created for this specific test.\n});\n\ntest('another test', async ({ page }) => {\n  // \"page\" in this second test is completely isolated from the first test.\n});\n"})}),"\n",(0,n.jsx)(t.h3,{id:"using-test-hooks",children:"Using Test Hooks"}),"\n",(0,n.jsxs)(t.p,{children:["You can use various ",(0,n.jsx)(t.a,{href:"/docs/next/api/class-test",children:"test hooks"})," such as ",(0,n.jsx)(t.code,{children:"test.describe"})," to declare a group of tests and ",(0,n.jsx)(t.code,{children:"test.beforeEach"})," and ",(0,n.jsx)(t.code,{children:"test.afterEach"})," which are executed before/after each test. Other hooks include the ",(0,n.jsx)(t.code,{children:"test.beforeAll"})," and ",(0,n.jsx)(t.code,{children:"test.afterAll"})," which are executed once per worker before/after all tests."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-js",metastring:'title="tests/example.spec.ts"',children:"import { test, expect } from '@playwright/test';\n\ntest.describe('navigation', () => {\n  test.beforeEach(async ({ page }) => {\n    // Go to the starting url before each test.\n    await page.goto('https://playwright.dev/');\n  });\n\n  test('main navigation', async ({ page }) => {\n    // Assertions use the expect API.\n    await expect(page).toHaveURL('https://playwright.dev/');\n  });\n});\n"})}),"\n",(0,n.jsx)(t.h2,{id:"whats-next",children:"What's Next"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.a,{href:"/docs/next/running-tests",children:"Run single test, multiple tests, headed mode"})}),"\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.a,{href:"/docs/next/codegen-intro",children:"Generate tests with Codegen"})}),"\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.a,{href:"/docs/next/trace-viewer-intro",children:"See a trace of your tests"})}),"\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.a,{href:"/docs/next/test-ui-mode",children:"Explore UI Mode"})}),"\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.a,{href:"/docs/next/ci-intro",children:"Run tests on CI with GitHub Actions"})}),"\n"]})]})}function d(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(h,{...e})}):h(e)}}}]);