"use strict";(self.webpackChunkplaywright_dev=self.webpackChunkplaywright_dev||[]).push([[755],{8742:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>h,contentTitle:()=>r,default:()=>d,frontMatter:()=>i,metadata:()=>o,toc:()=>l});var n=t(4848),a=t(8453);t(4235),t(8328),t(3078);const i={id:"class-snapshotassertions",title:"SnapshotAssertions"},r=void 0,o={id:"api/class-snapshotassertions",title:"SnapshotAssertions",description:"Playwright provides methods for comparing page and element screenshots with expected values stored in files.",source:"@site/docs/api/class-snapshotassertions.mdx",sourceDirName:"api",slug:"/api/class-snapshotassertions",permalink:"/docs/next/api/class-snapshotassertions",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{id:"class-snapshotassertions",title:"SnapshotAssertions"},sidebar:"api",previous:{title:"PageAssertions",permalink:"/docs/next/api/class-pageassertions"},next:{title:"Fixtures",permalink:"/docs/next/api/class-fixtures"}},h={},l=[{value:"Methods",id:"methods",level:2},{value:"toMatchSnapshot(name)",id:"snapshot-assertions-to-match-snapshot-1",level:3},{value:"toMatchSnapshot()",id:"snapshot-assertions-to-match-snapshot-2",level:3}];function c(e){const s={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.p,{children:"Playwright provides methods for comparing page and element screenshots with expected values stored in files."}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-js",children:"expect(screenshot).toMatchSnapshot('landing-page.png');\n"})}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsx)(s.h2,{id:"methods",children:"Methods"}),"\n",(0,n.jsx)(s.h3,{id:"snapshot-assertions-to-match-snapshot-1",children:"toMatchSnapshot(name)"}),"\n",(0,n.jsx)("font",{size:"2",style:{position:"relative",top:"-20px"},children:"Added in: v1.22"}),"\n",(0,n.jsx)("x-search",{children:"snapshotAssertions.toMatchSnapshot(name)"}),"\n",(0,n.jsx)(s.admonition,{type:"caution",children:(0,n.jsxs)(s.p,{children:["To compare screenshots, use ",(0,n.jsx)(s.a,{href:"/docs/next/api/class-pageassertions#page-assertions-to-have-screenshot-1",children:"expect(page).toHaveScreenshot()"})," instead."]})}),"\n",(0,n.jsxs)(s.p,{children:["Ensures that passed value, either a ",(0,n.jsx)(s.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type",title:"string",children:"string"})," or a ",(0,n.jsx)(s.a,{href:"https://nodejs.org/api/buffer.html#buffer_class_buffer",title:"Buffer",children:"Buffer"}),", matches the expected snapshot stored in the test snapshots directory."]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"Usage"})}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-js",children:"// Basic usage.\nexpect(await page.screenshot()).toMatchSnapshot('landing-page.png');\n\n// Pass options to customize the snapshot comparison and have a generated name.\nexpect(await page.screenshot()).toMatchSnapshot('landing-page.png', {\n  maxDiffPixels: 27, // allow no more than 27 different pixels.\n});\n\n// Configure image matching threshold.\nexpect(await page.screenshot()).toMatchSnapshot('landing-page.png', { threshold: 0.3 });\n\n// Bring some structure to your snapshot files by passing file path segments.\nexpect(await page.screenshot()).toMatchSnapshot(['landing', 'step2.png']);\nexpect(await page.screenshot()).toMatchSnapshot(['landing', 'step3.png']);\n"})}),"\n",(0,n.jsxs)(s.p,{children:["Learn more about ",(0,n.jsx)(s.a,{href:"/docs/next/test-snapshots",children:"visual comparisons"}),"."]}),"\n",(0,n.jsx)(s.p,{children:"Note that matching snapshots only work with Playwright test runner."}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"Arguments"})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.code,{children:"name"})," ",(0,n.jsx)(s.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type",title:"string",children:"string"})," | ",(0,n.jsx)(s.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array",title:"Array",children:"Array"}),"<",(0,n.jsx)(s.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type",title:"string",children:"string"}),">",(0,n.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"snapshot-assertions-to-match-snapshot-1-option-name"}),(0,n.jsx)("a",{href:"#snapshot-assertions-to-match-snapshot-1-option-name",class:"list-anchor",children:"#"})]}),"\n",(0,n.jsx)(s.p,{children:"Snapshot name."}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.code,{children:"options"})," ",(0,n.jsx)(s.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object",title:"Object",children:"Object"})," ",(0,n.jsx)(s.em,{children:"(optional)"})]}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.code,{children:"maxDiffPixelRatio"})," ",(0,n.jsx)(s.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type",title:"Number",children:"number"})," ",(0,n.jsx)(s.em,{children:"(optional)"}),(0,n.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"snapshot-assertions-to-match-snapshot-1-option-max-diff-pixel-ratio"}),(0,n.jsx)("a",{href:"#snapshot-assertions-to-match-snapshot-1-option-max-diff-pixel-ratio",class:"list-anchor",children:"#"})]}),"\n",(0,n.jsxs)(s.p,{children:["An acceptable ratio of pixels that are different to the total amount of pixels, between ",(0,n.jsx)(s.code,{children:"0"})," and ",(0,n.jsx)(s.code,{children:"1"}),". Default is configurable with ",(0,n.jsx)(s.code,{children:"TestConfig.expect"}),". Unset by default."]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.code,{children:"maxDiffPixels"})," ",(0,n.jsx)(s.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type",title:"Number",children:"number"})," ",(0,n.jsx)(s.em,{children:"(optional)"}),(0,n.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"snapshot-assertions-to-match-snapshot-1-option-max-diff-pixels"}),(0,n.jsx)("a",{href:"#snapshot-assertions-to-match-snapshot-1-option-max-diff-pixels",class:"list-anchor",children:"#"})]}),"\n",(0,n.jsxs)(s.p,{children:["An acceptable amount of pixels that could be different. Default is configurable with ",(0,n.jsx)(s.code,{children:"TestConfig.expect"}),". Unset by default."]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.code,{children:"threshold"})," ",(0,n.jsx)(s.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type",title:"Number",children:"number"})," ",(0,n.jsx)(s.em,{children:"(optional)"}),(0,n.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"snapshot-assertions-to-match-snapshot-1-option-threshold"}),(0,n.jsx)("a",{href:"#snapshot-assertions-to-match-snapshot-1-option-threshold",class:"list-anchor",children:"#"})]}),"\n",(0,n.jsxs)(s.p,{children:["An acceptable perceived color difference in the ",(0,n.jsx)(s.a,{href:"https://en.wikipedia.org/wiki/YIQ",children:"YIQ color space"})," between the same pixel in compared images, between zero (strict) and one (lax), default is configurable with ",(0,n.jsx)(s.code,{children:"TestConfig.expect"}),". Defaults to ",(0,n.jsx)(s.code,{children:"0.2"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsx)(s.h3,{id:"snapshot-assertions-to-match-snapshot-2",children:"toMatchSnapshot()"}),"\n",(0,n.jsx)("font",{size:"2",style:{position:"relative",top:"-20px"},children:"Added in: v1.22"}),"\n",(0,n.jsx)("x-search",{children:"snapshotAssertions.toMatchSnapshot()"}),"\n",(0,n.jsx)(s.admonition,{type:"caution",children:(0,n.jsxs)(s.p,{children:["To compare screenshots, use ",(0,n.jsx)(s.a,{href:"/docs/next/api/class-pageassertions#page-assertions-to-have-screenshot-2",children:"expect(page).toHaveScreenshot()"})," instead."]})}),"\n",(0,n.jsxs)(s.p,{children:["Ensures that passed value, either a ",(0,n.jsx)(s.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type",title:"string",children:"string"})," or a ",(0,n.jsx)(s.a,{href:"https://nodejs.org/api/buffer.html#buffer_class_buffer",title:"Buffer",children:"Buffer"}),", matches the expected snapshot stored in the test snapshots directory."]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"Usage"})}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-js",children:"// Basic usage and the file name is derived from the test name.\nexpect(await page.screenshot()).toMatchSnapshot();\n\n// Pass options to customize the snapshot comparison and have a generated name.\nexpect(await page.screenshot()).toMatchSnapshot({\n  maxDiffPixels: 27, // allow no more than 27 different pixels.\n});\n\n// Configure image matching threshold and snapshot name.\nexpect(await page.screenshot()).toMatchSnapshot({\n  name: 'landing-page.png',\n  threshold: 0.3,\n});\n"})}),"\n",(0,n.jsxs)(s.p,{children:["Learn more about ",(0,n.jsx)(s.a,{href:"/docs/next/test-snapshots",children:"visual comparisons"}),"."]}),"\n",(0,n.jsx)(s.p,{children:"Note that matching snapshots only work with Playwright test runner."}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"Arguments"})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"options"})," ",(0,n.jsx)(s.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object",title:"Object",children:"Object"})," ",(0,n.jsx)(s.em,{children:"(optional)"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.code,{children:"maxDiffPixelRatio"})," ",(0,n.jsx)(s.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type",title:"Number",children:"number"})," ",(0,n.jsx)(s.em,{children:"(optional)"}),(0,n.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"snapshot-assertions-to-match-snapshot-2-option-max-diff-pixel-ratio"}),(0,n.jsx)("a",{href:"#snapshot-assertions-to-match-snapshot-2-option-max-diff-pixel-ratio",class:"list-anchor",children:"#"})]}),"\n",(0,n.jsxs)(s.p,{children:["An acceptable ratio of pixels that are different to the total amount of pixels, between ",(0,n.jsx)(s.code,{children:"0"})," and ",(0,n.jsx)(s.code,{children:"1"}),". Default is configurable with ",(0,n.jsx)(s.code,{children:"TestConfig.expect"}),". Unset by default."]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.code,{children:"maxDiffPixels"})," ",(0,n.jsx)(s.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type",title:"Number",children:"number"})," ",(0,n.jsx)(s.em,{children:"(optional)"}),(0,n.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"snapshot-assertions-to-match-snapshot-2-option-max-diff-pixels"}),(0,n.jsx)("a",{href:"#snapshot-assertions-to-match-snapshot-2-option-max-diff-pixels",class:"list-anchor",children:"#"})]}),"\n",(0,n.jsxs)(s.p,{children:["An acceptable amount of pixels that could be different. Default is configurable with ",(0,n.jsx)(s.code,{children:"TestConfig.expect"}),". Unset by default."]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.code,{children:"name"})," ",(0,n.jsx)(s.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type",title:"string",children:"string"})," | ",(0,n.jsx)(s.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array",title:"Array",children:"Array"}),"<",(0,n.jsx)(s.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type",title:"string",children:"string"}),"> ",(0,n.jsx)(s.em,{children:"(optional)"}),(0,n.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"snapshot-assertions-to-match-snapshot-2-option-name"}),(0,n.jsx)("a",{href:"#snapshot-assertions-to-match-snapshot-2-option-name",class:"list-anchor",children:"#"})]}),"\n",(0,n.jsx)(s.p,{children:"Snapshot name. If not passed, the test name and ordinals are used when called multiple times."}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.code,{children:"threshold"})," ",(0,n.jsx)(s.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type",title:"Number",children:"number"})," ",(0,n.jsx)(s.em,{children:"(optional)"}),(0,n.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"snapshot-assertions-to-match-snapshot-2-option-threshold"}),(0,n.jsx)("a",{href:"#snapshot-assertions-to-match-snapshot-2-option-threshold",class:"list-anchor",children:"#"})]}),"\n",(0,n.jsxs)(s.p,{children:["An acceptable perceived color difference in the ",(0,n.jsx)(s.a,{href:"https://en.wikipedia.org/wiki/YIQ",children:"YIQ color space"})," between the same pixel in compared images, between zero (strict) and one (lax), default is configurable with ",(0,n.jsx)(s.code,{children:"TestConfig.expect"}),". Defaults to ",(0,n.jsx)(s.code,{children:"0.2"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]})]})}function d(e={}){const{wrapper:s}={...(0,a.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}}}]);