"use strict";(self.webpackChunkplaywright_dev=self.webpackChunkplaywright_dev||[]).push([[5658],{3965:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>p,contentTitle:()=>c,default:()=>m,frontMatter:()=>i,metadata:()=>d,toc:()=>u});var o=t(4848),s=t(8453),a=t(4235),l=t(8328),r=(t(3078),t(4562));const i={id:"test-components",title:"\u5143\u4ef6 (\u5be6\u9a57\u6027)"},c=void 0,d={id:"test-components",title:"\u5143\u4ef6 (\u5be6\u9a57\u6027)",description:"\u7c21\u4ecb",source:"@site/versioned_docs/version-stable/test-components.mdx",sourceDirName:".",slug:"/test-components",permalink:"/docs/test-components",draft:!1,unlisted:!1,tags:[],version:"stable",frontMatter:{id:"test-components",title:"\u5143\u4ef6 (\u5be6\u9a57\u6027)"},sidebar:"docs",previous:{title:"\u6642\u9418",permalink:"/docs/clock"},next:{title:"\u5075\u932f\u6e2c\u8a66",permalink:"/docs/debug"}},p={},u=[{value:"\u7c21\u4ecb",id:"\u7c21\u4ecb",level:2},{value:"\u7bc4\u4f8b",id:"\u7bc4\u4f8b",level:2},{value:"\u5982\u4f55\u958b\u59cb",id:"\u5982\u4f55\u958b\u59cb",level:2},{value:"\u7b2c\u4e00\u6b65: \u70ba\u60a8\u7684\u76f8\u61c9\u6846\u67b6\u5b89\u88dd Playwright Test \u4f86\u6e2c\u8a66\u5143\u4ef6",id:"\u7b2c\u4e00\u6b65-\u70ba\u60a8\u7684\u76f8\u61c9\u6846\u67b6\u5b89\u88dd-playwright-test-\u4f86\u6e2c\u8a66\u5143\u4ef6",level:3},{value:"\u6b65\u9a5f 2. \u5efa\u7acb\u4e00\u500b\u6e2c\u8a66\u6587\u4ef6 <code>src/App.spec.{ts,tsx}</code>",id:"\u6b65\u9a5f-2-\u5efa\u7acb\u4e00\u500b\u6e2c\u8a66\u6587\u4ef6-srcappspectstsx",level:3},{value:"Step 3. \u57f7\u884c\u6e2c\u8a66",id:"step-3-\u57f7\u884c\u6e2c\u8a66",level:3},{value:"\u9032\u4e00\u6b65\u95b1\u8b80: \u8a2d\u5b9a\u5831\u544a\u3001\u700f\u89bd\u5668\u3001\u8ffd\u8e64",id:"\u9032\u4e00\u6b65\u95b1\u8b80-\u8a2d\u5b9a\u5831\u544a\u700f\u89bd\u5668\u8ffd\u8e64",level:3},{value:"\u6e2c\u8a66\u6545\u4e8b",id:"\u6e2c\u8a66\u6545\u4e8b",level:2},{value:"\u5f15\u64ce\u5167\u90e8",id:"\u5f15\u64ce\u5167\u90e8",level:2},{value:"API \u53c3\u8003",id:"api-\u53c3\u8003",level:2},{value:"props",id:"props",level:3},{value:"callbacks / events",id:"callbacks--events",level:3},{value:"\u5b50\u9805 / \u63d2\u69fd",id:"\u5b50\u9805--\u63d2\u69fd",level:3},{value:"hooks",id:"hooks",level:3},{value:"\u5378\u8f09",id:"\u5378\u8f09",level:3},{value:"\u66f4\u65b0",id:"\u66f4\u65b0",level:3},{value:"\u8655\u7406\u7db2\u8def\u8acb\u6c42",id:"\u8655\u7406\u7db2\u8def\u8acb\u6c42",level:3},{value:"\u5e38\u898b\u554f\u984c",id:"\u5e38\u898b\u554f\u984c",level:2},{value:"<code>@playwright/test</code> \u548c <code>@playwright/experimental-ct-{react,svelte,vue,solid}</code> \u4e4b\u9593\u6709\u4ec0\u9ebc\u5340\u5225?",id:"playwrighttest-\u548c-playwrightexperimental-ct-reactsveltevuesolid-\u4e4b\u9593\u6709\u4ec0\u9ebc\u5340\u5225",level:3},{value:"\u6211\u6709\u4e00\u500b\u5df2\u7d93\u4f7f\u7528 Vite \u7684\u5c08\u6848\u3002\u6211\u53ef\u4ee5\u91cd\u8907\u4f7f\u7528\u9019\u500b\u914d\u7f6e\u55ce\uff1f",id:"\u6211\u6709\u4e00\u500b\u5df2\u7d93\u4f7f\u7528-vite-\u7684\u5c08\u6848\u6211\u53ef\u4ee5\u91cd\u8907\u4f7f\u7528\u9019\u500b\u914d\u7f6e\u55ce",level:3},{value:"\u6211\u5982\u4f55\u6e2c\u8a66\u4f7f\u7528 Pinia \u7684\u5143\u4ef6\uff1f",id:"\u6211\u5982\u4f55\u6e2c\u8a66\u4f7f\u7528-pinia-\u7684\u5143\u4ef6",level:3},{value:"\u6211\u5982\u4f55\u5b58\u53d6\u5143\u4ef6\u7684\u65b9\u6cd5\u6216\u5176\u5be6\u4f8b\uff1f",id:"\u6211\u5982\u4f55\u5b58\u53d6\u5143\u4ef6\u7684\u65b9\u6cd5\u6216\u5176\u5be6\u4f8b",level:3}];function h(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h2,{id:"\u7c21\u4ecb",children:"\u7c21\u4ecb"}),"\n",(0,o.jsx)(n.p,{children:"Playwright Test \u73fe\u5728\u53ef\u4ee5\u6e2c\u8a66\u4f60\u7684\u5143\u4ef6\u3002"}),"\n",(0,o.jsx)(r.A,{id:"y3YxX4sFJbM",title:"\u5143\u4ef6\u6e2c\u8a66"}),"\n",(0,o.jsx)(n.h2,{id:"\u7bc4\u4f8b",children:"\u7bc4\u4f8b"}),"\n",(0,o.jsx)(n.p,{children:"\u4ee5\u4e0b\u662f\u4e00\u500b\u5178\u578b\u5143\u4ef6\u6e2c\u8a66\u7684\u6a23\u5b50:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"test('event should work', async ({ mount }) => {\n  let clicked = false;\n\n  // Mount a component. Returns locator pointing to the component.\n  const component = await mount(\n    <Button title=\"Submit\" onClick={() => { clicked = true }}></Button>\n  );\n\n  // As with any Playwright test, assert locator text.\n  await expect(component).toContainText('Submit');\n\n  // Perform locator click. This will trigger the event.\n  await component.click();\n\n  // Assert that respective events have been fired.\n  expect(clicked).toBeTruthy();\n});\n"})}),"\n",(0,o.jsx)(n.h2,{id:"\u5982\u4f55\u958b\u59cb",children:"\u5982\u4f55\u958b\u59cb"}),"\n",(0,o.jsx)(n.p,{children:"\u5c07 Playwright Test \u6dfb\u52a0\u5230\u73fe\u6709\u5c08\u6848\u5f88\u5bb9\u6613\u3002\u4ee5\u4e0b\u662f\u70ba React\u3001Vue\u3001Svelte \u6216 Solid \u5c08\u6848\u555f\u7528 Playwright Test \u7684\u6b65\u9a5f\u3002"}),"\n",(0,o.jsx)(n.h3,{id:"\u7b2c\u4e00\u6b65-\u70ba\u60a8\u7684\u76f8\u61c9\u6846\u67b6\u5b89\u88dd-playwright-test-\u4f86\u6e2c\u8a66\u5143\u4ef6",children:"\u7b2c\u4e00\u6b65: \u70ba\u60a8\u7684\u76f8\u61c9\u6846\u67b6\u5b89\u88dd Playwright Test \u4f86\u6e2c\u8a66\u5143\u4ef6"}),"\n",(0,o.jsxs)(a.A,{defaultValue:"npm",values:[{label:"npm",value:"npm"},{label:"yarn",value:"yarn"},{label:"pnpm",value:"pnpm"}],children:[(0,o.jsx)(l.A,{value:"npm",children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"npm init playwright@latest -- --ct\n"})})}),(0,o.jsx)(l.A,{value:"yarn",children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"yarn create playwright --ct\n"})})}),(0,o.jsx)(l.A,{value:"pnpm",children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"pnpm create playwright --ct\n"})})})]}),"\n",(0,o.jsx)(n.p,{children:"\u9019\u500b\u6b65\u9a5f\u6703\u5728\u4f60\u7684\u5de5\u4f5c\u5340\u57df\u4e2d\u5efa\u7acb\u5e7e\u500b\u6587\u4ef6:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-html",metastring:'title="playwright/index.html"',children:'<html lang="en">\n  <body>\n    <div id="root"></div>\n    <script type="module" src="./index.ts"><\/script>\n  </body>\n</html>\n'})}),"\n",(0,o.jsxs)(n.p,{children:["\u6b64\u6587\u4ef6\u5b9a\u7fa9\u4e86\u4e00\u500b html \u6587\u4ef6\uff0c\u5c07\u7528\u65bc\u6e2c\u8a66\u671f\u9593\u6e32\u67d3\u5143\u4ef6\u3002\u5b83\u5fc5\u9808\u5305\u542b ",(0,o.jsx)(n.code,{children:'id="root"'})," \u7684\u5143\u7d20\uff0c\u9019\u662f\u5143\u4ef6\u639b\u8f09\u7684\u5730\u65b9\u3002\u5b83\u9084\u5fc5\u9808\u93c8\u63a5\u540d\u70ba ",(0,o.jsx)(n.code,{children:"playwright/index.{js,ts,jsx,tsx}"})," \u7684\u8173\u672c\u3002"]}),"\n",(0,o.jsxs)(n.p,{children:["\u4f60\u53ef\u4ee5\u5305\u542b\u6a23\u5f0f\u8868\u3001\u61c9\u7528\u4e3b\u984c\u4e26\u5c07\u7a0b\u5f0f\u78bc\u6ce8\u5165\u5230\u5143\u4ef6\u5b89\u88dd\u7684\u9801\u9762\u4e2d\u4f7f\u7528\u6b64\u8173\u672c\u3002\u5b83\u53ef\u4ee5\u662f ",(0,o.jsx)(n.code,{children:".js"}),"\u3001",(0,o.jsx)(n.code,{children:".ts"}),"\u3001",(0,o.jsx)(n.code,{children:".jsx"})," \u6216 ",(0,o.jsx)(n.code,{children:".tsx"})," \u6a94\u6848\u3002"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",metastring:'title="playwright/index.ts"',children:"// Apply theme here, add anything your component needs at runtime here.\n"})}),"\n",(0,o.jsxs)(n.h3,{id:"\u6b65\u9a5f-2-\u5efa\u7acb\u4e00\u500b\u6e2c\u8a66\u6587\u4ef6-srcappspectstsx",children:["\u6b65\u9a5f 2. \u5efa\u7acb\u4e00\u500b\u6e2c\u8a66\u6587\u4ef6 ",(0,o.jsx)(n.code,{children:"src/App.spec.{ts,tsx}"})]}),"\n",(0,o.jsxs)(a.A,{defaultValue:"react",values:[{label:"React",value:"react"},{label:"Solid",value:"solid"},{label:"Svelte",value:"svelte"},{label:"Vue",value:"vue"}],children:[(0,o.jsx)(l.A,{value:"react",children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"import { test, expect } from '@playwright/experimental-ct-react';\nimport App from './App';\n\ntest.use({ viewport: { width: 500, height: 500 } });\n\ntest('should work', async ({ mount }) => {\n  const component = await mount(<App />);\n  await expect(component).toContainText('Learn React');\n});\n"})})}),(0,o.jsxs)(l.A,{value:"vue",children:[(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"import { test, expect } from '@playwright/experimental-ct-vue';\nimport App from './App.vue';\n\ntest.use({ viewport: { width: 500, height: 500 } });\n\ntest('should work', async ({ mount }) => {\n  const component = await mount(App);\n  await expect(component).toContainText('Vite + Vue');\n});\n"})}),(0,o.jsxs)(n.p,{children:["\u5982\u679c\u4f7f\u7528 TypeScript \u548c Vue\uff0c\u8acb\u78ba\u4fdd\u5c07 ",(0,o.jsx)(n.code,{children:"vue.d.ts"})," \u6a94\u6848\u6dfb\u52a0\u5230\u60a8\u7684\u5c08\u6848\u4e2d:"]}),(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"declare module '*.vue';\n"})})]}),(0,o.jsx)(l.A,{value:"svelte",children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"import { test, expect } from '@playwright/experimental-ct-svelte';\nimport App from './App.svelte';\n\ntest.use({ viewport: { width: 500, height: 500 } });\n\ntest('should work', async ({ mount }) => {\n  const component = await mount(App);\n  await expect(component).toContainText('Vite + Svelte');\n});\n"})})}),(0,o.jsx)(l.A,{value:"solid",children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"import { test, expect } from '@playwright/experimental-ct-solid';\nimport App from './App';\n\ntest.use({ viewport: { width: 500, height: 500 } });\n\ntest('should work', async ({ mount }) => {\n  const component = await mount(<App />);\n  await expect(component).toContainText('Learn Solid');\n});\n"})})})]}),"\n",(0,o.jsx)(n.h3,{id:"step-3-\u57f7\u884c\u6e2c\u8a66",children:"Step 3. \u57f7\u884c\u6e2c\u8a66"}),"\n",(0,o.jsxs)(n.p,{children:["\u60a8\u53ef\u4ee5\u4f7f\u7528 ",(0,o.jsx)(n.a,{href:"/docs/getting-started-vscode",children:"VS Code \u64f4\u5145\u5957\u4ef6"})," \u6216\u547d\u4ee4\u5217\u4f86\u57f7\u884c\u6e2c\u8a66\u3002"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-sh",children:"npm run test-ct\n"})}),"\n",(0,o.jsx)(n.h3,{id:"\u9032\u4e00\u6b65\u95b1\u8b80-\u8a2d\u5b9a\u5831\u544a\u700f\u89bd\u5668\u8ffd\u8e64",children:"\u9032\u4e00\u6b65\u95b1\u8b80: \u8a2d\u5b9a\u5831\u544a\u3001\u700f\u89bd\u5668\u3001\u8ffd\u8e64"}),"\n",(0,o.jsxs)(n.p,{children:["\u8acb\u53c3\u8003 ",(0,o.jsx)(n.a,{href:"/docs/test-configuration",children:"Playwright config"})," \u8a2d\u5b9a\u4f60\u7684\u5c08\u6848\u3002"]}),"\n",(0,o.jsx)(n.h2,{id:"\u6e2c\u8a66\u6545\u4e8b",children:"\u6e2c\u8a66\u6545\u4e8b"}),"\n",(0,o.jsx)(n.p,{children:"\u7576 Playwright Test \u7528\u65bc\u6e2c\u8a66 web \u5143\u4ef6\u6642\uff0c\u6e2c\u8a66\u5728 Node.js \u4e2d\u57f7\u884c\uff0c\u800c\u5143\u4ef6\u5728\u771f\u5be6\u7684\u700f\u89bd\u5668\u4e2d\u57f7\u884c\u3002\u9019\u7d50\u5408\u4e86\u5169\u8005\u7684\u512a\u9ede\uff1a\u5143\u4ef6\u5728\u771f\u5be6\u7684\u700f\u89bd\u5668\u74b0\u5883\u4e2d\u57f7\u884c\uff0c\u89f8\u767c\u771f\u5be6\u7684\u9ede\u64ca\uff0c\u57f7\u884c\u771f\u5be6\u7684\u4f48\u5c40\uff0c\u8996\u89ba\u56de\u6b78\u662f\u53ef\u80fd\u7684\u3002\u540c\u6642\uff0c\u6e2c\u8a66\u53ef\u4ee5\u4f7f\u7528 Node.js \u7684\u6240\u6709\u529f\u80fd\u4ee5\u53ca\u6240\u6709 Playwright Test \u7684\u529f\u80fd\u3002\u56e0\u6b64\uff0c\u5728\u5143\u4ef6\u6e2c\u8a66\u671f\u9593\uff0c\u76f8\u540c\u7684\u5e73\u884c\u3001\u53c3\u6578\u5316\u6e2c\u8a66\u8207\u76f8\u540c\u7684\u4e8b\u5f8c\u8ffd\u8e64\u6545\u4e8b\u662f\u53ef\u7528\u7684\u3002"}),"\n",(0,o.jsx)(n.p,{children:"\u7136\u800c\uff0c\u9019\u5f15\u5165\u4e86\u8a31\u591a\u9650\u5236:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"\u4f60\u4e0d\u80fd\u5c07\u8907\u96dc\u7684\u5373\u6642\u7269\u4ef6\u50b3\u905e\u7d66\u4f60\u7684\u5143\u4ef6\u3002\u53ea\u80fd\u50b3\u905e\u7d14 JavaScript \u7269\u4ef6\u548c\u5167\u5efa\u985e\u578b\uff0c\u5982\u5b57\u4e32\u3001\u6578\u5b57\u3001\u65e5\u671f\u7b49\u3002"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"test('this will work', async ({ mount }) => {\n  const component = await mount(<ProcessViewer process={{ name: 'playwright' }}/>);\n});\n\ntest('this will not work', async ({ mount }) => {\n  // `process` is a Node object, we can't pass it to the browser and expect it to work.\n  const component = await mount(<ProcessViewer process={process}/>);\n});\n"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"\u4f60\u4e0d\u80fd\u5728\u56de\u547c\u4e2d\u540c\u6b65\u50b3\u905e\u8cc7\u6599\u7d66\u4f60\u7684\u5143\u4ef6:"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"test('this will not work', async ({ mount }) => {\n  // () => 'red' callback lives in Node. If `ColorPicker` component in the browser calls the parameter function\n  // `colorGetter` it won't get result synchronously. It'll be able to get it via await, but that is not how\n  // components are typically built.\n  const component = await mount(<ColorPicker colorGetter={() => 'red'}/>);\n});\n"})}),"\n",(0,o.jsx)(n.p,{children:"\u514b\u670d\u9019\u4e9b\u548c\u5176\u4ed6\u9650\u5236\u7684\u65b9\u6cd5\u65e2\u5feb\u901f\u53c8\u512a\u96c5: \u5c0d\u65bc\u88ab\u6e2c\u8a66\u5143\u4ef6\u7684\u6bcf\u500b\u4f7f\u7528\u6848\u4f8b\uff0c\u5efa\u7acb\u4e00\u500b\u5c08\u9580\u70ba\u6e2c\u8a66\u8a2d\u8a08\u7684\u8a72\u5143\u4ef6\u7684\u5305\u88dd\u5668\u3002\u9019\u4e0d\u50c5\u80fd\u6e1b\u8f15\u9650\u5236\uff0c\u9084\u80fd\u70ba\u6e2c\u8a66\u63d0\u4f9b\u5f37\u5927\u7684\u62bd\u8c61\uff0c\u8b93\u4f60\u80fd\u5920\u5b9a\u7fa9\u74b0\u5883\u3001\u4e3b\u984c\u548c\u5143\u4ef6\u6e32\u67d3\u7684\u5176\u4ed6\u65b9\u9762\u3002"}),"\n",(0,o.jsx)(n.p,{children:"\u5047\u8a2d\u4f60\u60f3\u6e2c\u8a66\u4ee5\u4e0b\u5143\u4ef6:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",metastring:'title="input-media.tsx"',children:"import React from 'react';\n\ntype InputMediaProps = {\n  // Media is a complex browser object we can't send to Node while testing.\n  onChange(media: Media): void;\n};\n\nexport function InputMedia(props: InputMediaProps) {\n  return <></> as any;\n}\n"})}),"\n",(0,o.jsx)(n.p,{children:"\u70ba\u4f60\u7684\u5143\u4ef6\u5efa\u7acb\u4e00\u500b\u6545\u4e8b\u6587\u4ef6:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",metastring:'title="input-media.story.tsx"',children:"import React from 'react';\nimport InputMedia from './import-media';\n\ntype InputMediaForTestProps = {\n  onMediaChange(mediaName: string): void;\n};\n\nexport function InputMediaForTest(props: InputMediaForTestProps) {\n  // Instead of sending a complex `media` object to the test, send the media name.\n  return <InputMedia onChange={media => props.onMediaChange(media.name)} />;\n}\n// Export more stories here.\n"})}),"\n",(0,o.jsx)(n.p,{children:"\u7136\u5f8c\u900f\u904e\u6e2c\u8a66\u6545\u4e8b\u4f86\u6e2c\u8a66\u5143\u4ef6:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",metastring:'title="input-media.test.spec.tsx"',children:"test('changes the image', async ({ mount }) => {\n  let mediaSelected: string | null = null;\n\n  const component = await mount(\n    <InputMediaForTest\n      onMediaChange={mediaName => {\n        mediaSelected = mediaName;\n      }}\n    />\n  );\n  await component\n    .getByTestId('imageInput')\n    .setInputFiles('src/assets/logo.png');\n\n  await expect(component.getByAltText(/selected image/i)).toBeVisible();\n  await expect.poll(() => mediaSelected).toBe('logo.png');\n});\n"})}),"\n",(0,o.jsx)(n.p,{children:"\u56e0\u6b64\uff0c\u5c0d\u65bc\u6bcf\u500b\u5143\u4ef6\uff0c\u4f60\u5c07\u64c1\u6709\u4e00\u500b\u6545\u4e8b\u6a94\u6848\uff0c\u8a72\u6a94\u6848\u6703\u532f\u51fa\u6240\u6709\u5be6\u969b\u6e2c\u8a66\u7684\u6545\u4e8b\u3002\u9019\u4e9b\u6545\u4e8b\u5b58\u5728\u65bc\u700f\u89bd\u5668\u4e2d\uff0c\u4e26\u5c07\u8907\u96dc\u7684\u7269\u4ef6\u201c\u8f49\u63db\u201d\u6210\u53ef\u4ee5\u5728\u6e2c\u8a66\u4e2d\u8a2a\u554f\u7684\u7c21\u55ae\u7269\u4ef6\u3002"}),"\n",(0,o.jsx)(n.h2,{id:"\u5f15\u64ce\u5167\u90e8",children:"\u5f15\u64ce\u5167\u90e8"}),"\n",(0,o.jsx)(n.p,{children:"\u4ee5\u4e0b\u662f\u5143\u4ef6\u6e2c\u8a66\u7684\u5de5\u4f5c\u539f\u7406:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"\u4e00\u65e6\u6e2c\u8a66\u88ab\u57f7\u884c\uff0cPlaywright \u6703\u5efa\u7acb\u6e2c\u8a66\u6240\u9700\u7684\u5143\u4ef6\u6e05\u55ae\u3002"}),"\n",(0,o.jsx)(n.li,{children:"\u7136\u5f8c\u5b83\u6703\u7de8\u8b6f\u4e00\u500b\u5305\u542b\u9019\u4e9b\u5143\u4ef6\u7684\u6346\u7d81\u5305\uff0c\u4e26\u4f7f\u7528\u672c\u5730\u975c\u614b\u7db2\u9801\u4f3a\u670d\u5668\u63d0\u4f9b\u670d\u52d9\u3002"}),"\n",(0,o.jsxs)(n.li,{children:["\u5728\u6e2c\u8a66\u4e2d\u7684 ",(0,o.jsx)(n.code,{children:"mount"})," \u547c\u53eb\u6642\uff0cPlaywright \u6703\u5c0e\u822a\u5230\u6b64\u6346\u7d81\u5305\u7684\u5916\u89c0\u9801\u9762 ",(0,o.jsx)(n.code,{children:"/playwright/index.html"})," \u4e26\u544a\u8a34\u5b83\u6e32\u67d3\u5143\u4ef6\u3002"]}),"\n",(0,o.jsx)(n.li,{children:"\u4e8b\u4ef6\u6703\u88ab\u50b3\u56de\u5230 Node.js \u74b0\u5883\u4ee5\u5141\u8a31\u9a57\u8b49\u3002"}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["Playwright \u662f\u4f7f\u7528 ",(0,o.jsx)(n.a,{href:"https://vitejs.dev/",children:"Vite"})," \u4f86\u5efa\u7acb\u5143\u4ef6\u5305\u4e26\u63d0\u4f9b\u670d\u52d9\u3002"]}),"\n",(0,o.jsx)(n.h2,{id:"api-\u53c3\u8003",children:"API \u53c3\u8003"}),"\n",(0,o.jsx)(n.h3,{id:"props",children:"props"}),"\n",(0,o.jsx)(n.p,{children:"\u5728\u639b\u8f09\u6642\u5411\u5143\u4ef6\u63d0\u4f9b\u9053\u5177\u3002"}),"\n",(0,o.jsxs)(a.A,{defaultValue:"react",values:[{label:"React",value:"react"},{label:"Solid",value:"solid"},{label:"Svelte",value:"svelte"},{label:"Vue",value:"vue"}],children:[(0,o.jsx)(l.A,{value:"react",children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"test('props', async ({ mount }) => {\n  const component = await mount(<Component msg=\"greetings\" />);\n});\n"})})}),(0,o.jsx)(l.A,{value:"solid",children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"test('props', async ({ mount }) => {\n  const component = await mount(<Component msg=\"greetings\" />);\n});\n"})})}),(0,o.jsx)(l.A,{value:"svelte",children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"test('props', async ({ mount }) => {\n  const component = await mount(Component, { props: { msg: 'greetings' } });\n});\n"})})}),(0,o.jsx)(l.A,{value:"vue",children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"test('props', async ({ mount }) => {\n  const component = await mount(Component, { props: { msg: 'greetings' } });\n});\n"})})})]}),"\n",(0,o.jsx)(n.h3,{id:"callbacks--events",children:"callbacks / events"}),"\n",(0,o.jsx)(n.p,{children:"\u5728\u5143\u4ef6\u639b\u8f09\u6642\u63d0\u4f9b\u56de\u547c/\u4e8b\u4ef6\u3002"}),"\n",(0,o.jsxs)(a.A,{defaultValue:"react",values:[{label:"React",value:"react"},{label:"Solid",value:"solid"},{label:"Svelte",value:"svelte"},{label:"Vue",value:"vue"}],children:[(0,o.jsx)(l.A,{value:"react",children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"test('callback', async ({ mount }) => {\n  const component = await mount(<Component callback={() => {}} />);\n});\n"})})}),(0,o.jsx)(l.A,{value:"solid",children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"test('callback', async ({ mount }) => {\n  const component = await mount(<Component callback={() => {}} />);\n});\n"})})}),(0,o.jsx)(l.A,{value:"svelte",children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"test('event', async ({ mount }) => {\n  const component = await mount(Component, { on: { callback() {} } });\n});\n"})})}),(0,o.jsx)(l.A,{value:"vue",children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"test('event', async ({ mount }) => {\n  const component = await mount(Component, { on: { callback() {} } });\n});\n"})})})]}),"\n",(0,o.jsx)(n.h3,{id:"\u5b50\u9805--\u63d2\u69fd",children:"\u5b50\u9805 / \u63d2\u69fd"}),"\n",(0,o.jsx)(n.p,{children:"\u63d0\u4f9b\u5b50\u9805/\u63d2\u69fd\u7d66\u5143\u4ef6\u7576\u639b\u8f09\u6642\u3002"}),"\n",(0,o.jsxs)(a.A,{defaultValue:"react",values:[{label:"React",value:"react"},{label:"Solid",value:"solid"},{label:"Svelte",value:"svelte"},{label:"Vue",value:"vue"}],children:[(0,o.jsx)(l.A,{value:"react",children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"test('children', async ({ mount }) => {\n  const component = await mount(<Component>Child</Component>);\n});\n"})})}),(0,o.jsx)(l.A,{value:"solid",children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"test('children', async ({ mount }) => {\n  const component = await mount(<Component>Child</Component>);\n});\n"})})}),(0,o.jsx)(l.A,{value:"svelte",children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"test('slot', async ({ mount }) => {\n  const component = await mount(Component, { slots: { default: 'Slot' } });\n});\n"})})}),(0,o.jsx)(l.A,{value:"vue",children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"test('slot', async ({ mount }) => {\n  const component = await mount(Component, { slots: { default: 'Slot' } });\n});\n"})})})]}),"\n",(0,o.jsx)(n.h3,{id:"hooks",children:"hooks"}),"\n",(0,o.jsxs)(n.p,{children:["\u4f60\u53ef\u4ee5\u4f7f\u7528 ",(0,o.jsx)(n.code,{children:"beforeMount"})," \u548c ",(0,o.jsx)(n.code,{children:"afterMount"})," hooks \u4f86\u914d\u7f6e\u4f60\u7684\u61c9\u7528\u7a0b\u5f0f\u3002\u9019\u8b93\u4f60\u53ef\u4ee5\u8a2d\u5b9a\u50cf\u662f\u61c9\u7528\u7a0b\u5f0f\u8def\u7531\u3001\u5047\u4f3a\u670d\u5668\u7b49\uff0c\u7d66\u4e88\u4f60\u6240\u9700\u7684\u5f48\u6027\u3002\u4f60\u4e5f\u53ef\u4ee5\u5f9e\u6e2c\u8a66\u4e2d\u7684 ",(0,o.jsx)(n.code,{children:"mount"})," \u547c\u53eb\u50b3\u905e\u81ea\u8a02\u914d\u7f6e\uff0c\u9019\u4e9b\u914d\u7f6e\u53ef\u4ee5\u5f9e ",(0,o.jsx)(n.code,{children:"hooksConfig"})," fixture \u8a2a\u554f\u3002\u9019\u5305\u62ec\u4efb\u4f55\u9700\u8981\u5728\u639b\u8f09\u5143\u4ef6\u4e4b\u524d\u6216\u4e4b\u5f8c\u57f7\u884c\u7684\u914d\u7f6e\u3002\u4ee5\u4e0b\u63d0\u4f9b\u4e86\u4e00\u500b\u914d\u7f6e\u8def\u7531\u7684\u7bc4\u4f8b:"]}),"\n",(0,o.jsxs)(a.A,{defaultValue:"react",values:[{label:"React",value:"react"},{label:"Solid",value:"solid"},{label:"Vue3",value:"vue3"},{label:"Vue2",value:"vue2"}],children:[(0,o.jsxs)(l.A,{value:"react",children:[(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",metastring:'title="playwright/index.tsx"',children:"import { beforeMount, afterMount } from '@playwright/experimental-ct-react/hooks';\nimport { BrowserRouter } from 'react-router-dom';\n\nexport type HooksConfig = {\n  enableRouting?: boolean;\n}\n\nbeforeMount<HooksConfig>(async ({ App, hooksConfig }) => {\n  if (hooksConfig?.enableRouting)\n    return <BrowserRouter><App /></BrowserRouter>;\n});\n"})}),(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",metastring:'title="src/pages/ProductsPage.spec.tsx"',children:"import { test, expect } from '@playwright/experimental-ct-react';\nimport type { HooksConfig } from '../playwright';\nimport { ProductsPage } from './pages/ProductsPage';\n\ntest('configure routing through hooks config', async ({ page, mount }) => {\n  const component = await mount<HooksConfig>(<ProductsPage />, {\n    hooksConfig: { enableRouting: true },\n  });\n  await expect(component.getByRole('link')).toHaveAttribute('href', '/products/42');\n});\n"})})]}),(0,o.jsxs)(l.A,{value:"solid",children:[(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",metastring:'title="playwright/index.tsx"',children:"import { beforeMount, afterMount } from '@playwright/experimental-ct-solid/hooks';\nimport { Router } from '@solidjs/router';\n\nexport type HooksConfig = {\n  enableRouting?: boolean;\n}\n\nbeforeMount<HooksConfig>(async ({ App, hooksConfig }) => {\n  if (hooksConfig?.enableRouting)\n    return <Router><App /></Router>;\n});\n"})}),(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",metastring:'title="src/pages/ProductsPage.spec.tsx"',children:"import { test, expect } from '@playwright/experimental-ct-solid';\nimport type { HooksConfig } from '../playwright';\nimport { ProductsPage } from './pages/ProductsPage';\n\ntest('configure routing through hooks config', async ({ page, mount }) => {\n  const component = await mount<HooksConfig>(<ProductsPage />, {\n    hooksConfig: { enableRouting: true },\n  });\n  await expect(component.getByRole('link')).toHaveAttribute('href', '/products/42');\n});\n"})})]}),(0,o.jsxs)(l.A,{value:"vue3",children:[(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",metastring:'title="playwright/index.ts"',children:"import { beforeMount, afterMount } from '@playwright/experimental-ct-vue/hooks';\nimport { router } from '../src/router';\n\nexport type HooksConfig = {\n  enableRouting?: boolean;\n}\n\nbeforeMount<HooksConfig>(async ({ app, hooksConfig }) => {\n  if (hooksConfig?.enableRouting)\n    app.use(router);\n});\n"})}),(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",metastring:'title="src/pages/ProductsPage.spec.ts"',children:"import { test, expect } from '@playwright/experimental-ct-vue';\nimport type { HooksConfig } from '../playwright';\nimport ProductsPage from './pages/ProductsPage.vue';\n\ntest('configure routing through hooks config', async ({ page, mount }) => {\n  const component = await mount<HooksConfig>(ProductsPage, {\n    hooksConfig: { enableRouting: true },\n  });\n  await expect(component.getByRole('link')).toHaveAttribute('href', '/products/42');\n});\n"})})]}),(0,o.jsxs)(l.A,{value:"vue2",children:[(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",metastring:'title="playwright/index.ts"',children:"import { beforeMount, afterMount } from '@playwright/experimental-ct-vue2/hooks';\nimport Router from 'vue-router';\nimport { router } from '../src/router';\n\nexport type HooksConfig = {\n  enableRouting?: boolean;\n}\n\nbeforeMount<HooksConfig>(async ({ app, hooksConfig }) => {\n  if (hooksConfig?.enableRouting) {\n    Vue.use(Router);\n    return { router }\n  }\n});\n"})}),(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",metastring:'title="src/pages/ProductsPage.spec.ts"',children:"import { test, expect } from '@playwright/experimental-ct-vue2';\nimport type { HooksConfig } from '../playwright';\nimport ProductsPage from './pages/ProductsPage.vue';\n\ntest('configure routing through hooks config', async ({ page, mount }) => {\n  const component = await mount<HooksConfig>(ProductsPage, {\n    hooksConfig: { enableRouting: true },\n  });\n  await expect(component.getByRole('link')).toHaveAttribute('href', '/products/42');\n});\n"})})]})]}),"\n",(0,o.jsx)(n.h3,{id:"\u5378\u8f09",children:"\u5378\u8f09"}),"\n",(0,o.jsx)(n.p,{children:'\u5c07\u5df2\u639b\u8f09\u7684\u5143\u4ef6\u5f9e DOM \u4e2d\u5378\u8f09\u3002\u9019\u5c0d\u65bc\u6e2c\u8a66\u5143\u4ef6\u5728\u5378\u8f09\u6642\u7684\u884c\u70ba\u975e\u5e38\u6709\u7528\u3002\u4f7f\u7528\u6848\u4f8b\u5305\u62ec\u6e2c\u8a66 "\u60a8\u78ba\u5b9a\u8981\u96e2\u958b\u55ce\uff1f" \u6a21\u614b\u8996\u7a97 (model dialog) \u6216\u78ba\u4fdd\u6b63\u78ba\u6e05\u7406\u4e8b\u4ef6\u8655\u7406\u5668\u4ee5\u9632\u6b62\u8a18\u61b6\u9ad4\u6d29\u6f0f\u3002'}),"\n",(0,o.jsxs)(a.A,{defaultValue:"react",values:[{label:"React",value:"react"},{label:"Solid",value:"solid"},{label:"Svelte",value:"svelte"},{label:"Vue",value:"vue"}],children:[(0,o.jsx)(l.A,{value:"react",children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"test('unmount', async ({ mount }) => {\n  const component = await mount(<Component/>);\n  await component.unmount();\n});\n"})})}),(0,o.jsx)(l.A,{value:"solid",children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"test('unmount', async ({ mount }) => {\n  const component = await mount(<Component/>);\n  await component.unmount();\n});\n"})})}),(0,o.jsx)(l.A,{value:"svelte",children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"test('unmount', async ({ mount }) => {\n  const component = await mount(Component);\n  await component.unmount();\n});\n"})})}),(0,o.jsx)(l.A,{value:"vue",children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"test('unmount', async ({ mount }) => {\n  const component = await mount(Component);\n  await component.unmount();\n});\n"})})})]}),"\n",(0,o.jsx)(n.h3,{id:"\u66f4\u65b0",children:"\u66f4\u65b0"}),"\n",(0,o.jsx)(n.p,{children:"\u66f4\u65b0\u5df2\u639b\u8f09\u5143\u4ef6\u7684 props\u3001slots/children \u548c/\u6216 events/callbacks\u3002\u9019\u4e9b\u5143\u4ef6\u8f38\u5165\u53ef\u4ee5\u96a8\u6642\u8b8a\u66f4\uff0c\u901a\u5e38\u7531\u7236\u5143\u4ef6\u63d0\u4f9b\uff0c\u4f46\u6709\u6642\u9700\u8981\u78ba\u4fdd\u60a8\u7684\u5143\u4ef6\u5c0d\u65b0\u8f38\u5165\u7684\u884c\u70ba\u9069\u7576\u3002"}),"\n",(0,o.jsxs)(a.A,{defaultValue:"react",values:[{label:"React",value:"react"},{label:"Solid",value:"solid"},{label:"Svelte",value:"svelte"},{label:"Vue",value:"vue"}],children:[(0,o.jsx)(l.A,{value:"react",children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"test('update', async ({ mount }) => {\n  const component = await mount(<Component/>);\n  await component.update(\n      <Component msg=\"greetings\" callback={() => {}}>Child</Component>\n  );\n});\n"})})}),(0,o.jsx)(l.A,{value:"solid",children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"test('update', async ({ mount }) => {\n  const component = await mount(<Component/>);\n  await component.update(\n      <Component msg=\"greetings\" callback={() => {}}>Child</Component>\n  );\n});\n"})})}),(0,o.jsx)(l.A,{value:"svelte",children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"test('update', async ({ mount }) => {\n  const component = await mount(Component);\n  await component.update({\n    props: { msg: 'greetings' },\n    on: { callback: () => {} },\n    slots: { default: 'Child' }\n  });\n});\n"})})}),(0,o.jsx)(l.A,{value:"vue",children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"test('update', async ({ mount }) => {\n  const component = await mount(Component);\n  await component.update({\n    props: { msg: 'greetings' },\n    on: { callback: () => {} },\n    slots: { default: 'Child' }\n  });\n});\n"})})})]}),"\n",(0,o.jsx)(n.h3,{id:"\u8655\u7406\u7db2\u8def\u8acb\u6c42",children:"\u8655\u7406\u7db2\u8def\u8acb\u6c42"}),"\n",(0,o.jsxs)(n.p,{children:["Playwright \u63d0\u4f9b\u4e00\u500b",(0,o.jsx)(n.strong,{children:"\u5be6\u9a57\u6027"}),"\u7684 ",(0,o.jsx)(n.code,{children:"router"})," \u56fa\u5b9a\u88dd\u7f6e\u4f86\u6514\u622a\u548c\u8655\u7406\u7db2\u8def\u8acb\u6c42\u3002\u6709\u5169\u7a2e\u65b9\u5f0f\u4f7f\u7528 ",(0,o.jsx)(n.code,{children:"router"})," \u56fa\u5b9a\u88dd\u7f6e:"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\u547c\u53eb ",(0,o.jsx)(n.code,{children:"router.route(url, handler)"}),"\uff0c\u5176\u884c\u70ba\u985e\u4f3c\u65bc ",(0,o.jsx)(n.a,{href:"/docs/api/class-page#page-route",children:"page.route()"}),"\u3002\u8a73\u60c5\u8acb\u53c3\u898b",(0,o.jsx)(n.a,{href:"/docs/mock",children:"\u7db2\u8def\u6a21\u64ec\u6307\u5357"}),"\u3002"]}),"\n",(0,o.jsxs)(n.li,{children:["\u547c\u53eb ",(0,o.jsx)(n.code,{children:"router.use(handlers)"})," \u4e26\u50b3\u905e ",(0,o.jsx)(n.a,{href:"https://mswjs.io/",children:"MSW \u51fd\u5f0f\u5eab"})," \u7684\u8acb\u6c42\u8655\u7406\u5668\u7d66\u5b83\u3002"]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"\u9019\u88e1\u662f\u4e00\u500b\u5728\u6e2c\u8a66\u4e2d\u91cd\u8907\u4f7f\u7528\u73fe\u6709 MSW \u8655\u7406\u5668\u7684\u7bc4\u4f8b\u3002"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"import { handlers } from '@src/mocks/handlers';\n\ntest.beforeEach(async ({ router }) => {\n  // install common handlers before each test\n  await router.use(...handlers);\n});\n\ntest('example test', async ({ mount }) => {\n  // test as usual, your handlers are active\n  // ...\n});\n"})}),"\n",(0,o.jsx)(n.p,{children:"\u4f60\u4e5f\u53ef\u4ee5\u70ba\u7279\u5b9a\u6e2c\u8a66\u5f15\u5165\u4e00\u6b21\u6027\u8655\u7406\u7a0b\u5f0f\u3002"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"import { http, HttpResponse } from 'msw';\n\ntest('example test', async ({ mount, router }) => {\n  await router.use(http.get('/data', async ({ request }) => {\n    return HttpResponse.json({ value: 'mocked' });\n  }));\n\n  // test as usual, your handler is active\n  // ...\n});\n"})}),"\n",(0,o.jsx)(n.h2,{id:"\u5e38\u898b\u554f\u984c",children:"\u5e38\u898b\u554f\u984c"}),"\n",(0,o.jsxs)(n.h3,{id:"playwrighttest-\u548c-playwrightexperimental-ct-reactsveltevuesolid-\u4e4b\u9593\u6709\u4ec0\u9ebc\u5340\u5225",children:[(0,o.jsx)(n.code,{children:"@playwright/test"})," \u548c ",(0,o.jsx)(n.code,{children:"@playwright/experimental-ct-{react,svelte,vue,solid}"})," \u4e4b\u9593\u6709\u4ec0\u9ebc\u5340\u5225?"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"test('\u2026', async ({ mount, page, context }) => {\n  // \u2026\n});\n"})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"@playwright/experimental-ct-{react,svelte,vue,solid}"})," \u5305\u88dd ",(0,o.jsx)(n.code,{children:"@playwright/test"})," \u4ee5\u63d0\u4f9b\u4e00\u500b\u984d\u5916\u7684\u5167\u5efa\u5143\u4ef6\u6e2c\u8a66\u5c08\u7528\u7684\u56fa\u5b9a\u88dd\u7f6e\uff0c\u7a31\u70ba ",(0,o.jsx)(n.code,{children:"mount"}),":"]}),"\n",(0,o.jsxs)(a.A,{defaultValue:"react",values:[{label:"React",value:"react"},{label:"Solid",value:"solid"},{label:"Svelte",value:"svelte"},{label:"Vue",value:"vue"}],children:[(0,o.jsx)(l.A,{value:"react",children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"import { test, expect } from '@playwright/experimental-ct-react';\nimport HelloWorld from './HelloWorld';\n\ntest.use({ viewport: { width: 500, height: 500 } });\n\ntest('should work', async ({ mount }) => {\n  const component = await mount(<HelloWorld msg=\"greetings\" />);\n  await expect(component).toContainText('Greetings');\n});\n"})})}),(0,o.jsx)(l.A,{value:"vue",children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"import { test, expect } from '@playwright/experimental-ct-vue';\nimport HelloWorld from './HelloWorld.vue';\n\ntest.use({ viewport: { width: 500, height: 500 } });\n\ntest('should work', async ({ mount }) => {\n  const component = await mount(HelloWorld, {\n    props: {\n      msg: 'Greetings',\n    },\n  });\n  await expect(component).toContainText('Greetings');\n});\n"})})}),(0,o.jsx)(l.A,{value:"svelte",children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"import { test, expect } from '@playwright/experimental-ct-svelte';\nimport HelloWorld from './HelloWorld.svelte';\n\ntest.use({ viewport: { width: 500, height: 500 } });\n\ntest('should work', async ({ mount }) => {\n  const component = await mount(HelloWorld, {\n    props: {\n      msg: 'Greetings',\n    },\n  });\n  await expect(component).toContainText('Greetings');\n});\n"})})}),(0,o.jsx)(l.A,{value:"solid",children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"import { test, expect } from '@playwright/experimental-ct-solid';\nimport HelloWorld from './HelloWorld';\n\ntest.use({ viewport: { width: 500, height: 500 } });\n\ntest('should work', async ({ mount }) => {\n  const component = await mount(<HelloWorld msg=\"greetings\" />);\n  await expect(component).toContainText('Greetings');\n});\n"})})})]}),"\n",(0,o.jsxs)(n.p,{children:["\u6b64\u5916\uff0c\u5b83\u589e\u52a0\u4e86\u4e00\u4e9b\u53ef\u4ee5\u5728 ",(0,o.jsx)(n.code,{children:"playwright-ct.config.{ts,js}"})," \u4e2d\u4f7f\u7528\u7684\u914d\u7f6e\u9078\u9805\u3002"]}),"\n",(0,o.jsxs)(n.p,{children:["\u6700\u5f8c\uff0c\u5728\u5e95\u5c64\uff0c\u6bcf\u500b\u6e2c\u8a66\u90fd\u6703\u91cd\u65b0\u4f7f\u7528 ",(0,o.jsx)(n.code,{children:"context"})," \u548c ",(0,o.jsx)(n.code,{children:"page"})," \u56fa\u4ef6\u4f5c\u70ba\u5143\u4ef6\u6e2c\u8a66\u7684\u901f\u5ea6\u6700\u4f73\u5316\u3002\u5b83\u6703\u5728\u6bcf\u500b\u6e2c\u8a66\u4e4b\u9593\u91cd\u7f6e\u5b83\u5011\uff0c\u56e0\u6b64\u61c9\u8a72\u5728\u529f\u80fd\u4e0a\u7b49\u540c\u65bc ",(0,o.jsx)(n.code,{children:"@playwright/test"})," \u4fdd\u8b49\u6bcf\u500b\u6e2c\u8a66\u90fd\u6703\u7372\u5f97\u4e00\u500b\u65b0\u7684\u3001\u9694\u96e2\u7684 ",(0,o.jsx)(n.code,{children:"context"})," \u548c ",(0,o.jsx)(n.code,{children:"page"})," \u56fa\u4ef6\u3002"]}),"\n",(0,o.jsx)(n.h3,{id:"\u6211\u6709\u4e00\u500b\u5df2\u7d93\u4f7f\u7528-vite-\u7684\u5c08\u6848\u6211\u53ef\u4ee5\u91cd\u8907\u4f7f\u7528\u9019\u500b\u914d\u7f6e\u55ce",children:"\u6211\u6709\u4e00\u500b\u5df2\u7d93\u4f7f\u7528 Vite \u7684\u5c08\u6848\u3002\u6211\u53ef\u4ee5\u91cd\u8907\u4f7f\u7528\u9019\u500b\u914d\u7f6e\u55ce\uff1f"}),"\n",(0,o.jsxs)(n.p,{children:["\u6b64\u6642\uff0cPlaywright \u662f\u8207\u6253\u5305\u5de5\u5177\u7121\u95dc\u7684\uff0c\u56e0\u6b64\u5b83\u4e0d\u6703\u91cd\u7528\u4f60\u73fe\u6709\u7684 Vite \u914d\u7f6e\u3002\u4f60\u7684\u914d\u7f6e\u53ef\u80fd\u5305\u542b\u5f88\u591a\u6211\u5011\u7121\u6cd5\u91cd\u7528\u7684\u6771\u897f\u3002\u6240\u4ee5\u73fe\u5728\uff0c\u4f60\u9700\u8981\u5c07\u8def\u5f91\u6620\u5c04\u548c\u5176\u4ed6\u9ad8\u7d1a\u8a2d\u5b9a\u8907\u88fd\u5230 Playwright \u914d\u7f6e\u7684 ",(0,o.jsx)(n.code,{children:"ctViteConfig"})," \u5c6c\u6027\u4e2d\u3002"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"import { defineConfig } from '@playwright/experimental-ct-react';\n\nexport default defineConfig({\n  use: {\n    ctViteConfig: {\n      // ...\n    },\n  },\n});\n"})}),"\n",(0,o.jsxs)(n.p,{children:["\u4f60\u53ef\u4ee5\u900f\u904e Vite \u914d\u7f6e\u4f86\u6307\u5b9a\u5916\u639b\u4ee5\u6e2c\u8a66\u8a2d\u5b9a\u3002\u8acb\u6ce8\u610f\uff0c\u4e00\u65e6\u4f60\u958b\u59cb\u6307\u5b9a\u5916\u639b\uff0c\u4f60\u4e5f\u9700\u8981\u8ca0\u8cac\u6307\u5b9a\u6846\u67b6\u5916\u639b\uff0c\u5728\u9019\u500b\u4f8b\u5b50\u4e2d\u662f ",(0,o.jsx)(n.code,{children:"vue()"}),"\uff1a"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"import { defineConfig, devices } from '@playwright/experimental-ct-vue';\n\nimport { resolve } from 'path';\nimport vue from '@vitejs/plugin-vue';\nimport AutoImport from 'unplugin-auto-import/vite';\nimport Components from 'unplugin-vue-components/vite';\n\nexport default defineConfig({\n  testDir: './tests/component',\n  use: {\n    trace: 'on-first-retry',\n    ctViteConfig: {\n      plugins: [\n        vue(),\n        AutoImport({\n          imports: [\n            'vue',\n            'vue-router',\n            '@vueuse/head',\n            'pinia',\n            {\n              '@/store': ['useStore'],\n            },\n          ],\n          dts: 'src/auto-imports.d.ts',\n          eslintrc: {\n            enabled: true,\n          },\n        }),\n        Components({\n          dirs: ['src/components'],\n          extensions: ['vue'],\n        }),\n      ],\n      resolve: {\n        alias: {\n          '@': resolve(__dirname, './src'),\n        },\n      },\n    },\n  },\n});\n"})}),"\n",(0,o.jsx)(n.h3,{id:"\u6211\u5982\u4f55\u6e2c\u8a66\u4f7f\u7528-pinia-\u7684\u5143\u4ef6",children:"\u6211\u5982\u4f55\u6e2c\u8a66\u4f7f\u7528 Pinia \u7684\u5143\u4ef6\uff1f"}),"\n",(0,o.jsxs)(n.p,{children:["Pinia \u9700\u8981\u5728 ",(0,o.jsx)(n.code,{children:"playwright/index.{js,ts,jsx,tsx}"})," \u4e2d\u521d\u59cb\u5316\u3002\u5982\u679c\u4f60\u5728 ",(0,o.jsx)(n.code,{children:"beforeMount"})," \u9264\u5b50\u5167\u57f7\u884c\u6b64\u64cd\u4f5c\uff0c",(0,o.jsx)(n.code,{children:"initialState"})," \u53ef\u4ee5\u5728\u6bcf\u6b21\u6e2c\u8a66\u6642\u88ab\u8986\u5beb:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",metastring:'title="playwright/index.ts"',children:"import { beforeMount, afterMount } from '@playwright/experimental-ct-vue/hooks';\nimport { createTestingPinia } from '@pinia/testing';\nimport type { StoreState } from 'pinia';\nimport type { useStore } from '../src/store';\n\nexport type HooksConfig = {\n  store?: StoreState<ReturnType<typeof useStore>>;\n}\n\nbeforeMount<HooksConfig>(async ({ hooksConfig }) => {\n  createTestingPinia({\n    initialState: hooksConfig?.store,\n    /**\n     * Use http intercepting to mock api calls instead:\n     * https://playwright.dev/docs/mock#mock-api-requests\n     */\n    stubActions: false,\n    createSpy(args) {\n      console.log('spy', args)\n      return () => console.log('spy-returns')\n    },\n  });\n});\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",metastring:'title="src/pinia.spec.ts"',children:"import { test, expect } from '@playwright/experimental-ct-vue';\nimport type { HooksConfig } from '../playwright';\nimport Store from './Store.vue';\n\ntest('override initialState ', async ({ mount }) => {\n  const component = await mount<HooksConfig>(Store, {\n    hooksConfig: {\n      store: { name: 'override initialState' }\n    }\n  });\n  await expect(component).toContainText('override initialState');\n});\n"})}),"\n",(0,o.jsx)(n.h3,{id:"\u6211\u5982\u4f55\u5b58\u53d6\u5143\u4ef6\u7684\u65b9\u6cd5\u6216\u5176\u5be6\u4f8b",children:"\u6211\u5982\u4f55\u5b58\u53d6\u5143\u4ef6\u7684\u65b9\u6cd5\u6216\u5176\u5be6\u4f8b\uff1f"}),"\n",(0,o.jsx)(n.p,{children:"\u5728\u6e2c\u8a66\u7a0b\u5f0f\u78bc\u4e2d\u5b58\u53d6\u5143\u4ef6\u7684\u5167\u90e8\u65b9\u6cd5\u6216\u5176\u5be6\u4f8b\u65e2\u4e0d\u5efa\u8b70\u4e5f\u4e0d\u652f\u63f4\u3002\u76f8\u53cd\u5730\uff0c\u61c9\u5c08\u6ce8\u65bc\u5f9e\u4f7f\u7528\u8005\u7684\u89d2\u5ea6\u89c0\u5bdf\u548c\u4e92\u52d5\u5143\u4ef6\uff0c\u901a\u5e38\u662f\u901a\u904e\u9ede\u64ca\u6216\u9a57\u8b49\u9801\u9762\u4e0a\u662f\u5426\u6709\u6771\u897f\u53ef\u898b\u3002\u7576\u6e2c\u8a66\u907f\u514d\u8207\u5167\u90e8\u5be6\u4f5c\u7d30\u7bc0\uff08\u5982\u5143\u4ef6\u5be6\u4f8b\u6216\u5176\u65b9\u6cd5\uff09\u4e92\u52d5\u6642\uff0c\u6e2c\u8a66\u6703\u8b8a\u5f97\u4e0d\u90a3\u9ebc\u8106\u5f31\u4e14\u66f4\u6709\u50f9\u503c\u3002\u8acb\u8a18\u4f4f\uff0c\u5982\u679c\u5f9e\u4f7f\u7528\u8005\u7684\u89d2\u5ea6\u57f7\u884c\u6e2c\u8a66\u5931\u6557\uff0c\u9019\u5f88\u53ef\u80fd\u610f\u5473\u8457\u81ea\u52d5\u5316\u6e2c\u8a66\u5df2\u7d93\u767c\u73fe\u4e86\u7a0b\u5f0f\u78bc\u4e2d\u7684\u771f\u6b63\u932f\u8aa4\u3002"})]})}function m(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(h,{...e})}):h(e)}},4562:(e,n,t)=>{t.d(n,{A:()=>i});var o=t(4848),s=t(6540),a=function(){return a=Object.assign||function(e){for(var n,t=1,o=arguments.length;t<o;t++)for(var s in n=arguments[t])Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s]);return e},a.apply(this,arguments)};var l=s.forwardRef((function(e,n){var t=s.useState(!1),o=t[0],l=t[1],r=s.useState(!1),i=r[0],c=r[1],d=encodeURIComponent(e.id),p="string"==typeof e.playlistCoverId?encodeURIComponent(e.playlistCoverId):null,u=e.title,h=e.poster||"hqdefault",m="&".concat(e.params)||0,g=e.muted?"&mute=1":"",x=e.announce||"Watch",j=e.webp?"webp":"jpg",v=e.webp?"vi_webp":"vi",w=e.thumbnail||(e.playlist?"https://i.ytimg.com/".concat(v,"/").concat(p,"/").concat(h,".").concat(j):"https://i.ytimg.com/".concat(v,"/").concat(d,"/").concat(h,".").concat(j)),f=e.noCookie;f=e.cookie?"https://www.youtube.com":"https://www.youtube-nocookie.com";var y=e.playlist?"".concat(f,"/embed/videoseries?autoplay=1").concat(g,"&list=").concat(d).concat(m):"".concat(f,"/embed/").concat(d,"?autoplay=1&state=1").concat(g).concat(m),b=e.activatedClass||"lyt-activated",k=e.adNetwork||!1,C=e.aspectHeight||9,A=e.aspectWidth||16,N=e.iframeClass||"",P=e.playerClass||"lty-playbtn",S=e.wrapperClass||"yt-lite",R=e.onIframeAdded||function(){},H=e.rel?"prefetch":"preload",M=e.containerElement||"article";return s.useEffect((function(){i&&R()}),[i]),s.createElement(s.Fragment,null,s.createElement("link",{rel:H,href:w,as:"image"}),s.createElement(s.Fragment,null,o&&s.createElement(s.Fragment,null,s.createElement("link",{rel:"preconnect",href:f}),s.createElement("link",{rel:"preconnect",href:"https://www.google.com"}),k&&s.createElement(s.Fragment,null,s.createElement("link",{rel:"preconnect",href:"https://static.doubleclick.net"}),s.createElement("link",{rel:"preconnect",href:"https://googleads.g.doubleclick.net"})))),s.createElement(M,{onPointerOver:function(){o||l(!0)},onClick:function(){i||c(!0)},className:"".concat(S," ").concat(i?b:""),"data-title":u,style:a({backgroundImage:"url(".concat(w,")")},{"--aspect-ratio":"".concat(C/A*100,"%")})},s.createElement("button",{type:"button",className:P,"aria-label":"".concat(x," ").concat(u)}),i&&s.createElement("iframe",{ref:n,className:N,title:u,width:"560",height:"315",frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,src:y})))}));const r="videoContainer_NvH5";const i=function({id:e,title:n,thumbnail:t}){return(0,o.jsx)("div",{className:r,children:(0,o.jsx)(l,{thumbnail:t,id:e,params:"autoplay=1&autohide=1&showinfo=0&rel=0",title:n,poster:"maxresdefault",webp:!0})})}}}]);