"use strict";(self.webpackChunkplaywright_dev=self.webpackChunkplaywright_dev||[]).push([[5558],{850:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>h,contentTitle:()=>r,default:()=>u,frontMatter:()=>l,metadata:()=>c,toc:()=>d});var n=s(4848),a=s(8453),i=s(4235),o=s(8328);s(3078);const l={id:"test-annotations",title:"Annotations"},r=void 0,c={id:"test-annotations",title:"Annotations",description:"Introduction",source:"@site/docs/test-annotations.mdx",sourceDirName:".",slug:"/test-annotations",permalink:"/docs/next/test-annotations",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{id:"test-annotations",title:"Annotations"},sidebar:"docs",previous:{title:"Test use options",permalink:"/docs/next/test-use-options"},next:{title:"Command line",permalink:"/docs/next/test-cli"}},h={},d=[{value:"Introduction",id:"introduction",level:2},{value:"Focus a test",id:"focus-a-test",level:2},{value:"Skip a test",id:"skip-a-test",level:2},{value:"Conditionally skip a test",id:"conditionally-skip-a-test",level:2},{value:"Group tests",id:"group-tests",level:2},{value:"Tag tests",id:"tag-tests",level:2},{value:"Annotate tests",id:"annotate-tests",level:2},{value:"Conditionally skip a group of tests",id:"conditionally-skip-a-group-of-tests",level:2},{value:"Use fixme in <code>beforeEach</code> hook",id:"use-fixme-in-beforeeach-hook",level:2},{value:"Runtime annotations",id:"runtime-annotations",level:2}];function p(e){const t={a:"a",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.h2,{id:"introduction",children:"Introduction"}),"\n",(0,n.jsx)(t.p,{children:"Playwright supports tags and annotations that are displayed in the test report."}),"\n",(0,n.jsx)(t.p,{children:"You can add your own tags and annotations at any moment, but Playwright comes with a few built-in ones:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.a,{href:"/docs/next/api/class-test#test-skip",children:"test.skip()"})," marks the test as irrelevant. Playwright does not run such a test. Use this annotation when the test is not applicable in some configuration."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.a,{href:"/docs/next/api/class-test#test-fail",children:"test.fail()"})," marks the test as failing. Playwright will run this test and ensure it does indeed fail. If the test does not fail, Playwright will complain."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.a,{href:"/docs/next/api/class-test#test-fixme",children:"test.fixme()"})," marks the test as failing. Playwright will not run this test, as opposed to the ",(0,n.jsx)(t.code,{children:"fail"})," annotation. Use ",(0,n.jsx)(t.code,{children:"fixme"})," when running the test is slow or crashes."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.a,{href:"/docs/next/api/class-test#test-slow",children:"test.slow()"})," marks the test as slow and triples the test timeout."]}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:"Annotations can be added to a single test or a group of tests."}),"\n",(0,n.jsx)(t.p,{children:"Built-in annotations can be conditional, in which case they apply when the condition is truthy, and may depend on test fixtures. There could be multiple annotations on the same test, possibly in different configurations."}),"\n",(0,n.jsx)(t.h2,{id:"focus-a-test",children:"Focus a test"}),"\n",(0,n.jsx)(t.p,{children:"You can focus some tests. When there are focused tests, only these tests run."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-js",children:"test.only('focus this test', async ({ page }) => {\n  // Run only focused tests in the entire project.\n});\n"})}),"\n",(0,n.jsx)(t.h2,{id:"skip-a-test",children:"Skip a test"}),"\n",(0,n.jsx)(t.p,{children:"Mark a test as skipped."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-js",children:"test.skip('skip this test', async ({ page }) => {\n  // This test is not run\n});\n"})}),"\n",(0,n.jsx)(t.h2,{id:"conditionally-skip-a-test",children:"Conditionally skip a test"}),"\n",(0,n.jsx)(t.p,{children:"You can skip certain test based on the condition."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-js",children:"test('skip this test', async ({ page, browserName }) => {\n  test.skip(browserName === 'firefox', 'Still working on it');\n});\n"})}),"\n",(0,n.jsx)(t.h2,{id:"group-tests",children:"Group tests"}),"\n",(0,n.jsx)(t.p,{children:"You can group tests to give them a logical name or to scope before/after hooks to the group."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-js",children:"import { test, expect } from '@playwright/test';\n\ntest.describe('two tests', () => {\n  test('one', async ({ page }) => {\n    // ...\n  });\n\n  test('two', async ({ page }) => {\n    // ...\n  });\n});\n"})}),"\n",(0,n.jsx)(t.h2,{id:"tag-tests",children:"Tag tests"}),"\n",(0,n.jsxs)(t.p,{children:["Sometimes you want to tag your tests as ",(0,n.jsx)(t.code,{children:"@fast"})," or ",(0,n.jsx)(t.code,{children:"@slow"}),", and then filter by tag in the test report. Or you might want to only run tests that have a certain tag."]}),"\n",(0,n.jsxs)(t.p,{children:["To tag a test, either provide an additional details object when declaring a test, or add ",(0,n.jsx)(t.code,{children:"@"}),"-token to the test title. Note that tags must start with ",(0,n.jsx)(t.code,{children:"@"})," symbol."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-js",children:"import { test, expect } from '@playwright/test';\n\ntest('test login page', {\n  tag: '@fast',\n}, async ({ page }) => {\n  // ...\n});\n\ntest('test full report @slow', async ({ page }) => {\n  // ...\n});\n"})}),"\n",(0,n.jsx)(t.p,{children:"You can also tag all tests in a group or provide multiple tags:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-js",children:"import { test, expect } from '@playwright/test';\n\ntest.describe('group', {\n  tag: '@report',\n}, () => {\n  test('test report header', async ({ page }) => {\n    // ...\n  });\n\n  test('test full report', {\n    tag: ['@slow', '@vrt'],\n  }, async ({ page }) => {\n    // ...\n  });\n});\n"})}),"\n",(0,n.jsxs)(t.p,{children:["You can now run tests that have a particular tag with ",(0,n.jsx)(t.a,{href:"/docs/next/test-cli#reference",children:(0,n.jsx)(t.code,{children:"--grep"})})," command line option."]}),"\n",(0,n.jsxs)(i.A,{groupId:"bash-flavor",defaultValue:"bash",values:[{label:"Bash",value:"bash"},{label:"PowerShell",value:"powershell"},{label:"Batch",value:"batch"}],children:[(0,n.jsx)(o.A,{value:"bash",children:(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:"npx playwright test --grep @fast\n"})})}),(0,n.jsx)(o.A,{value:"powershell",children:(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-powershell",children:'npx playwright test --grep "@fast"\n'})})}),(0,n.jsx)(o.A,{value:"batch",children:(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-batch",children:"npx playwright test --grep @fast\n"})})})]}),"\n",(0,n.jsx)(t.p,{children:"Or if you want the opposite, you can skip the tests with a certain tag:"}),"\n",(0,n.jsxs)(i.A,{groupId:"bash-flavor",defaultValue:"bash",values:[{label:"Bash",value:"bash"},{label:"PowerShell",value:"powershell"},{label:"Batch",value:"batch"}],children:[(0,n.jsx)(o.A,{value:"bash",children:(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:"npx playwright test --grep-invert @fast\n"})})}),(0,n.jsx)(o.A,{value:"powershell",children:(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-powershell",children:'npx playwright test --grep-invert "@fast"\n'})})}),(0,n.jsx)(o.A,{value:"batch",children:(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-batch",children:"npx playwright test --grep-invert @fast\n"})})})]}),"\n",(0,n.jsxs)(t.p,{children:["To run tests containing either tag (logical ",(0,n.jsx)(t.code,{children:"OR"})," operator):"]}),"\n",(0,n.jsxs)(i.A,{groupId:"bash-flavor",defaultValue:"bash",values:[{label:"Bash",value:"bash"},{label:"PowerShell",value:"powershell"},{label:"Batch",value:"batch"}],children:[(0,n.jsx)(o.A,{value:"bash",children:(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:'npx playwright test --grep "@fast|@slow"\n'})})}),(0,n.jsx)(o.A,{value:"powershell",children:(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-powershell",children:'npx playwright test --grep --% "@fast^|@slow"\n'})})}),(0,n.jsx)(o.A,{value:"batch",children:(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-batch",children:'npx playwright test --grep "@fast^|@slow"\n'})})})]}),"\n",(0,n.jsxs)(t.p,{children:["Or run tests containing both tags (logical ",(0,n.jsx)(t.code,{children:"AND"})," operator) using regex lookaheads:"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:'npx playwright test --grep "(?=.*@fast)(?=.*@slow)"\n'})}),"\n",(0,n.jsxs)(t.p,{children:["You can also filter tests in the configuration file via ",(0,n.jsx)(t.a,{href:"/docs/next/api/class-testconfig#test-config-grep",children:"testConfig.grep"})," and ",(0,n.jsx)(t.a,{href:"/docs/next/api/class-testproject#test-project-grep",children:"testProject.grep"}),"."]}),"\n",(0,n.jsx)(t.h2,{id:"annotate-tests",children:"Annotate tests"}),"\n",(0,n.jsxs)(t.p,{children:["If you would like to annotate your tests with something more substantial than a tag, you can do that when declaring a test. Annotations have a ",(0,n.jsx)(t.code,{children:"type"})," and a ",(0,n.jsx)(t.code,{children:"description"})," for more context and available in reporter API. Playwright's built-in HTML reporter shows all annotations, except those where ",(0,n.jsx)(t.code,{children:"type"})," starts with ",(0,n.jsx)(t.code,{children:"_"})," symbol."]}),"\n",(0,n.jsx)(t.p,{children:"For example, to annotate a test with an issue url:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-js",children:"import { test, expect } from '@playwright/test';\n\ntest('test login page', {\n  annotation: {\n    type: 'issue',\n    description: 'https://github.com/microsoft/playwright/issues/23180',\n  },\n}, async ({ page }) => {\n  // ...\n});\n"})}),"\n",(0,n.jsx)(t.p,{children:"You can also annotate all tests in a group or provide multiple annotations:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-js",children:"import { test, expect } from '@playwright/test';\n\ntest.describe('report tests', {\n  annotation: { type: 'category', description: 'report' },\n}, () => {\n  test('test report header', async ({ page }) => {\n    // ...\n  });\n\n  test('test full report', {\n    annotation: [\n      { type: 'issue', description: 'https://github.com/microsoft/playwright/issues/23180' },\n      { type: 'performance', description: 'very slow test!' },\n    ],\n  }, async ({ page }) => {\n    // ...\n  });\n});\n"})}),"\n",(0,n.jsx)(t.h2,{id:"conditionally-skip-a-group-of-tests",children:"Conditionally skip a group of tests"}),"\n",(0,n.jsx)(t.p,{children:"For example, you can run a group of tests just in Chromium by passing a callback."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-js",metastring:'title="example.spec.ts"',children:"\ntest.describe('chromium only', () => {\n  test.skip(({ browserName }) => browserName !== 'chromium', 'Chromium only!');\n\n  test.beforeAll(async () => {\n    // This hook is only run in Chromium.\n  });\n\n  test('test 1', async ({ page }) => {\n    // This test is only run in Chromium.\n  });\n\n  test('test 2', async ({ page }) => {\n    // This test is only run in Chromium.\n  });\n});\n"})}),"\n",(0,n.jsxs)(t.h2,{id:"use-fixme-in-beforeeach-hook",children:["Use fixme in ",(0,n.jsx)(t.code,{children:"beforeEach"})," hook"]}),"\n",(0,n.jsxs)(t.p,{children:["To avoid running ",(0,n.jsx)(t.code,{children:"beforeEach"})," hooks, you can put annotations in the hook itself."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-js",metastring:'title="example.spec.ts"',children:"\ntest.beforeEach(async ({ page, isMobile }) => {\n  test.fixme(isMobile, 'Settings page does not work in mobile yet');\n\n  await page.goto('http://localhost:3000/settings');\n});\n\ntest('user profile', async ({ page }) => {\n  await page.getByText('My Profile').click();\n  // ...\n});\n"})}),"\n",(0,n.jsx)(t.h2,{id:"runtime-annotations",children:"Runtime annotations"}),"\n",(0,n.jsxs)(t.p,{children:["While the test is already running, you can add annotations to ",(0,n.jsx)(t.a,{href:"./api/class-testinfo#test-info-annotations",children:(0,n.jsx)(t.code,{children:"test.info().annotations"})}),"."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-js",metastring:'title="example.spec.ts"',children:"\ntest('example test', async ({ page, browser }) => {\n  test.info().annotations.push({\n    type: 'browser version',\n    description: browser.version(),\n  });\n\n  // ...\n});\n"})})]})}function u(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(p,{...e})}):p(e)}}}]);