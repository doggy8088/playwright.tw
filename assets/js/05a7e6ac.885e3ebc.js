"use strict";(self.webpackChunkplaywright_dev=self.webpackChunkplaywright_dev||[]).push([[8183],{287:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>o,contentTitle:()=>t,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>c});var s=n(4848),a=n(8453);n(4235),n(8328),n(3078);const l={id:"class-worker",title:"Worker"},t=void 0,i={id:"api/class-worker",title:"Worker",description:"The Worker class represents a WebWorker. worker event is emitted on the page object to signal a worker creation. close event is emitted on the worker object when the worker is gone.",source:"@site/docs/api/class-worker.mdx",sourceDirName:"api",slug:"/api/class-worker",permalink:"/docs/next/api/class-worker",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{id:"class-worker",title:"Worker"},sidebar:"api",previous:{title:"WebSocket",permalink:"/docs/next/api/class-websocket"},next:{title:"APIResponseAssertions",permalink:"/docs/next/api/class-apiresponseassertions"}},o={},c=[{value:"Methods",id:"methods",level:2},{value:"evaluate",id:"worker-evaluate",level:3},{value:"evaluateHandle",id:"worker-evaluate-handle",level:3},{value:"url",id:"worker-url",level:3},{value:"Events",id:"events",level:2},{value:"on(&#39;close&#39;)",id:"worker-event-close",level:3}];function d(e){const r={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(r.p,{children:["The Worker class represents a ",(0,s.jsx)(r.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API",children:"WebWorker"}),". ",(0,s.jsx)(r.code,{children:"worker"})," event is emitted on the page object to signal a worker creation. ",(0,s.jsx)(r.code,{children:"close"})," event is emitted on the worker object when the worker is gone."]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-js",children:"page.on('worker', worker => {\n  console.log('Worker created: ' + worker.url());\n  worker.on('close', worker => console.log('Worker destroyed: ' + worker.url()));\n});\n\nconsole.log('Current workers:');\nfor (const worker of page.workers())\n  console.log('  ' + worker.url());\n"})}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsx)(r.h2,{id:"methods",children:"Methods"}),"\n",(0,s.jsx)(r.h3,{id:"worker-evaluate",children:"evaluate"}),"\n",(0,s.jsx)("font",{size:"2",style:{position:"relative",top:"-20px"},children:"Added before v1.9"}),"\n",(0,s.jsx)("x-search",{children:"worker.evaluate"}),"\n",(0,s.jsxs)(r.p,{children:["Returns the return value of ",(0,s.jsx)(r.code,{children:"pageFunction"}),"."]}),"\n",(0,s.jsxs)(r.p,{children:["If the function passed to the ",(0,s.jsx)(r.a,{href:"/docs/next/api/class-worker#worker-evaluate",children:"worker.evaluate()"})," returns a ",(0,s.jsx)(r.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise",title:"Promise",children:"Promise"}),", then ",(0,s.jsx)(r.a,{href:"/docs/next/api/class-worker#worker-evaluate",children:"worker.evaluate()"})," would wait for the promise to resolve and return its value."]}),"\n",(0,s.jsxs)(r.p,{children:["If the function passed to the ",(0,s.jsx)(r.a,{href:"/docs/next/api/class-worker#worker-evaluate",children:"worker.evaluate()"})," returns a non-",(0,s.jsx)(r.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Description",title:"Serializable",children:"Serializable"})," value, then ",(0,s.jsx)(r.a,{href:"/docs/next/api/class-worker#worker-evaluate",children:"worker.evaluate()"})," returns ",(0,s.jsx)(r.code,{children:"undefined"}),". Playwright also supports transferring some additional values that are not serializable by ",(0,s.jsx)(r.code,{children:"JSON"}),": ",(0,s.jsx)(r.code,{children:"-0"}),", ",(0,s.jsx)(r.code,{children:"NaN"}),", ",(0,s.jsx)(r.code,{children:"Infinity"}),", ",(0,s.jsx)(r.code,{children:"-Infinity"}),"."]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Usage"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-js",children:"await worker.evaluate(pageFunction);\nawait worker.evaluate(pageFunction, arg);\n"})}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Arguments"})}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.code,{children:"pageFunction"})," ",(0,s.jsx)(r.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function",title:"Function",children:"function"})," | ",(0,s.jsx)(r.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type",title:"string",children:"string"}),(0,s.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"worker-evaluate-option-expression"}),(0,s.jsx)("a",{href:"#worker-evaluate-option-expression",class:"list-anchor",children:"#"})]}),"\n",(0,s.jsx)(r.p,{children:"Function to be evaluated in the worker context."}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.code,{children:"arg"})," ",(0,s.jsx)(r.a,{href:"/docs/next/evaluating#evaluation-argument",title:"EvaluationArgument",children:"EvaluationArgument"})," ",(0,s.jsx)(r.em,{children:"(optional)"}),(0,s.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"worker-evaluate-option-arg"}),(0,s.jsx)("a",{href:"#worker-evaluate-option-arg",class:"list-anchor",children:"#"})]}),"\n",(0,s.jsxs)(r.p,{children:["Optional argument to pass to ",(0,s.jsx)(r.code,{children:"pageFunction"}),"."]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Returns"})}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise",title:"Promise",children:"Promise"}),"<",(0,s.jsx)(r.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Description",title:"Serializable",children:"Serializable"}),">",(0,s.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"worker-evaluate-return"}),(0,s.jsx)("a",{href:"#worker-evaluate-return",class:"list-anchor",children:"#"})]}),"\n"]}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsx)(r.h3,{id:"worker-evaluate-handle",children:"evaluateHandle"}),"\n",(0,s.jsx)("font",{size:"2",style:{position:"relative",top:"-20px"},children:"Added before v1.9"}),"\n",(0,s.jsx)("x-search",{children:"worker.evaluateHandle"}),"\n",(0,s.jsxs)(r.p,{children:["Returns the return value of ",(0,s.jsx)(r.code,{children:"pageFunction"})," as a ",(0,s.jsx)(r.a,{href:"/docs/next/api/class-jshandle",title:"JSHandle",children:"JSHandle"}),"."]}),"\n",(0,s.jsxs)(r.p,{children:["The only difference between ",(0,s.jsx)(r.a,{href:"/docs/next/api/class-worker#worker-evaluate",children:"worker.evaluate()"})," and ",(0,s.jsx)(r.a,{href:"/docs/next/api/class-worker#worker-evaluate-handle",children:"worker.evaluateHandle()"})," is that ",(0,s.jsx)(r.a,{href:"/docs/next/api/class-worker#worker-evaluate-handle",children:"worker.evaluateHandle()"})," returns ",(0,s.jsx)(r.a,{href:"/docs/next/api/class-jshandle",title:"JSHandle",children:"JSHandle"}),"."]}),"\n",(0,s.jsxs)(r.p,{children:["If the function passed to the ",(0,s.jsx)(r.a,{href:"/docs/next/api/class-worker#worker-evaluate-handle",children:"worker.evaluateHandle()"})," returns a ",(0,s.jsx)(r.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise",title:"Promise",children:"Promise"}),", then ",(0,s.jsx)(r.a,{href:"/docs/next/api/class-worker#worker-evaluate-handle",children:"worker.evaluateHandle()"})," would wait for the promise to resolve and return its value."]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Usage"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-js",children:"await worker.evaluateHandle(pageFunction);\nawait worker.evaluateHandle(pageFunction, arg);\n"})}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Arguments"})}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.code,{children:"pageFunction"})," ",(0,s.jsx)(r.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function",title:"Function",children:"function"})," | ",(0,s.jsx)(r.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type",title:"string",children:"string"}),(0,s.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"worker-evaluate-handle-option-expression"}),(0,s.jsx)("a",{href:"#worker-evaluate-handle-option-expression",class:"list-anchor",children:"#"})]}),"\n",(0,s.jsx)(r.p,{children:"Function to be evaluated in the worker context."}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.code,{children:"arg"})," ",(0,s.jsx)(r.a,{href:"/docs/next/evaluating#evaluation-argument",title:"EvaluationArgument",children:"EvaluationArgument"})," ",(0,s.jsx)(r.em,{children:"(optional)"}),(0,s.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"worker-evaluate-handle-option-arg"}),(0,s.jsx)("a",{href:"#worker-evaluate-handle-option-arg",class:"list-anchor",children:"#"})]}),"\n",(0,s.jsxs)(r.p,{children:["Optional argument to pass to ",(0,s.jsx)(r.code,{children:"pageFunction"}),"."]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Returns"})}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise",title:"Promise",children:"Promise"}),"<",(0,s.jsx)(r.a,{href:"/docs/next/api/class-jshandle",title:"JSHandle",children:"JSHandle"}),">",(0,s.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"worker-evaluate-handle-return"}),(0,s.jsx)("a",{href:"#worker-evaluate-handle-return",class:"list-anchor",children:"#"})]}),"\n"]}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsx)(r.h3,{id:"worker-url",children:"url"}),"\n",(0,s.jsx)("font",{size:"2",style:{position:"relative",top:"-20px"},children:"Added before v1.9"}),"\n",(0,s.jsx)("x-search",{children:"worker.url"}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Usage"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-js",children:"worker.url();\n"})}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Returns"})}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type",title:"string",children:"string"}),(0,s.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",class:"list-anchor-link",id:"worker-url-return"}),(0,s.jsx)("a",{href:"#worker-url-return",class:"list-anchor",children:"#"})]}),"\n"]}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsx)(r.h2,{id:"events",children:"Events"}),"\n",(0,s.jsx)(r.h3,{id:"worker-event-close",children:"on('close')"}),"\n",(0,s.jsx)("font",{size:"2",style:{position:"relative",top:"-20px"},children:"Added before v1.9"}),"\n",(0,s.jsx)("x-search",{children:"worker.on('close')"}),"\n",(0,s.jsxs)(r.p,{children:["Emitted when this dedicated ",(0,s.jsx)(r.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API",children:"WebWorker"})," is terminated."]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Usage"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-js",children:"worker.on('close', data => {});\n"})}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Event data"})}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"/docs/next/api/class-worker",title:"Worker",children:"Worker"})}),"\n"]})]})}function h(e={}){const{wrapper:r}={...(0,a.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);